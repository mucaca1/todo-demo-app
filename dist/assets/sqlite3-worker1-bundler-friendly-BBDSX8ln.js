var fr=Object.defineProperty;var Mt=de=>{throw TypeError(de)};var dr=(de,pe,he)=>pe in de?fr(de,pe,{enumerable:!0,configurable:!0,writable:!0,value:he}):de[pe]=he;var Ee=(de,pe,he)=>dr(de,typeof pe!="symbol"?pe+"":pe,he),mt=(de,pe,he)=>pe.has(de)||Mt("Cannot "+he);var $=(de,pe,he)=>(mt(de,pe,"read from private field"),he?he.call(de):pe.get(de)),we=(de,pe,he)=>pe.has(de)?Mt("Cannot add the same private member more than once"):pe instanceof WeakSet?pe.add(de):pe.set(de,he),Ie=(de,pe,he,ke)=>(mt(de,pe,"write to private field"),ke?ke.call(de,he):pe.set(de,he),he),rt=(de,pe,he)=>(mt(de,pe,"access private method"),he);(function(){"use strict";var de=async function(ke={}){var Rt;var ve,_=ke,Ke=typeof window=="object",Se=typeof WorkerGlobalScope<"u";typeof process=="object"&&((Rt=process.versions)!=null&&Rt.node)&&process.type!="renderer";const Me=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,Me.debugModule("globalThis.location =",globalThis.location);var Fe="./this.program",je=(e,t)=>{throw t},st=self.location.href,Je="";function jt(e){return _.locateFile?_.locateFile(e,Je):Je+e}var ot,Xe;if(Ke||Se){try{Je=new URL(".",st).href}catch{}Se&&(Xe=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ot=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var Ye=console.log.bind(console),Pe=console.error.bind(console),Qe,lt=!1,Ze,et,Ce,Ae,Le,We,se,be,xe,yt=!1;function bt(){var e=Ce.buffer;_.HEAP8=Ae=new Int8Array(e),_.HEAP16=We=new Int16Array(e),_.HEAPU8=Le=new Uint8Array(e),_.HEAPU16=new Uint16Array(e),_.HEAP32=se=new Int32Array(e),_.HEAPU32=be=new Uint32Array(e),_.HEAP64=xe=new BigInt64Array(e),_.HEAPU64=new BigUint64Array(e)}function Bt(){if(_.wasmMemory)Ce=_.wasmMemory;else{var e=_.INITIAL_MEMORY||16777216;Ce=new WebAssembly.Memory({initial:e/65536,maximum:32768})}bt()}function Ut(){if(_.preRun)for(typeof _.preRun=="function"&&(_.preRun=[_.preRun]);_.preRun.length;)Zt(_.preRun.shift());wt(At)}function zt(){yt=!0,!_.noFSInit&&!l.initialized&&l.init(),ze.__wasm_call_ctors(),l.ignorePermissions=!1}function Qt(){if(_.postRun)for(typeof _.postRun=="function"&&(_.postRun=[_.postRun]);_.postRun.length;)Yt(_.postRun.shift());wt(St)}var De=0,He=null;function qt(e){var t;De++,(t=_.monitorRunDependencies)==null||t.call(_,De)}function at(e){var i;if(De--,(i=_.monitorRunDependencies)==null||i.call(_,De),De==0&&He){var t=He;He=null,t()}}function vt(e){var i;(i=_.onAbort)==null||i.call(_,e),e="Aborted("+e+")",Pe(e),lt=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw et==null||et(t),t}var ct;function Wt(){return _.locateFile?jt("sqlite3.wasm"):new URL("/assets/sqlite3-B7imZ2XV.wasm",self.location.href).href}function Ht(e){if(e==ct&&Qe)return new Uint8Array(Qe);if(Xe)return Xe(e);throw"both async and sync fetching of the wasm failed"}async function Vt(e){if(!Qe)try{var t=await ot(e);return new Uint8Array(t)}catch{}return Ht(e)}async function Gt(e,t){try{var i=await Vt(e),n=await WebAssembly.instantiate(i,t);return n}catch(r){Pe(`failed to asynchronously prepare wasm: ${r}`),vt(r)}}async function $t(e,t,i){if(!e&&typeof WebAssembly.instantiateStreaming=="function")try{var n=fetch(t,{credentials:"same-origin"}),r=await WebAssembly.instantiateStreaming(n,i);return r}catch(o){Pe(`wasm streaming compile failed: ${o}`),Pe("falling back to ArrayBuffer instantiation")}return Gt(t,i)}function Kt(){return{env:Dt,wasi_snapshot_preview1:Dt}}async function Jt(){function e(o,g){return ze=o.exports,lr(ze),at(),ze}qt();function t(o){return e(o.instance)}var i=Kt();if(_.instantiateWasm)return new Promise((o,g)=>{_.instantiateWasm(i,(y,L)=>{o(e(y))})});ct??(ct=Wt());var n=await $t(Qe,ct,i),r=t(n);return r}class Xt{constructor(t){Ee(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var wt=e=>{for(;e.length>0;)e.shift()(_)},St=[],Yt=e=>St.push(e),At=[],Zt=e=>At.push(e),Et=!0,fe={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return t.exec(e).slice(1)},normalizeArray:(e,t)=>{for(var i=0,n=e.length-1;n>=0;n--){var r=e[n];r==="."?e.splice(n,1):r===".."?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i;i--)e.unshift("..");return e},normalize:e=>{var t=fe.isAbs(e),i=e.slice(-1)==="/";return e=fe.normalizeArray(e.split("/").filter(n=>!!n),!t).join("/"),!e&&!t&&(e="."),e&&i&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=fe.splitPath(e),i=t[0],n=t[1];return!i&&!n?".":(n&&(n=n.slice(0,-1)),i+n)},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>fe.normalize(e.join("/")),join2:(e,t)=>fe.normalize(e+"/"+t)},en=()=>e=>crypto.getRandomValues(e),_t=e=>{(_t=en())(e)},Be={resolve:(...e)=>{for(var t="",i=!1,n=e.length-1;n>=-1&&!i;n--){var r=n>=0?e[n]:l.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,i=fe.isAbs(r)}return t=fe.normalizeArray(t.split("/").filter(o=>!!o),!i).join("/"),(i?"/":"")+t||"."},relative:(e,t)=>{e=Be.resolve(e).slice(1),t=Be.resolve(t).slice(1);function i(D){for(var z=0;z<D.length&&D[z]==="";z++);for(var G=D.length-1;G>=0&&D[G]==="";G--);return z>G?[]:D.slice(z,G-z+1)}for(var n=i(e.split("/")),r=i(t.split("/")),o=Math.min(n.length,r.length),g=o,y=0;y<o;y++)if(n[y]!==r[y]){g=y;break}for(var L=[],y=g;y<n.length;y++)L.push("..");return L=L.concat(r.slice(g)),L.join("/")}},It=new TextDecoder,Ve=(e,t=0,i=NaN)=>{for(var n=t+i,r=t;e[r]&&!(r>=n);)++r;return It.decode(e.buffer?e.subarray(t,r):new Uint8Array(e.slice(t,r)))},ut=[],tt=e=>{for(var t=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++i):t+=3}return t},kt=(e,t,i,n)=>{if(!(n>0))return 0;for(var r=i,o=i+n-1,g=0;g<e.length;++g){var y=e.codePointAt(g);if(y<=127){if(i>=o)break;t[i++]=y}else if(y<=2047){if(i+1>=o)break;t[i++]=192|y>>6,t[i++]=128|y&63}else if(y<=65535){if(i+2>=o)break;t[i++]=224|y>>12,t[i++]=128|y>>6&63,t[i++]=128|y&63}else{if(i+3>=o)break;t[i++]=240|y>>18,t[i++]=128|y>>12&63,t[i++]=128|y>>6&63,t[i++]=128|y&63,g++}}return t[i]=0,i-r},ft=(e,t,i)=>{var n=tt(e)+1,r=new Array(n),o=kt(e,r,0,r.length);return r.length=o,r},tn=()=>{if(!ut.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`)),!e)return null;ut=ft(e)}return ut.shift()},Re={ttys:[],init(){},shutdown(){},register(e,t){Re.ttys[e]={input:[],output:[],ops:t},l.registerDevice(e,Re.stream_ops)},stream_ops:{open(e){var t=Re.ttys[e.node.rdev];if(!t)throw new l.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,i,n,r){if(!e.tty||!e.tty.ops.get_char)throw new l.ErrnoError(60);for(var o=0,g=0;g<n;g++){var y;try{y=e.tty.ops.get_char(e.tty)}catch{throw new l.ErrnoError(29)}if(y===void 0&&o===0)throw new l.ErrnoError(6);if(y==null)break;o++,t[i+g]=y}return o&&(e.node.atime=Date.now()),o},write(e,t,i,n,r){if(!e.tty||!e.tty.ops.put_char)throw new l.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,t[i+o])}catch{throw new l.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),o}},default_tty_ops:{get_char(e){return tn()},put_char(e,t){t===null||t===10?(Ye(Ve(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;((t=e.output)==null?void 0:t.length)>0&&(Ye(Ve(e.output)),e.output=[])},ioctl_tcgets(e){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(e,t,i){return 0},ioctl_tiocgwinsz(e){return[24,80]}},default_tty1_ops:{put_char(e,t){t===null||t===10?(Pe(Ve(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;((t=e.output)==null?void 0:t.length)>0&&(Pe(Ve(e.output)),e.output=[])}}},nn=(e,t)=>Le.fill(0,e,e+t),xt=(e,t)=>Math.ceil(e/t)*t,Tt=e=>{e=xt(e,65536);var t=Ct(65536,e);return t&&nn(t,e),t},ne={ops_table:null,mount(e){return ne.createNode(null,"/",16895,0)},createNode(e,t,i,n){if(l.isBlkdev(i)||l.isFIFO(i))throw new l.ErrnoError(63);ne.ops_table||(ne.ops_table={dir:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr,lookup:ne.node_ops.lookup,mknod:ne.node_ops.mknod,rename:ne.node_ops.rename,unlink:ne.node_ops.unlink,rmdir:ne.node_ops.rmdir,readdir:ne.node_ops.readdir,symlink:ne.node_ops.symlink},stream:{llseek:ne.stream_ops.llseek}},file:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr},stream:{llseek:ne.stream_ops.llseek,read:ne.stream_ops.read,write:ne.stream_ops.write,mmap:ne.stream_ops.mmap,msync:ne.stream_ops.msync}},link:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr,readlink:ne.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ne.node_ops.getattr,setattr:ne.node_ops.setattr},stream:l.chrdev_stream_ops}});var r=l.createNode(e,t,i,n);return l.isDir(r.mode)?(r.node_ops=ne.ops_table.dir.node,r.stream_ops=ne.ops_table.dir.stream,r.contents={}):l.isFile(r.mode)?(r.node_ops=ne.ops_table.file.node,r.stream_ops=ne.ops_table.file.stream,r.usedBytes=0,r.contents=null):l.isLink(r.mode)?(r.node_ops=ne.ops_table.link.node,r.stream_ops=ne.ops_table.link.stream):l.isChrdev(r.mode)&&(r.node_ops=ne.ops_table.chrdev.node,r.stream_ops=ne.ops_table.chrdev.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.contents[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage(e,t){var i=e.contents?e.contents.length:0;if(!(i>=t)){var n=1024*1024;t=Math.max(t,i*(i<n?2:1.125)>>>0),i!=0&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(t==0)e.contents=null,e.usedBytes=0;else{var i=e.contents;e.contents=new Uint8Array(t),i&&e.contents.set(i.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=l.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,l.isDir(e.mode)?t.size=4096:l.isFile(e.mode)?t.size=e.usedBytes:l.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){for(const i of["mode","atime","mtime","ctime"])t[i]!=null&&(e[i]=t[i]);t.size!==void 0&&ne.resizeFileStorage(e,t.size)},lookup(e,t){throw ne.doesNotExistError},mknod(e,t,i,n){return ne.createNode(e,t,i,n)},rename(e,t,i){var n;try{n=l.lookupNode(t,i)}catch{}if(n){if(l.isDir(e.mode))for(var r in n.contents)throw new l.ErrnoError(55);l.hashRemoveNode(n)}delete e.parent.contents[e.name],t.contents[i]=e,e.name=i,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.contents[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var i=l.lookupNode(e,t);for(var n in i.contents)throw new l.ErrnoError(55);delete e.contents[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.contents)]},symlink(e,t,i){var n=ne.createNode(e,t,41471,0);return n.link=i,n},readlink(e){if(!l.isLink(e.mode))throw new l.ErrnoError(28);return e.link}},stream_ops:{read(e,t,i,n,r){var o=e.node.contents;if(r>=e.node.usedBytes)return 0;var g=Math.min(e.node.usedBytes-r,n);if(g>8&&o.subarray)t.set(o.subarray(r,r+g),i);else for(var y=0;y<g;y++)t[i+y]=o[r+y];return g},write(e,t,i,n,r,o){if(t.buffer===Ae.buffer&&(o=!1),!n)return 0;var g=e.node;if(g.mtime=g.ctime=Date.now(),t.subarray&&(!g.contents||g.contents.subarray)){if(o)return g.contents=t.subarray(i,i+n),g.usedBytes=n,n;if(g.usedBytes===0&&r===0)return g.contents=t.slice(i,i+n),g.usedBytes=n,n;if(r+n<=g.usedBytes)return g.contents.set(t.subarray(i,i+n),r),n}if(ne.expandFileStorage(g,r+n),g.contents.subarray&&t.subarray)g.contents.set(t.subarray(i,i+n),r);else for(var y=0;y<n;y++)g.contents[r+y]=t[i+y];return g.usedBytes=Math.max(g.usedBytes,r+n),n},llseek(e,t,i){var n=t;if(i===1?n+=e.position:i===2&&l.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new l.ErrnoError(28);return n},mmap(e,t,i,n,r){if(!l.isFile(e.node.mode))throw new l.ErrnoError(43);var o,g,y=e.node.contents;if(!(r&2)&&y&&y.buffer===Ae.buffer)g=!1,o=y.byteOffset;else{if(g=!0,o=Tt(t),!o)throw new l.ErrnoError(48);y&&((i>0||i+t<y.length)&&(y.subarray?y=y.subarray(i,i+t):y=Array.prototype.slice.call(y,i,i+t)),Ae.set(y,o))}return{ptr:o,allocated:g}},msync(e,t,i,n,r){return ne.stream_ops.write(e,t,0,n,i,!1),0}}},rn=async e=>{var t=await ot(e);return new Uint8Array(t)},sn=(...e)=>l.createDataFile(...e),Ft=[],on=(e,t,i,n)=>{typeof Browser<"u"&&Browser.init();var r=!1;return Ft.forEach(o=>{r||o.canHandle(t)&&(o.handle(e,t,i,n),r=!0)}),r},ln=(e,t,i,n,r,o,g,y,L,D)=>{var z=t?Be.resolve(fe.join2(e,t)):e;function G(O){function E(U){D==null||D(),y||sn(e,t,U,n,r,L),o==null||o(),at()}on(O,z,E,()=>{g==null||g(),at()})||E(O)}qt(),typeof i=="string"?rn(i).then(G,g):G(i)},an=e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},i=t[e];if(typeof i>"u")throw new Error(`Unknown file open mode: ${e}`);return i},dt=(e,t)=>{var i=0;return e&&(i|=365),t&&(i|=146),i},l={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{constructor(e){Ee(this,"name","ErrnoError");this.errno=e}},FSStream:class{constructor(){Ee(this,"shared",{})}get object(){return this.node}set object(e){this.node=e}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,i,n){Ee(this,"node_ops",{});Ee(this,"stream_ops",{});Ee(this,"readMode",365);Ee(this,"writeMode",146);Ee(this,"mounted",null);e||(e=this),this.parent=e,this.mount=e.mount,this.id=l.nextInode++,this.name=t,this.mode=i,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return l.isDir(this.mode)}get isDevice(){return l.isChrdev(this.mode)}},lookupPath(e,t={}){if(!e)throw new l.ErrnoError(44);t.follow_mount??(t.follow_mount=!0),fe.isAbs(e)||(e=l.cwd()+"/"+e);e:for(var i=0;i<40;i++){for(var n=e.split("/").filter(D=>!!D),r=l.root,o="/",g=0;g<n.length;g++){var y=g===n.length-1;if(y&&t.parent)break;if(n[g]!=="."){if(n[g]===".."){if(o=fe.dirname(o),l.isRoot(r)){e=o+"/"+n.slice(g+1).join("/");continue e}else r=r.parent;continue}o=fe.join2(o,n[g]);try{r=l.lookupNode(r,n[g])}catch(D){if((D==null?void 0:D.errno)===44&&y&&t.noent_okay)return{path:o};throw D}if(l.isMountpoint(r)&&(!y||t.follow_mount)&&(r=r.mounted.root),l.isLink(r.mode)&&(!y||t.follow)){if(!r.node_ops.readlink)throw new l.ErrnoError(52);var L=r.node_ops.readlink(r);fe.isAbs(L)||(L=fe.dirname(o)+"/"+L),e=L+"/"+n.slice(g+1).join("/");continue e}}}return{path:o,node:r}}throw new l.ErrnoError(32)},getPath(e){for(var t;;){if(l.isRoot(e)){var i=e.mount.mountpoint;return t?i[i.length-1]!=="/"?`${i}/${t}`:i+t:i}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var i=0,n=0;n<t.length;n++)i=(i<<5)-i+t.charCodeAt(n)|0;return(e+i>>>0)%l.nameTable.length},hashAddNode(e){var t=l.hashName(e.parent.id,e.name);e.name_next=l.nameTable[t],l.nameTable[t]=e},hashRemoveNode(e){var t=l.hashName(e.parent.id,e.name);if(l.nameTable[t]===e)l.nameTable[t]=e.name_next;else for(var i=l.nameTable[t];i;){if(i.name_next===e){i.name_next=e.name_next;break}i=i.name_next}},lookupNode(e,t){var i=l.mayLookup(e);if(i)throw new l.ErrnoError(i);for(var n=l.hashName(e.id,t),r=l.nameTable[n];r;r=r.name_next){var o=r.name;if(r.parent.id===e.id&&o===t)return r}return l.lookup(e,t)},createNode(e,t,i,n){var r=new l.FSNode(e,t,i,n);return l.hashAddNode(r),r},destroyNode(e){l.hashRemoveNode(e)},isRoot(e){return e===e.parent},isMountpoint(e){return!!e.mounted},isFile(e){return(e&61440)===32768},isDir(e){return(e&61440)===16384},isLink(e){return(e&61440)===40960},isChrdev(e){return(e&61440)===8192},isBlkdev(e){return(e&61440)===24576},isFIFO(e){return(e&61440)===4096},isSocket(e){return(e&49152)===49152},flagsToPermissionString(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t},nodePermissions(e,t){return l.ignorePermissions?0:t.includes("r")&&!(e.mode&292)||t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73)?2:0},mayLookup(e){if(!l.isDir(e.mode))return 54;var t=l.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){if(!l.isDir(e.mode))return 54;try{var i=l.lookupNode(e,t);return 20}catch{}return l.nodePermissions(e,"wx")},mayDelete(e,t,i){var n;try{n=l.lookupNode(e,t)}catch(o){return o.errno}var r=l.nodePermissions(e,"wx");if(r)return r;if(i){if(!l.isDir(n.mode))return 54;if(l.isRoot(n)||l.getPath(n)===l.cwd())return 10}else if(l.isDir(n.mode))return 31;return 0},mayOpen(e,t){return e?l.isLink(e.mode)?32:l.isDir(e.mode)&&(l.flagsToPermissionString(t)!=="r"||t&576)?31:l.nodePermissions(e,l.flagsToPermissionString(t)):44},checkOpExists(e,t){if(!e)throw new l.ErrnoError(t);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=l.MAX_OPEN_FDS;e++)if(!l.streams[e])return e;throw new l.ErrnoError(33)},getStreamChecked(e){var t=l.getStream(e);if(!t)throw new l.ErrnoError(8);return t},getStream:e=>l.streams[e],createStream(e,t=-1){return e=Object.assign(new l.FSStream,e),t==-1&&(t=l.nextfd()),e.fd=t,l.streams[t]=e,e},closeStream(e){l.streams[e]=null},dupStream(e,t=-1){var n,r;var i=l.createStream(e,t);return(r=(n=i.stream_ops)==null?void 0:n.dup)==null||r.call(n,i),i},doSetAttr(e,t,i){var n=e==null?void 0:e.stream_ops.setattr,r=n?e:t;n??(n=t.node_ops.setattr),l.checkOpExists(n,63),n(r,i)},chrdev_stream_ops:{open(e){var i,n;var t=l.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,(n=(i=e.stream_ops).open)==null||n.call(i,e)},llseek(){throw new l.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,t)=>e<<8|t,registerDevice(e,t){l.devices[e]={stream_ops:t}},getDevice:e=>l.devices[e],getMounts(e){for(var t=[],i=[e];i.length;){var n=i.pop();t.push(n),i.push(...n.mounts)}return t},syncfs(e,t){typeof e=="function"&&(t=e,e=!1),l.syncFSRequests++,l.syncFSRequests>1&&Pe(`warning: ${l.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var i=l.getMounts(l.root.mount),n=0;function r(g){return l.syncFSRequests--,t(g)}function o(g){if(g)return o.errored?void 0:(o.errored=!0,r(g));++n>=i.length&&r(null)}i.forEach(g=>{if(!g.type.syncfs)return o(null);g.type.syncfs(g,e,o)})},mount(e,t,i){var n=i==="/",r=!i,o;if(n&&l.root)throw new l.ErrnoError(10);if(!n&&!r){var g=l.lookupPath(i,{follow_mount:!1});if(i=g.path,o=g.node,l.isMountpoint(o))throw new l.ErrnoError(10);if(!l.isDir(o.mode))throw new l.ErrnoError(54)}var y={type:e,opts:t,mountpoint:i,mounts:[]},L=e.mount(y);return L.mount=y,y.root=L,n?l.root=L:o&&(o.mounted=y,o.mount&&o.mount.mounts.push(y)),L},unmount(e){var t=l.lookupPath(e,{follow_mount:!1});if(!l.isMountpoint(t.node))throw new l.ErrnoError(28);var i=t.node,n=i.mounted,r=l.getMounts(n);Object.keys(l.nameTable).forEach(g=>{for(var y=l.nameTable[g];y;){var L=y.name_next;r.includes(y.mount)&&l.destroyNode(y),y=L}}),i.mounted=null;var o=i.mount.mounts.indexOf(n);i.mount.mounts.splice(o,1)},lookup(e,t){return e.node_ops.lookup(e,t)},mknod(e,t,i){var n=l.lookupPath(e,{parent:!0}),r=n.node,o=fe.basename(e);if(!o)throw new l.ErrnoError(28);if(o==="."||o==="..")throw new l.ErrnoError(20);var g=l.mayCreate(r,o);if(g)throw new l.ErrnoError(g);if(!r.node_ops.mknod)throw new l.ErrnoError(63);return r.node_ops.mknod(r,o,t,i)},statfs(e){return l.statfsNode(l.lookupPath(e,{follow:!0}).node)},statfsStream(e){return l.statfsNode(e.node)},statfsNode(e){var t={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:l.nextInode,ffree:l.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(t,e.node_ops.statfs(e.mount.opts.root)),t},create(e,t=438){return t&=4095,t|=32768,l.mknod(e,t,0)},mkdir(e,t=511){return t&=1023,t|=16384,l.mknod(e,t,0)},mkdirTree(e,t){var i=e.split("/"),n="";for(var r of i)if(r){(n||fe.isAbs(e))&&(n+="/"),n+=r;try{l.mkdir(n,t)}catch(o){if(o.errno!=20)throw o}}},mkdev(e,t,i){return typeof i>"u"&&(i=t,t=438),t|=8192,l.mknod(e,t,i)},symlink(e,t){if(!Be.resolve(e))throw new l.ErrnoError(44);var i=l.lookupPath(t,{parent:!0}),n=i.node;if(!n)throw new l.ErrnoError(44);var r=fe.basename(t),o=l.mayCreate(n,r);if(o)throw new l.ErrnoError(o);if(!n.node_ops.symlink)throw new l.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var i=fe.dirname(e),n=fe.dirname(t),r=fe.basename(e),o=fe.basename(t),g,y,L;if(g=l.lookupPath(e,{parent:!0}),y=g.node,g=l.lookupPath(t,{parent:!0}),L=g.node,!y||!L)throw new l.ErrnoError(44);if(y.mount!==L.mount)throw new l.ErrnoError(75);var D=l.lookupNode(y,r),z=Be.relative(e,n);if(z.charAt(0)!==".")throw new l.ErrnoError(28);if(z=Be.relative(t,i),z.charAt(0)!==".")throw new l.ErrnoError(55);var G;try{G=l.lookupNode(L,o)}catch{}if(D!==G){var O=l.isDir(D.mode),E=l.mayDelete(y,r,O);if(E)throw new l.ErrnoError(E);if(E=G?l.mayDelete(L,o,O):l.mayCreate(L,o),E)throw new l.ErrnoError(E);if(!y.node_ops.rename)throw new l.ErrnoError(63);if(l.isMountpoint(D)||G&&l.isMountpoint(G))throw new l.ErrnoError(10);if(L!==y&&(E=l.nodePermissions(y,"w"),E))throw new l.ErrnoError(E);l.hashRemoveNode(D);try{y.node_ops.rename(D,L,o),D.parent=L}catch(U){throw U}finally{l.hashAddNode(D)}}},rmdir(e){var t=l.lookupPath(e,{parent:!0}),i=t.node,n=fe.basename(e),r=l.lookupNode(i,n),o=l.mayDelete(i,n,!0);if(o)throw new l.ErrnoError(o);if(!i.node_ops.rmdir)throw new l.ErrnoError(63);if(l.isMountpoint(r))throw new l.ErrnoError(10);i.node_ops.rmdir(i,n),l.destroyNode(r)},readdir(e){var t=l.lookupPath(e,{follow:!0}),i=t.node,n=l.checkOpExists(i.node_ops.readdir,54);return n(i)},unlink(e){var t=l.lookupPath(e,{parent:!0}),i=t.node;if(!i)throw new l.ErrnoError(44);var n=fe.basename(e),r=l.lookupNode(i,n),o=l.mayDelete(i,n,!1);if(o)throw new l.ErrnoError(o);if(!i.node_ops.unlink)throw new l.ErrnoError(63);if(l.isMountpoint(r))throw new l.ErrnoError(10);i.node_ops.unlink(i,n),l.destroyNode(r)},readlink(e){var t=l.lookupPath(e),i=t.node;if(!i)throw new l.ErrnoError(44);if(!i.node_ops.readlink)throw new l.ErrnoError(28);return i.node_ops.readlink(i)},stat(e,t){var i=l.lookupPath(e,{follow:!t}),n=i.node,r=l.checkOpExists(n.node_ops.getattr,63);return r(n)},fstat(e){var t=l.getStreamChecked(e),i=t.node,n=t.stream_ops.getattr,r=n?t:i;return n??(n=i.node_ops.getattr),l.checkOpExists(n,63),n(r)},lstat(e){return l.stat(e,!0)},doChmod(e,t,i,n){l.doSetAttr(e,t,{mode:i&4095|t.mode&-4096,ctime:Date.now(),dontFollow:n})},chmod(e,t,i){var n;if(typeof e=="string"){var r=l.lookupPath(e,{follow:!i});n=r.node}else n=e;l.doChmod(null,n,t,i)},lchmod(e,t){l.chmod(e,t,!0)},fchmod(e,t){var i=l.getStreamChecked(e);l.doChmod(i,i.node,t,!1)},doChown(e,t,i){l.doSetAttr(e,t,{timestamp:Date.now(),dontFollow:i})},chown(e,t,i,n){var r;if(typeof e=="string"){var o=l.lookupPath(e,{follow:!n});r=o.node}else r=e;l.doChown(null,r,n)},lchown(e,t,i){l.chown(e,t,i,!0)},fchown(e,t,i){var n=l.getStreamChecked(e);l.doChown(n,n.node,!1)},doTruncate(e,t,i){if(l.isDir(t.mode))throw new l.ErrnoError(31);if(!l.isFile(t.mode))throw new l.ErrnoError(28);var n=l.nodePermissions(t,"w");if(n)throw new l.ErrnoError(n);l.doSetAttr(e,t,{size:i,timestamp:Date.now()})},truncate(e,t){if(t<0)throw new l.ErrnoError(28);var i;if(typeof e=="string"){var n=l.lookupPath(e,{follow:!0});i=n.node}else i=e;l.doTruncate(null,i,t)},ftruncate(e,t){var i=l.getStreamChecked(e);if(t<0||!(i.flags&2097155))throw new l.ErrnoError(28);l.doTruncate(i,i.node,t)},utime(e,t,i){var n=l.lookupPath(e,{follow:!0}),r=n.node,o=l.checkOpExists(r.node_ops.setattr,63);o(r,{atime:t,mtime:i})},open(e,t,i=438){if(e==="")throw new l.ErrnoError(44);t=typeof t=="string"?an(t):t,t&64?i=i&4095|32768:i=0;var n,r;if(typeof e=="object")n=e;else{r=e.endsWith("/");var o=l.lookupPath(e,{follow:!(t&131072),noent_okay:!0});n=o.node,e=o.path}var g=!1;if(t&64)if(n){if(t&128)throw new l.ErrnoError(20)}else{if(r)throw new l.ErrnoError(31);n=l.mknod(e,i|511,0),g=!0}if(!n)throw new l.ErrnoError(44);if(l.isChrdev(n.mode)&&(t&=-513),t&65536&&!l.isDir(n.mode))throw new l.ErrnoError(54);if(!g){var y=l.mayOpen(n,t);if(y)throw new l.ErrnoError(y)}t&512&&!g&&l.truncate(n,0),t&=-131713;var L=l.createStream({node:n,path:l.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return L.stream_ops.open&&L.stream_ops.open(L),g&&l.chmod(n,i&511),_.logReadFiles&&!(t&1)&&(e in l.readFiles||(l.readFiles[e]=1)),L},close(e){if(l.isClosed(e))throw new l.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(t){throw t}finally{l.closeStream(e.fd)}e.fd=null},isClosed(e){return e.fd===null},llseek(e,t,i){if(l.isClosed(e))throw new l.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new l.ErrnoError(70);if(i!=0&&i!=1&&i!=2)throw new l.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,i),e.ungotten=[],e.position},read(e,t,i,n,r){if(n<0||r<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if((e.flags&2097155)===1)throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.read)throw new l.ErrnoError(28);var o=typeof r<"u";if(!o)r=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var g=e.stream_ops.read(e,t,i,n,r);return o||(e.position+=g),g},write(e,t,i,n,r,o){if(n<0||r<0)throw new l.ErrnoError(28);if(l.isClosed(e))throw new l.ErrnoError(8);if(!(e.flags&2097155))throw new l.ErrnoError(8);if(l.isDir(e.node.mode))throw new l.ErrnoError(31);if(!e.stream_ops.write)throw new l.ErrnoError(28);e.seekable&&e.flags&1024&&l.llseek(e,0,2);var g=typeof r<"u";if(!g)r=e.position;else if(!e.seekable)throw new l.ErrnoError(70);var y=e.stream_ops.write(e,t,i,n,r,o);return g||(e.position+=y),y},mmap(e,t,i,n,r){if(n&2&&!(r&2)&&(e.flags&2097155)!==2)throw new l.ErrnoError(2);if((e.flags&2097155)===1)throw new l.ErrnoError(2);if(!e.stream_ops.mmap)throw new l.ErrnoError(43);if(!t)throw new l.ErrnoError(28);return e.stream_ops.mmap(e,t,i,n,r)},msync(e,t,i,n,r){return e.stream_ops.msync?e.stream_ops.msync(e,t,i,n,r):0},ioctl(e,t,i){if(!e.stream_ops.ioctl)throw new l.ErrnoError(59);return e.stream_ops.ioctl(e,t,i)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary",t.encoding!=="utf8"&&t.encoding!=="binary")throw new Error(`Invalid encoding type "${t.encoding}"`);var i=l.open(e,t.flags),n=l.stat(e),r=n.size,o=new Uint8Array(r);return l.read(i,o,0,r,0),t.encoding==="utf8"&&(o=Ve(o)),l.close(i),o},writeFile(e,t,i={}){i.flags=i.flags||577;var n=l.open(e,i.flags,i.mode);if(typeof t=="string"&&(t=new Uint8Array(ft(t))),ArrayBuffer.isView(t))l.write(n,t,0,t.byteLength,void 0,i.canOwn);else throw new Error("Unsupported data type");l.close(n)},cwd:()=>l.currentPath,chdir(e){var t=l.lookupPath(e,{follow:!0});if(t.node===null)throw new l.ErrnoError(44);if(!l.isDir(t.node.mode))throw new l.ErrnoError(54);var i=l.nodePermissions(t.node,"x");if(i)throw new l.ErrnoError(i);l.currentPath=t.path},createDefaultDirectories(){l.mkdir("/tmp"),l.mkdir("/home"),l.mkdir("/home/web_user")},createDefaultDevices(){l.mkdir("/dev"),l.registerDevice(l.makedev(1,3),{read:()=>0,write:(n,r,o,g,y)=>g,llseek:()=>0}),l.mkdev("/dev/null",l.makedev(1,3)),Re.register(l.makedev(5,0),Re.default_tty_ops),Re.register(l.makedev(6,0),Re.default_tty1_ops),l.mkdev("/dev/tty",l.makedev(5,0)),l.mkdev("/dev/tty1",l.makedev(6,0));var e=new Uint8Array(1024),t=0,i=()=>(t===0&&(_t(e),t=e.byteLength),e[--t]);l.createDevice("/dev","random",i),l.createDevice("/dev","urandom",i),l.mkdir("/dev/shm"),l.mkdir("/dev/shm/tmp")},createSpecialDirectories(){l.mkdir("/proc");var e=l.mkdir("/proc/self");l.mkdir("/proc/self/fd"),l.mount({mount(){var t=l.createNode(e,"fd",16895,73);return t.stream_ops={llseek:ne.stream_ops.llseek},t.node_ops={lookup(i,n){var r=+n,o=l.getStreamChecked(r),g={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>o.path},id:r+1};return g.parent=g,g},readdir(){return Array.from(l.streams.entries()).filter(([i,n])=>n).map(([i,n])=>i.toString())}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,i){e?l.createDevice("/dev","stdin",e):l.symlink("/dev/tty","/dev/stdin"),t?l.createDevice("/dev","stdout",null,t):l.symlink("/dev/tty","/dev/stdout"),i?l.createDevice("/dev","stderr",null,i):l.symlink("/dev/tty1","/dev/stderr"),l.open("/dev/stdin",0),l.open("/dev/stdout",1),l.open("/dev/stderr",1)},staticInit(){l.nameTable=new Array(4096),l.mount(ne,{},"/"),l.createDefaultDirectories(),l.createDefaultDevices(),l.createSpecialDirectories(),l.filesystems={MEMFS:ne}},init(e,t,i){l.initialized=!0,e??(e=_.stdin),t??(t=_.stdout),i??(i=_.stderr),l.createStandardStreams(e,t,i)},quit(){l.initialized=!1;for(var e of l.streams)e&&l.close(e)},findObject(e,t){var i=l.analyzePath(e,t);return i.exists?i.object:null},analyzePath(e,t){try{var i=l.lookupPath(e,{follow:!t});e=i.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=l.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=i.path,n.parentObject=i.node,n.name=fe.basename(e),i=l.lookupPath(e,{follow:!t}),n.exists=!0,n.path=i.path,n.object=i.node,n.name=i.node.name,n.isRoot=i.path==="/"}catch(r){n.error=r.errno}return n},createPath(e,t,i,n){e=typeof e=="string"?e:l.getPath(e);for(var r=t.split("/").reverse();r.length;){var o=r.pop();if(o){var g=fe.join2(e,o);try{l.mkdir(g)}catch(y){if(y.errno!=20)throw y}e=g}}return g},createFile(e,t,i,n,r){var o=fe.join2(typeof e=="string"?e:l.getPath(e),t),g=dt(n,r);return l.create(o,g)},createDataFile(e,t,i,n,r,o){var g=t;e&&(e=typeof e=="string"?e:l.getPath(e),g=t?fe.join2(e,t):e);var y=dt(n,r),L=l.create(g,y);if(i){if(typeof i=="string"){for(var D=new Array(i.length),z=0,G=i.length;z<G;++z)D[z]=i.charCodeAt(z);i=D}l.chmod(L,y|146);var O=l.open(L,577);l.write(O,i,0,i.length,0,o),l.close(O),l.chmod(L,y)}},createDevice(e,t,i,n){var y;var r=fe.join2(typeof e=="string"?e:l.getPath(e),t),o=dt(!!i,!!n);(y=l.createDevice).major??(y.major=64);var g=l.makedev(l.createDevice.major++,0);return l.registerDevice(g,{open(L){L.seekable=!1},close(L){var D;(D=n==null?void 0:n.buffer)!=null&&D.length&&n(10)},read(L,D,z,G,O){for(var E=0,U=0;U<G;U++){var h;try{h=i()}catch{throw new l.ErrnoError(29)}if(h===void 0&&E===0)throw new l.ErrnoError(6);if(h==null)break;E++,D[z+U]=h}return E&&(L.node.atime=Date.now()),E},write(L,D,z,G,O){for(var E=0;E<G;E++)try{n(D[z+E])}catch{throw new l.ErrnoError(29)}return G&&(L.node.mtime=L.node.ctime=Date.now()),E}}),l.mkdev(r,o,g)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=Xe(e.url),e.usedBytes=e.contents.length}catch{throw new l.ErrnoError(29)}},createLazyFile(e,t,i,n,r){class o{constructor(){Ee(this,"lengthKnown",!1);Ee(this,"chunks",[])}get(E){if(!(E>this.length-1||E<0)){var U=E%this.chunkSize,h=E/this.chunkSize|0;return this.getter(h)[U]}}setDataGetter(E){this.getter=E}cacheLength(){var E=new XMLHttpRequest;if(E.open("HEAD",i,!1),E.send(null),!(E.status>=200&&E.status<300||E.status===304))throw new Error("Couldn't load "+i+". Status: "+E.status);var U=Number(E.getResponseHeader("Content-length")),h,m=(h=E.getResponseHeader("Accept-Ranges"))&&h==="bytes",k=(h=E.getResponseHeader("Content-Encoding"))&&h==="gzip",x=1024*1024;m||(x=U);var C=(j,M)=>{if(j>M)throw new Error("invalid range ("+j+", "+M+") or no bytes requested!");if(M>U-1)throw new Error("only "+U+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",i,!1),U!==x&&c.setRequestHeader("Range","bytes="+j+"-"+M),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+i+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):ft(c.responseText||"")},w=this;w.setDataGetter(j=>{var M=j*x,c=(j+1)*x-1;if(c=Math.min(c,U-1),typeof w.chunks[j]>"u"&&(w.chunks[j]=C(M,c)),typeof w.chunks[j]>"u")throw new Error("doXHR failed!");return w.chunks[j]}),(k||!U)&&(x=U=1,U=this.getter(0).length,x=U,Ye("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=U,this._chunkSize=x,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!Se)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var g=new o,y={isDevice:!1,contents:g}}else var y={isDevice:!1,url:i};var L=l.createFile(e,t,y,n,r);y.contents?L.contents=y.contents:y.url&&(L.contents=null,L.url=y.url),Object.defineProperties(L,{usedBytes:{get:function(){return this.contents.length}}});var D={},z=Object.keys(L.stream_ops);z.forEach(O=>{var E=L.stream_ops[O];D[O]=(...U)=>(l.forceLoadFile(L),E(...U))});function G(O,E,U,h,m){var k=O.node.contents;if(m>=k.length)return 0;var x=Math.min(k.length-m,h);if(k.slice)for(var C=0;C<x;C++)E[U+C]=k[m+C];else for(var C=0;C<x;C++)E[U+C]=k.get(m+C);return x}return D.read=(O,E,U,h,m)=>(l.forceLoadFile(L),G(O,E,U,h,m)),D.mmap=(O,E,U,h,m)=>{l.forceLoadFile(L);var k=Tt(E);if(!k)throw new l.ErrnoError(48);return G(O,Ae,k,E,U),{ptr:k,allocated:!0}},L.stream_ops=D,L}},cn=(e,t)=>{if(!e)return"";for(var i=e+t,n=e;!(n>=i)&&Le[n];)++n;return It.decode(Le.subarray(e,n))},ue={DEFAULT_POLLMASK:5,calculateAt(e,t,i){if(fe.isAbs(t))return t;var n;if(e===-100)n=l.cwd();else{var r=ue.getStreamFromFD(e);n=r.path}if(t.length==0){if(!i)throw new l.ErrnoError(44);return n}return n+"/"+t},writeStat(e,t){se[e>>2]=t.dev,se[e+4>>2]=t.mode,be[e+8>>2]=t.nlink,se[e+12>>2]=t.uid,se[e+16>>2]=t.gid,se[e+20>>2]=t.rdev,xe[e+24>>3]=BigInt(t.size),se[e+32>>2]=4096,se[e+36>>2]=t.blocks;var i=t.atime.getTime(),n=t.mtime.getTime(),r=t.ctime.getTime();return xe[e+40>>3]=BigInt(Math.floor(i/1e3)),be[e+48>>2]=i%1e3*1e3*1e3,xe[e+56>>3]=BigInt(Math.floor(n/1e3)),be[e+64>>2]=n%1e3*1e3*1e3,xe[e+72>>3]=BigInt(Math.floor(r/1e3)),be[e+80>>2]=r%1e3*1e3*1e3,xe[e+88>>3]=BigInt(t.ino),0},writeStatFs(e,t){se[e+4>>2]=t.bsize,se[e+40>>2]=t.bsize,se[e+8>>2]=t.blocks,se[e+12>>2]=t.bfree,se[e+16>>2]=t.bavail,se[e+20>>2]=t.files,se[e+24>>2]=t.ffree,se[e+28>>2]=t.fsid,se[e+44>>2]=t.flags,se[e+36>>2]=t.namelen},doMsync(e,t,i,n,r){if(!l.isFile(t.node.mode))throw new l.ErrnoError(43);if(n&2)return 0;var o=Le.slice(e,e+i);l.msync(t,o,r,i,n)},getStreamFromFD(e){var t=l.getStreamChecked(e);return t},varargs:void 0,getStr(e){var t=cn(e);return t}};function _n(e,t){try{return e=ue.getStr(e),l.chmod(e,t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function un(e,t,i,n){try{if(t=ue.getStr(t),t=ue.calculateAt(e,t),i&-8)return-28;var r=l.lookupPath(t,{follow:!0}),o=r.node;if(!o)return-44;var g="";return i&4&&(g+="r"),i&2&&(g+="w"),i&1&&(g+="x"),g&&l.nodePermissions(o,g)?-2:0}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function fn(e,t){try{return l.fchmod(e,t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function dn(e,t,i){try{return l.fchown(e,t,i),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var nt=()=>{var e=se[+ue.varargs>>2];return ue.varargs+=4,e},Ue=nt;function pn(e,t,i){ue.varargs=i;try{var n=ue.getStreamFromFD(e);switch(t){case 0:{var r=nt();if(r<0)return-28;for(;l.streams[r];)r++;var o;return o=l.dupStream(n,r),o.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var r=nt();return n.flags|=r,0}case 12:{var r=Ue(),g=0;return We[r+g>>1]=2,0}case 13:case 14:return 0}return-28}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function hn(e,t){try{return ue.writeStat(t,l.fstat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var gn=9007199254740992,mn=-9007199254740992,Ge=e=>e<mn||e>gn?NaN:Number(e);function yn(e,t){t=Ge(t);try{return isNaN(t)?-61:(l.ftruncate(e,t),0)}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}var Ne=(e,t,i)=>kt(e,Le,t,i);function bn(e,t){try{if(t===0)return-28;var i=l.cwd(),n=tt(i)+1;return t<n?-68:(Ne(i,e,t),n)}catch(r){if(typeof l>"u"||r.name!=="ErrnoError")throw r;return-r.errno}}function qn(e,t,i){ue.varargs=i;try{var n=ue.getStreamFromFD(e);switch(t){case 21509:return n.tty?0:-59;case 21505:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var r=n.tty.ops.ioctl_tcgets(n),o=Ue();se[o>>2]=r.c_iflag||0,se[o+4>>2]=r.c_oflag||0,se[o+8>>2]=r.c_cflag||0,se[o+12>>2]=r.c_lflag||0;for(var g=0;g<32;g++)Ae[o+g+17]=r.c_cc[g]||0;return 0}return 0}case 21510:case 21511:case 21512:return n.tty?0:-59;case 21506:case 21507:case 21508:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){for(var o=Ue(),y=se[o>>2],L=se[o+4>>2],D=se[o+8>>2],z=se[o+12>>2],G=[],g=0;g<32;g++)G.push(Ae[o+g+17]);return n.tty.ops.ioctl_tcsets(n.tty,t,{c_iflag:y,c_oflag:L,c_cflag:D,c_lflag:z,c_cc:G})}return 0}case 21519:{if(!n.tty)return-59;var o=Ue();return se[o>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var o=Ue();return l.ioctl(n,t,o)}case 21523:{if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var O=n.tty.ops.ioctl_tiocgwinsz(n.tty),o=Ue();We[o>>1]=O[0],We[o+2>>1]=O[1]}return 0}case 21524:return n.tty?0:-59;case 21515:return n.tty?0:-59;default:return-28}}catch(E){if(typeof l>"u"||E.name!=="ErrnoError")throw E;return-E.errno}}function vn(e,t){try{return e=ue.getStr(e),ue.writeStat(t,l.lstat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function wn(e,t,i){try{return t=ue.getStr(t),t=ue.calculateAt(e,t),l.mkdir(t,i,0),0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}function Sn(e,t,i,n){try{t=ue.getStr(t);var r=n&256,o=n&4096;return n=n&-6401,t=ue.calculateAt(e,t,o),ue.writeStat(i,r?l.lstat(t):l.stat(t))}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return-g.errno}}function An(e,t,i,n){ue.varargs=n;try{t=ue.getStr(t),t=ue.calculateAt(e,t);var r=n?nt():0;return l.open(t,i,r).fd}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return-o.errno}}function En(e,t,i,n){try{if(t=ue.getStr(t),t=ue.calculateAt(e,t),n<=0)return-28;var r=l.readlink(t),o=Math.min(n,tt(r)),g=Ae[i+o];return Ne(r,i,n+1),Ae[i+o]=g,o}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function In(e){try{return e=ue.getStr(e),l.rmdir(e),0}catch(t){if(typeof l>"u"||t.name!=="ErrnoError")throw t;return-t.errno}}function kn(e,t){try{return e=ue.getStr(e),ue.writeStat(t,l.stat(e))}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return-i.errno}}function xn(e,t,i){try{if(t=ue.getStr(t),t=ue.calculateAt(e,t),!i)l.unlink(t);else if(i===512)l.rmdir(t);else return-28;return 0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return-n.errno}}var Ot=e=>be[e>>2]+se[e+4>>2]*4294967296;function Tn(e,t,i,n){try{t=ue.getStr(t),t=ue.calculateAt(e,t,!0);var r=Date.now(),o,g;if(!i)o=r,g=r;else{var y=Ot(i),L=se[i+8>>2];L==1073741823?o=r:L==1073741822?o=null:o=y*1e3+L/1e6,i+=16,y=Ot(i),L=se[i+8>>2],L==1073741823?g=r:L==1073741822?g=null:g=y*1e3+L/1e6}return(g??o)!==null&&l.utime(t,o,g),0}catch(D){if(typeof l>"u"||D.name!=="ErrnoError")throw D;return-D.errno}}var Fn=()=>vt(""),On=e=>e%4===0&&(e%100!==0||e%400===0),Pn=[0,31,60,91,121,152,182,213,244,274,305,335],Ln=[0,31,59,90,120,151,181,212,243,273,304,334],Cn=e=>{var t=On(e.getFullYear()),i=t?Pn:Ln,n=i[e.getMonth()]+e.getDate()-1;return n};function Dn(e,t){e=Ge(e);var i=new Date(e*1e3);se[t>>2]=i.getSeconds(),se[t+4>>2]=i.getMinutes(),se[t+8>>2]=i.getHours(),se[t+12>>2]=i.getDate(),se[t+16>>2]=i.getMonth(),se[t+20>>2]=i.getFullYear()-1900,se[t+24>>2]=i.getDay();var n=Cn(i)|0;se[t+28>>2]=n,se[t+36>>2]=-(i.getTimezoneOffset()*60);var r=new Date(i.getFullYear(),0,1),o=new Date(i.getFullYear(),6,1).getTimezoneOffset(),g=r.getTimezoneOffset(),y=(o!=g&&i.getTimezoneOffset()==Math.min(g,o))|0;se[t+32>>2]=y}function Rn(e,t,i,n,r,o,g){r=Ge(r);try{var y=ue.getStreamFromFD(n),L=l.mmap(y,e,r,t,i),D=L.ptr;return se[o>>2]=L.allocated,be[g>>2]=D,0}catch(z){if(typeof l>"u"||z.name!=="ErrnoError")throw z;return-z.errno}}function Nn(e,t,i,n,r,o){o=Ge(o);try{var g=ue.getStreamFromFD(r);i&2&&ue.doMsync(e,g,t,n,o)}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}var Mn=(e,t,i,n)=>{var r=new Date().getFullYear(),o=new Date(r,0,1),g=new Date(r,6,1),y=o.getTimezoneOffset(),L=g.getTimezoneOffset(),D=Math.max(y,L);be[e>>2]=D*60,se[t>>2]=+(y!=L);var z=E=>{var U=E>=0?"-":"+",h=Math.abs(E),m=String(Math.floor(h/60)).padStart(2,"0"),k=String(h%60).padStart(2,"0");return`UTC${U}${m}${k}`},G=z(y),O=z(L);L<y?(Ne(G,i,17),Ne(O,n,17)):(Ne(G,n,17),Ne(O,i,17))},Pt=()=>performance.now(),Lt=()=>Date.now(),jn=e=>e>=0&&e<=3;function Bn(e,t,i){if(!jn(e))return 28;var n;e===0?n=Lt():n=Pt();var r=Math.round(n*1e3*1e3);return xe[i>>3]=BigInt(r),0}var Un=()=>2147483648,zn=e=>{var t=Ce.buffer,i=(e-t.byteLength+65535)/65536|0;try{return Ce.grow(i),bt(),1}catch{}},Qn=e=>{var t=Le.length;e>>>=0;var i=Un();if(e>i)return!1;for(var n=1;n<=4;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var o=Math.min(i,xt(Math.max(e,r),65536)),g=zn(o);if(g)return!0}return!1},pt={},Wn=()=>Fe||"./this.program",$e=()=>{if(!$e.strings){var e=(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Wn()};for(var i in pt)pt[i]===void 0?delete t[i]:t[i]=pt[i];var n=[];for(var i in t)n.push(`${i}=${t[i]}`);$e.strings=n}return $e.strings},Hn=(e,t)=>{var i=0,n=0;for(var r of $e()){var o=t+i;be[e+n>>2]=o,i+=Ne(r,o,1/0)+1,n+=4}return 0},Vn=(e,t)=>{var i=$e();be[e>>2]=i.length;var n=0;for(var r of i)n+=tt(r)+1;return be[t>>2]=n,0},Gn=0,$n=()=>Et||Gn>0,Kn=e=>{var t;$n()||((t=_.onExit)==null||t.call(_,e),lt=!0),je(e,new Xt(e))},Jn=(e,t)=>{Kn(e)},Xn=Jn;function Yn(e){try{var t=ue.getStreamFromFD(e);return l.close(t),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return i.errno}}function Zn(e,t){try{var i=0,n=0,r=0,o=ue.getStreamFromFD(e),g=o.tty?2:l.isDir(o.mode)?3:l.isLink(o.mode)?7:4;return Ae[t]=g,We[t+2>>1]=r,xe[t+8>>3]=BigInt(i),xe[t+16>>3]=BigInt(n),0}catch(y){if(typeof l>"u"||y.name!=="ErrnoError")throw y;return y.errno}}var er=(e,t,i,n)=>{for(var r=0,o=0;o<i;o++){var g=be[t>>2],y=be[t+4>>2];t+=8;var L=l.read(e,Ae,g,y,n);if(L<0)return-1;if(r+=L,L<y)break}return r};function tr(e,t,i,n){try{var r=ue.getStreamFromFD(e),o=er(r,t,i);return be[n>>2]=o,0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function nr(e,t,i,n){t=Ge(t);try{if(isNaN(t))return 61;var r=ue.getStreamFromFD(e);return l.llseek(r,t,i),xe[n>>3]=BigInt(r.position),r.getdents&&t===0&&i===0&&(r.getdents=null),0}catch(o){if(typeof l>"u"||o.name!=="ErrnoError")throw o;return o.errno}}function rr(e){var i;try{var t=ue.getStreamFromFD(e);return(i=t.stream_ops)!=null&&i.fsync?t.stream_ops.fsync(t):0}catch(n){if(typeof l>"u"||n.name!=="ErrnoError")throw n;return n.errno}}var ir=(e,t,i,n)=>{for(var r=0,o=0;o<i;o++){var g=be[t>>2],y=be[t+4>>2];t+=8;var L=l.write(e,Ae,g,y,n);if(L<0)return-1;if(r+=L,L<y)break}return r};function sr(e,t,i,n){try{var r=ue.getStreamFromFD(e),o=ir(r,t,i);return be[n>>2]=o,0}catch(g){if(typeof l>"u"||g.name!=="ErrnoError")throw g;return g.errno}}function or(e,t){try{return _t(Le.subarray(e,e+t)),0}catch(i){if(typeof l>"u"||i.name!=="ErrnoError")throw i;return i.errno}}l.createPreloadedFile=ln,l.staticInit(),ne.doesNotExistError=new l.ErrnoError(44),ne.doesNotExistError.stack="<generic error, no stack>",Bt(),_.noExitRuntime&&(Et=_.noExitRuntime),_.preloadPlugins&&(Ft=_.preloadPlugins),_.print&&(Ye=_.print),_.printErr&&(Pe=_.printErr),_.wasmBinary&&(Qe=_.wasmBinary),_.arguments&&_.arguments,_.thisProgram&&(Fe=_.thisProgram),_.wasmMemory=Ce;var Ct;function lr(e){_._sqlite3_status64=e.sqlite3_status64,_._sqlite3_status=e.sqlite3_status,_._sqlite3_db_status=e.sqlite3_db_status,_._sqlite3_msize=e.sqlite3_msize,_._sqlite3_vfs_find=e.sqlite3_vfs_find,_._sqlite3_initialize=e.sqlite3_initialize,_._sqlite3_malloc=e.sqlite3_malloc,_._sqlite3_free=e.sqlite3_free,_._sqlite3_vfs_register=e.sqlite3_vfs_register,_._sqlite3_randomness=e.sqlite3_randomness,_._sqlite3mc_vfs_create=e.sqlite3mc_vfs_create,_._sqlite3_vfs_unregister=e.sqlite3_vfs_unregister,_._sqlite3_malloc64=e.sqlite3_malloc64,_._sqlite3_realloc=e.sqlite3_realloc,_._sqlite3_realloc64=e.sqlite3_realloc64,_._sqlite3_value_text=e.sqlite3_value_text,_._sqlite3_stricmp=e.sqlite3_stricmp,_._sqlite3_strnicmp=e.sqlite3_strnicmp,_._sqlite3_uri_parameter=e.sqlite3_uri_parameter,_._sqlite3_uri_boolean=e.sqlite3_uri_boolean,_._sqlite3_serialize=e.sqlite3_serialize,_._sqlite3_prepare_v2=e.sqlite3_prepare_v2,_._sqlite3_step=e.sqlite3_step,_._sqlite3_column_int64=e.sqlite3_column_int64,_._sqlite3_reset=e.sqlite3_reset,_._sqlite3_exec=e.sqlite3_exec,_._sqlite3_column_int=e.sqlite3_column_int,_._sqlite3_finalize=e.sqlite3_finalize,_._sqlite3_file_control=e.sqlite3_file_control,_._sqlite3_column_name=e.sqlite3_column_name,_._sqlite3_column_text=e.sqlite3_column_text,_._sqlite3_column_type=e.sqlite3_column_type,_._sqlite3_errmsg=e.sqlite3_errmsg,_._sqlite3_deserialize=e.sqlite3_deserialize,_._sqlite3_clear_bindings=e.sqlite3_clear_bindings,_._sqlite3_value_blob=e.sqlite3_value_blob,_._sqlite3_value_bytes=e.sqlite3_value_bytes,_._sqlite3_value_double=e.sqlite3_value_double,_._sqlite3_value_int=e.sqlite3_value_int,_._sqlite3_value_int64=e.sqlite3_value_int64,_._sqlite3_value_subtype=e.sqlite3_value_subtype,_._sqlite3_value_pointer=e.sqlite3_value_pointer,_._sqlite3_value_type=e.sqlite3_value_type,_._sqlite3_value_nochange=e.sqlite3_value_nochange,_._sqlite3_value_frombind=e.sqlite3_value_frombind,_._sqlite3_value_dup=e.sqlite3_value_dup,_._sqlite3_value_free=e.sqlite3_value_free,_._sqlite3_result_blob=e.sqlite3_result_blob,_._sqlite3_result_error_toobig=e.sqlite3_result_error_toobig,_._sqlite3_result_error_nomem=e.sqlite3_result_error_nomem,_._sqlite3_result_double=e.sqlite3_result_double,_._sqlite3_result_error=e.sqlite3_result_error,_._sqlite3_result_int=e.sqlite3_result_int,_._sqlite3_result_int64=e.sqlite3_result_int64,_._sqlite3_result_null=e.sqlite3_result_null,_._sqlite3_result_pointer=e.sqlite3_result_pointer,_._sqlite3_result_subtype=e.sqlite3_result_subtype,_._sqlite3_result_text=e.sqlite3_result_text,_._sqlite3_result_zeroblob=e.sqlite3_result_zeroblob,_._sqlite3_result_zeroblob64=e.sqlite3_result_zeroblob64,_._sqlite3_result_error_code=e.sqlite3_result_error_code,_._sqlite3_user_data=e.sqlite3_user_data,_._sqlite3_context_db_handle=e.sqlite3_context_db_handle,_._sqlite3_vtab_nochange=e.sqlite3_vtab_nochange,_._sqlite3_vtab_in_first=e.sqlite3_vtab_in_first,_._sqlite3_vtab_in_next=e.sqlite3_vtab_in_next,_._sqlite3_aggregate_context=e.sqlite3_aggregate_context,_._sqlite3_get_auxdata=e.sqlite3_get_auxdata,_._sqlite3_set_auxdata=e.sqlite3_set_auxdata,_._sqlite3_column_count=e.sqlite3_column_count,_._sqlite3_data_count=e.sqlite3_data_count,_._sqlite3_column_blob=e.sqlite3_column_blob,_._sqlite3_column_bytes=e.sqlite3_column_bytes,_._sqlite3_column_double=e.sqlite3_column_double,_._sqlite3_column_value=e.sqlite3_column_value,_._sqlite3_column_decltype=e.sqlite3_column_decltype,_._sqlite3_bind_blob=e.sqlite3_bind_blob,_._sqlite3_bind_double=e.sqlite3_bind_double,_._sqlite3_bind_int=e.sqlite3_bind_int,_._sqlite3_bind_int64=e.sqlite3_bind_int64,_._sqlite3_bind_null=e.sqlite3_bind_null,_._sqlite3_bind_pointer=e.sqlite3_bind_pointer,_._sqlite3_bind_text=e.sqlite3_bind_text,_._sqlite3_bind_parameter_count=e.sqlite3_bind_parameter_count,_._sqlite3_bind_parameter_name=e.sqlite3_bind_parameter_name,_._sqlite3_bind_parameter_index=e.sqlite3_bind_parameter_index,_._sqlite3_db_handle=e.sqlite3_db_handle,_._sqlite3_stmt_readonly=e.sqlite3_stmt_readonly,_._sqlite3_stmt_isexplain=e.sqlite3_stmt_isexplain,_._sqlite3_stmt_explain=e.sqlite3_stmt_explain,_._sqlite3_stmt_busy=e.sqlite3_stmt_busy,_._sqlite3_stmt_status=e.sqlite3_stmt_status,_._sqlite3_sql=e.sqlite3_sql,_._sqlite3_expanded_sql=e.sqlite3_expanded_sql,_._sqlite3_preupdate_old=e.sqlite3_preupdate_old,_._sqlite3_preupdate_count=e.sqlite3_preupdate_count,_._sqlite3_preupdate_depth=e.sqlite3_preupdate_depth,_._sqlite3_preupdate_blobwrite=e.sqlite3_preupdate_blobwrite,_._sqlite3_preupdate_new=e.sqlite3_preupdate_new,_._sqlite3_value_numeric_type=e.sqlite3_value_numeric_type,_._sqlite3_set_authorizer=e.sqlite3_set_authorizer,_._sqlite3_strglob=e.sqlite3_strglob,_._sqlite3_strlike=e.sqlite3_strlike,_._sqlite3_auto_extension=e.sqlite3_auto_extension,_._sqlite3_cancel_auto_extension=e.sqlite3_cancel_auto_extension,_._sqlite3_reset_auto_extension=e.sqlite3_reset_auto_extension,_._sqlite3_prepare_v3=e.sqlite3_prepare_v3,_._sqlite3_create_module=e.sqlite3_create_module,_._sqlite3_create_module_v2=e.sqlite3_create_module_v2,_._sqlite3_drop_modules=e.sqlite3_drop_modules,_._sqlite3_declare_vtab=e.sqlite3_declare_vtab,_._sqlite3_vtab_on_conflict=e.sqlite3_vtab_on_conflict,_._sqlite3_vtab_collation=e.sqlite3_vtab_collation,_._sqlite3_vtab_in=e.sqlite3_vtab_in,_._sqlite3_vtab_rhs_value=e.sqlite3_vtab_rhs_value,_._sqlite3_vtab_distinct=e.sqlite3_vtab_distinct,_._sqlite3_keyword_name=e.sqlite3_keyword_name,_._sqlite3_keyword_count=e.sqlite3_keyword_count,_._sqlite3_keyword_check=e.sqlite3_keyword_check,_._sqlite3_complete=e.sqlite3_complete,_._sqlite3_libversion=e.sqlite3_libversion,_._sqlite3_libversion_number=e.sqlite3_libversion_number,_._sqlite3_shutdown=e.sqlite3_shutdown,_._sqlite3mc_vfs_shutdown=e.sqlite3mc_vfs_shutdown,_._sqlite3_last_insert_rowid=e.sqlite3_last_insert_rowid,_._sqlite3_set_last_insert_rowid=e.sqlite3_set_last_insert_rowid,_._sqlite3_changes64=e.sqlite3_changes64,_._sqlite3_changes=e.sqlite3_changes,_._sqlite3_total_changes64=e.sqlite3_total_changes64,_._sqlite3_total_changes=e.sqlite3_total_changes,_._sqlite3_txn_state=e.sqlite3_txn_state,_._sqlite3_close_v2=e.sqlite3_close_v2,_._sqlite3_busy_handler=e.sqlite3_busy_handler,_._sqlite3_progress_handler=e.sqlite3_progress_handler,_._sqlite3_busy_timeout=e.sqlite3_busy_timeout,_._sqlite3_interrupt=e.sqlite3_interrupt,_._sqlite3_is_interrupted=e.sqlite3_is_interrupted,_._sqlite3_create_function=e.sqlite3_create_function,_._sqlite3_create_function_v2=e.sqlite3_create_function_v2,_._sqlite3_create_window_function=e.sqlite3_create_window_function,_._sqlite3_overload_function=e.sqlite3_overload_function,_._sqlite3_trace_v2=e.sqlite3_trace_v2,_._sqlite3_commit_hook=e.sqlite3_commit_hook,_._sqlite3_update_hook=e.sqlite3_update_hook,_._sqlite3_rollback_hook=e.sqlite3_rollback_hook,_._sqlite3_preupdate_hook=e.sqlite3_preupdate_hook,_._sqlite3_error_offset=e.sqlite3_error_offset,_._sqlite3_errcode=e.sqlite3_errcode,_._sqlite3_extended_errcode=e.sqlite3_extended_errcode,_._sqlite3_errstr=e.sqlite3_errstr,_._sqlite3_limit=e.sqlite3_limit,_._sqlite3_open=e.sqlite3_open,_._sqlite3_open_v2=e.sqlite3_open_v2,_._sqlite3_create_collation=e.sqlite3_create_collation,_._sqlite3_create_collation_v2=e.sqlite3_create_collation_v2,_._sqlite3_collation_needed=e.sqlite3_collation_needed,_._sqlite3_get_autocommit=e.sqlite3_get_autocommit,_._sqlite3_table_column_metadata=e.sqlite3_table_column_metadata,_._sqlite3_extended_result_codes=e.sqlite3_extended_result_codes,_._sqlite3_uri_key=e.sqlite3_uri_key,_._sqlite3_uri_int64=e.sqlite3_uri_int64,_._sqlite3_db_name=e.sqlite3_db_name,_._sqlite3_db_filename=e.sqlite3_db_filename,_._sqlite3_db_readonly=e.sqlite3_db_readonly,_._sqlite3_compileoption_used=e.sqlite3_compileoption_used,_._sqlite3_compileoption_get=e.sqlite3_compileoption_get,_._sqlite3session_diff=e.sqlite3session_diff,_._sqlite3session_attach=e.sqlite3session_attach,_._sqlite3session_create=e.sqlite3session_create,_._sqlite3session_delete=e.sqlite3session_delete,_._sqlite3session_table_filter=e.sqlite3session_table_filter,_._sqlite3session_changeset=e.sqlite3session_changeset,_._sqlite3session_changeset_strm=e.sqlite3session_changeset_strm,_._sqlite3session_patchset_strm=e.sqlite3session_patchset_strm,_._sqlite3session_patchset=e.sqlite3session_patchset,_._sqlite3session_enable=e.sqlite3session_enable,_._sqlite3session_indirect=e.sqlite3session_indirect,_._sqlite3session_isempty=e.sqlite3session_isempty,_._sqlite3session_memory_used=e.sqlite3session_memory_used,_._sqlite3session_object_config=e.sqlite3session_object_config,_._sqlite3session_changeset_size=e.sqlite3session_changeset_size,_._sqlite3changeset_start=e.sqlite3changeset_start,_._sqlite3changeset_start_v2=e.sqlite3changeset_start_v2,_._sqlite3changeset_start_strm=e.sqlite3changeset_start_strm,_._sqlite3changeset_start_v2_strm=e.sqlite3changeset_start_v2_strm,_._sqlite3changeset_next=e.sqlite3changeset_next,_._sqlite3changeset_op=e.sqlite3changeset_op,_._sqlite3changeset_pk=e.sqlite3changeset_pk,_._sqlite3changeset_old=e.sqlite3changeset_old,_._sqlite3changeset_new=e.sqlite3changeset_new,_._sqlite3changeset_conflict=e.sqlite3changeset_conflict,_._sqlite3changeset_fk_conflicts=e.sqlite3changeset_fk_conflicts,_._sqlite3changeset_finalize=e.sqlite3changeset_finalize,_._sqlite3changeset_invert=e.sqlite3changeset_invert,_._sqlite3changeset_invert_strm=e.sqlite3changeset_invert_strm,_._sqlite3changeset_apply_v2=e.sqlite3changeset_apply_v2,_._sqlite3changeset_apply=e.sqlite3changeset_apply,_._sqlite3changeset_apply_v2_strm=e.sqlite3changeset_apply_v2_strm,_._sqlite3changeset_apply_strm=e.sqlite3changeset_apply_strm,_._sqlite3changegroup_new=e.sqlite3changegroup_new,_._sqlite3changegroup_add=e.sqlite3changegroup_add,_._sqlite3changegroup_output=e.sqlite3changegroup_output,_._sqlite3changegroup_add_strm=e.sqlite3changegroup_add_strm,_._sqlite3changegroup_output_strm=e.sqlite3changegroup_output_strm,_._sqlite3changegroup_delete=e.sqlite3changegroup_delete,_._sqlite3changeset_concat=e.sqlite3changeset_concat,_._sqlite3changeset_concat_strm=e.sqlite3changeset_concat_strm,_._sqlite3session_config=e.sqlite3session_config,_._sqlite3_sourceid=e.sqlite3_sourceid,_._sqlite3mc_version=e.sqlite3mc_version,_._sqlite3mc_config=e.sqlite3mc_config,_._sqlite3mc_cipher_count=e.sqlite3mc_cipher_count,_._sqlite3mc_cipher_index=e.sqlite3mc_cipher_index,_._sqlite3mc_cipher_name=e.sqlite3mc_cipher_name,_._sqlite3mc_config_cipher=e.sqlite3mc_config_cipher,_._sqlite3mc_codec_data=e.sqlite3mc_codec_data,_._sqlite3_activate_see=e.sqlite3_activate_see,_._sqlite3_key=e.sqlite3_key,_._sqlite3_key_v2=e.sqlite3_key_v2,_._sqlite3_rekey_v2=e.sqlite3_rekey_v2,_._sqlite3_rekey=e.sqlite3_rekey,_._sqlite3mc_vfs_destroy=e.sqlite3mc_vfs_destroy,_._sqlite3__wasm_pstack_ptr=e.sqlite3__wasm_pstack_ptr,_._sqlite3__wasm_pstack_restore=e.sqlite3__wasm_pstack_restore,_._sqlite3__wasm_pstack_alloc=e.sqlite3__wasm_pstack_alloc,_._sqlite3__wasm_pstack_remaining=e.sqlite3__wasm_pstack_remaining,_._sqlite3__wasm_pstack_quota=e.sqlite3__wasm_pstack_quota,_._sqlite3__wasm_db_error=e.sqlite3__wasm_db_error,_._sqlite3__wasm_test_struct=e.sqlite3__wasm_test_struct,_._sqlite3__wasm_enum_json=e.sqlite3__wasm_enum_json,_._sqlite3__wasm_vfs_unlink=e.sqlite3__wasm_vfs_unlink,_._sqlite3__wasm_db_vfs=e.sqlite3__wasm_db_vfs,_._sqlite3__wasm_db_reset=e.sqlite3__wasm_db_reset,_._sqlite3__wasm_db_export_chunked=e.sqlite3__wasm_db_export_chunked,_._sqlite3__wasm_db_serialize=e.sqlite3__wasm_db_serialize,_._sqlite3__wasm_vfs_create_file=e.sqlite3__wasm_vfs_create_file,_._sqlite3__wasm_posix_create_file=e.sqlite3__wasm_posix_create_file,_._sqlite3__wasm_kvvfsMakeKeyOnPstack=e.sqlite3__wasm_kvvfsMakeKeyOnPstack,_._sqlite3__wasm_kvvfs_methods=e.sqlite3__wasm_kvvfs_methods,_._sqlite3__wasm_vtab_config=e.sqlite3__wasm_vtab_config,_._sqlite3__wasm_db_config_ip=e.sqlite3__wasm_db_config_ip,_._sqlite3__wasm_db_config_pii=e.sqlite3__wasm_db_config_pii,_._sqlite3__wasm_db_config_s=e.sqlite3__wasm_db_config_s,_._sqlite3__wasm_config_i=e.sqlite3__wasm_config_i,_._sqlite3__wasm_config_ii=e.sqlite3__wasm_config_ii,_._sqlite3__wasm_config_j=e.sqlite3__wasm_config_j,_._sqlite3__wasm_qfmt_token=e.sqlite3__wasm_qfmt_token,_._sqlite3__wasm_init_wasmfs=e.sqlite3__wasm_init_wasmfs,_._sqlite3__wasm_test_intptr=e.sqlite3__wasm_test_intptr,_._sqlite3__wasm_test_voidptr=e.sqlite3__wasm_test_voidptr,_._sqlite3__wasm_test_int64_max=e.sqlite3__wasm_test_int64_max,_._sqlite3__wasm_test_int64_min=e.sqlite3__wasm_test_int64_min,_._sqlite3__wasm_test_int64_times2=e.sqlite3__wasm_test_int64_times2,_._sqlite3__wasm_test_int64_minmax=e.sqlite3__wasm_test_int64_minmax,_._sqlite3__wasm_test_int64ptr=e.sqlite3__wasm_test_int64ptr,_._sqlite3__wasm_test_stack_overflow=e.sqlite3__wasm_test_stack_overflow,_._sqlite3__wasm_test_str_hello=e.sqlite3__wasm_test_str_hello,_._sqlite3__wasm_SQLTester_strglob=e.sqlite3__wasm_SQLTester_strglob,_._malloc=e.malloc,_._free=e.free,_._realloc=e.realloc,Ct=e.emscripten_builtin_memalign,e._emscripten_stack_restore,e._emscripten_stack_alloc,e.emscripten_stack_get_current}var Dt={__syscall_chmod:_n,__syscall_faccessat:un,__syscall_fchmod:fn,__syscall_fchown32:dn,__syscall_fcntl64:pn,__syscall_fstat64:hn,__syscall_ftruncate64:yn,__syscall_getcwd:bn,__syscall_ioctl:qn,__syscall_lstat64:vn,__syscall_mkdirat:wn,__syscall_newfstatat:Sn,__syscall_openat:An,__syscall_readlinkat:En,__syscall_rmdir:In,__syscall_stat64:kn,__syscall_unlinkat:xn,__syscall_utimensat:Tn,_abort_js:Fn,_localtime_js:Dn,_mmap_js:Rn,_munmap_js:Nn,_tzset_js:Mn,clock_time_get:Bn,emscripten_date_now:Lt,emscripten_get_now:Pt,emscripten_resize_heap:Qn,environ_get:Hn,environ_sizes_get:Vn,exit:Xn,fd_close:Yn,fd_fdstat_get:Zn,fd_read:tr,fd_seek:nr,fd_sync:rr,fd_write:sr,memory:Ce,random_get:or},ze=await Jt();function ht(){if(De>0){He=ht;return}if(Ut(),De>0){He=ht;return}function e(){var t;_.calledRun=!0,!lt&&(zt(),Ze==null||Ze(_),(t=_.onRuntimeInitialized)==null||t.call(_),Qt())}_.setStatus?(_.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>_.setStatus(""),1),e()},1)):e()}function ar(){if(_.preInit)for(typeof _.preInit=="function"&&(_.preInit=[_.preInit]);_.preInit.length>0;)_.preInit.shift()()}return ar(),ht(),_.runSQLite3PostLoadInit=function(e){if(globalThis.sqlite3ApiBootstrap=function t(i=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return(t.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const n=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof _<"u"&&_.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},i||{});Object.assign(n,{allocExportName:n.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:n.useStdAlloc?"free":"sqlite3_free",reallocExportName:n.useStdAlloc?"realloc":"sqlite3_realloc"},n),["exports","memory","wasmfsOpfsDir"].forEach(s=>{typeof n[s]=="function"&&(n[s]=n[s]())}),delete globalThis.sqlite3ApiConfig,delete t.defaultConfig;const r=Object.create(null),o=Object.create(null),g=s=>r.sqlite3_js_rc_str&&r.sqlite3_js_rc_str(s)||"Unknown result code #"+s,y=s=>typeof s=="number"&&s===(s|0);class L extends Error{constructor(...a){let d;if(a.length)if(y(a[0]))if(d=a[0],a.length===1)super(g(a[0]));else{const u=g(d);typeof a[1]=="object"?super(u,a[1]):(a[0]=u+":",super(a.join(" ")))}else a.length===2&&typeof a[1]=="object"?super(...a):super(a.join(" "));this.resultCode=d||r.SQLITE_ERROR,this.name="SQLite3Error"}}L.toss=(...s)=>{throw new L(...s)};const D=L.toss;n.wasmfsOpfsDir&&!/^\/[^/]+$/.test(n.wasmfsOpfsDir)&&D("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const z=s=>typeof s!="bigint"&&s===(s|0)&&s<=2147483647&&s>=-2147483648,G=function s(a){return s._max||(s._max=BigInt("0x7fffffffffffffff"),s._min=~s._max),a>=s._min&&a<=s._max},O=s=>s>=-0x7fffffffn-1n&&s<=0x7fffffffn,E=function s(a){return s._min||(s._min=Number.MIN_SAFE_INTEGER,s._max=Number.MAX_SAFE_INTEGER),a>=s._min&&a<=s._max},U=s=>s&&s.constructor&&z(s.constructor.BYTES_PER_ELEMENT)?s:!1,h=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,m=s=>s.buffer instanceof h,k=(s,a,d)=>m(s)?s.slice(a,d):s.subarray(a,d),x=s=>s&&(s instanceof Uint8Array||s instanceof Int8Array||s instanceof ArrayBuffer),C=s=>s&&(s instanceof Uint8Array||s instanceof Int8Array||s instanceof ArrayBuffer),w=s=>x(s)||D("Value is not of a supported TypedArray type."),j=new TextDecoder("utf-8"),M=function(s,a,d){return j.decode(k(s,a,d))},c=function(s){return C(s)?M(s instanceof ArrayBuffer?new Uint8Array(s):s):Array.isArray(s)?s.join(""):(o.isPtr(s)&&(s=o.cstrToJs(s)),s)};class p extends Error{constructor(...a){a.length===2&&typeof a[1]=="object"?super(...a):a.length?super(a.join(" ")):super("Allocation failed."),this.resultCode=r.SQLITE_NOMEM,this.name="WasmAllocError"}}p.toss=(...s)=>{throw new p(...s)},Object.assign(r,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(s,a,d,u,A,W,X,oe,te)=>{},sqlite3_create_function:(s,a,d,u,A,W,X,oe)=>{},sqlite3_create_window_function:(s,a,d,u,A,W,X,oe,te,le)=>{},sqlite3_prepare_v3:(s,a,d,u,A,W)=>{},sqlite3_prepare_v2:(s,a,d,u,A)=>{},sqlite3_exec:(s,a,d,u,A)=>{},sqlite3_randomness:(s,a)=>{}});const b={affirmBindableTypedArray:w,flexibleString:c,bigIntFits32:O,bigIntFits64:G,bigIntFitsDouble:E,isBindableTypedArray:x,isInt32:z,isSQLableTypedArray:C,isTypedArray:U,typedArrayToString:M,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:m,toss:function(...s){throw new Error(s.join(" "))},toss3:D,typedArrayPart:k,affirmDbHeader:function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a="SQLite format 3";a.length>s.byteLength&&D("Input does not contain an SQLite3 database header.");for(let d=0;d<a.length;++d)a.charCodeAt(d)!==s[d]&&D("Input does not contain an SQLite3 database header.")},affirmIsDb:function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a=s.byteLength;(a<512||a%512!==0)&&D("Byte array size",a,"is invalid for an SQLite3 db."),b.affirmDbHeader(s)}};Object.assign(o,{ptrSizeof:n.wasmPtrSizeof||4,ptrIR:n.wasmPtrIR||"i32",bigIntEnabled:!!n.bigIntEnabled,exports:n.exports||D("Missing API config.exports (WASM module exports)."),memory:n.memory||n.exports.memory||D("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),o.allocFromTypedArray=function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s)),w(s);const a=o.alloc(s.byteLength||1);return o.heapForSize(s.constructor).set(s.byteLength?s:[0],a),a};{const s=n.allocExportName,a=n.deallocExportName,d=n.reallocExportName;for(const u of[s,a,d])o.exports[u]instanceof Function||D("Missing required exports[",u,"] function.");o.alloc=function u(A){return u.impl(A)||p.toss("Failed to allocate",A," bytes.")},o.alloc.impl=o.exports[s],o.realloc=function u(A,W){const X=u.impl(A,W);return W?X||p.toss("Failed to reallocate",W," bytes."):0},o.realloc.impl=o.exports[d],o.dealloc=o.exports[a]}o.compileOptionUsed=function s(a){if(arguments.length){if(Array.isArray(a)){const d={};return a.forEach(u=>{d[u]=r.sqlite3_compileoption_used(u)}),d}else if(typeof a=="object")return Object.keys(a).forEach(d=>{a[d]=r.sqlite3_compileoption_used(d)}),a}else{if(s._result)return s._result;s._opt||(s._rx=/^([^=]+)=(.+)/,s._rxInt=/^-?\d+$/,s._opt=function(X,oe){const te=s._rx.exec(X);oe[0]=te?te[1]:X,oe[1]=te?s._rxInt.test(te[2])?+te[2]:te[2]:!0});const d={},u=[0,0];let A=0,W;for(;W=r.sqlite3_compileoption_get(A++);)s._opt(W,u),d[u[0]]=u[1];return s._result=d}return typeof a=="string"?!!r.sqlite3_compileoption_used(a):!1},o.pstack=Object.assign(Object.create(null),{restore:o.exports.sqlite3__wasm_pstack_restore,alloc:function(s){return typeof s=="string"&&!(s=o.sizeofIR(s))&&p.toss("Invalid value for pstack.alloc(",arguments[0],")"),o.exports.sqlite3__wasm_pstack_alloc(s)||p.toss("Could not allocate",s,"bytes from the pstack.")},allocChunks:function(s,a){typeof a=="string"&&!(a=o.sizeofIR(a))&&p.toss("Invalid size value for allocChunks(",arguments[1],")");const d=o.pstack.alloc(s*a),u=[];let A=0,W=0;for(;A<s;++A,W+=a)u.push(d+W);return u},allocPtr:(s=1,a=!0)=>s===1?o.pstack.alloc(a?8:o.ptrSizeof):o.pstack.allocChunks(s,a?8:o.ptrSizeof),call:function(s){const a=o.pstack.pointer;try{return s(Q)}finally{o.pstack.restore(a)}}}),Object.defineProperties(o.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:o.exports.sqlite3__wasm_pstack_remaining}}),r.sqlite3_randomness=(...s)=>{if(s.length===1&&b.isTypedArray(s[0])&&s[0].BYTES_PER_ELEMENT===1){const a=s[0];if(a.byteLength===0)return o.exports.sqlite3_randomness(0,0),a;const d=o.pstack.pointer;try{let u=a.byteLength,A=0;const W=o.exports.sqlite3_randomness,X=o.heap8u(),oe=u<512?u:512,te=o.pstack.alloc(oe);do{const le=u>oe?oe:u;W(le,te),a.set(k(X,te,te+le),A),u-=le,A+=le}while(u>0)}catch(u){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",u)}finally{o.pstack.restore(d)}return a}o.exports.sqlite3_randomness(...s)};let B;if(r.sqlite3_wasmfs_opfs_dir=function(){if(B!==void 0)return B;const s=n.wasmfsOpfsDir;if(!s||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return B="";try{return s&&o.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],s)===0?B=s:B=""}catch{return B=""}},r.sqlite3_wasmfs_filename_is_persistent=function(s){const a=r.sqlite3_wasmfs_opfs_dir();return a&&s?s.startsWith(a+"/"):!1},r.sqlite3_js_db_uses_vfs=function(s,a,d=0){try{const u=r.sqlite3_vfs_find(a);return u?s?u===r.sqlite3_js_db_vfs(s,d)?u:!1:u===r.sqlite3_vfs_find(0)?u:!1:!1}catch{return!1}},r.sqlite3_js_vfs_list=function(){const s=[];let a=r.sqlite3_vfs_find(0);for(;a;){const d=new r.sqlite3_vfs(a);s.push(o.cstrToJs(d.$zName)),a=d.$pNext,d.dispose()}return s},r.sqlite3_js_db_export=function(s,a=0){s=o.xWrap.testConvertArg("sqlite3*",s),s||D("Invalid sqlite3* argument."),o.bigIntEnabled||D("BigInt64 support is not enabled.");const d=o.scopedAllocPush();let u;try{const A=o.scopedAlloc(8+o.ptrSizeof),W=A+8,X=a?o.isPtr(a)?a:o.scopedAllocCString(""+a):0;let oe=o.exports.sqlite3__wasm_db_serialize(s,X,W,A,0);oe&&D("Database serialization failed with code",Q.capi.sqlite3_js_rc_str(oe)),u=o.peekPtr(W);const te=o.peek(A,"i64");return oe=te?o.heap8u().slice(u,u+Number(te)):new Uint8Array,oe}finally{u&&o.exports.sqlite3_free(u),o.scopedAllocPop(d)}},r.sqlite3_js_db_vfs=(s,a=0)=>b.sqlite3__wasm_db_vfs(s,a),r.sqlite3_js_aggregate_context=(s,a)=>r.sqlite3_aggregate_context(s,a)||(a?p.toss("Cannot allocate",a,"bytes for sqlite3_aggregate_context()"):0),r.sqlite3_js_posix_create_file=function(s,a,d){let u;a&&o.isPtr(a)?u=a:a instanceof ArrayBuffer||a instanceof Uint8Array?(u=o.allocFromTypedArray(a),(arguments.length<3||!b.isInt32(d)||d<0)&&(d=a.byteLength)):L.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!b.isInt32(d)||d<0)&&L.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const A=b.sqlite3__wasm_posix_create_file(s,u,d);A&&L.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(A))}finally{o.dealloc(u)}},r.sqlite3_js_vfs_create_file=function(s,a,d,u){n.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let A;d?(o.isPtr(d)?A=d:d instanceof ArrayBuffer&&(d=new Uint8Array(d)),d instanceof Uint8Array?(A=o.allocFromTypedArray(d),(arguments.length<4||!b.isInt32(u)||u<0)&&(u=d.byteLength)):L.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):A=0,(!b.isInt32(u)||u<0)&&(o.dealloc(A),L.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const W=b.sqlite3__wasm_vfs_create_file(s,a,A,u);W&&L.toss("Creation of file failed with sqlite3 result code",r.sqlite3_js_rc_str(W))}finally{o.dealloc(A)}},r.sqlite3_js_sql_to_string=s=>{if(typeof s=="string")return s;const a=c(v);return a===v?void 0:a},b.isUIThread()){const s=function(a){const d=Object.create(null);return d.prefix="kvvfs-"+a,d.stores=[],(a==="session"||a==="")&&d.stores.push(globalThis.sessionStorage),(a==="local"||a==="")&&d.stores.push(globalThis.localStorage),d};r.sqlite3_js_kvvfs_clear=function(a=""){let d=0;const u=s(a);return u.stores.forEach(A=>{const W=[];let X;for(X=0;X<A.length;++X){const oe=A.key(X);oe.startsWith(u.prefix)&&W.push(oe)}W.forEach(oe=>A.removeItem(oe)),d+=W.length}),d},r.sqlite3_js_kvvfs_size=function(a=""){let d=0;const u=s(a);return u.stores.forEach(A=>{let W;for(W=0;W<A.length;++W){const X=A.key(W);X.startsWith(u.prefix)&&(d+=X.length,d+=A.getItem(X).length)}}),d*2}}r.sqlite3_db_config=(function(s,a,...d){switch(a){case r.SQLITE_DBCONFIG_ENABLE_FKEY:case r.SQLITE_DBCONFIG_ENABLE_TRIGGER:case r.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case r.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case r.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case r.SQLITE_DBCONFIG_ENABLE_QPSG:case r.SQLITE_DBCONFIG_TRIGGER_EQP:case r.SQLITE_DBCONFIG_RESET_DATABASE:case r.SQLITE_DBCONFIG_DEFENSIVE:case r.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case r.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case r.SQLITE_DBCONFIG_DQS_DML:case r.SQLITE_DBCONFIG_DQS_DDL:case r.SQLITE_DBCONFIG_ENABLE_VIEW:case r.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case r.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case r.SQLITE_DBCONFIG_STMT_SCANSTATUS:case r.SQLITE_DBCONFIG_REVERSE_SCANORDER:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_CREATE:case r.SQLITE_DBCONFIG_ENABLE_ATTACH_WRITE:case r.SQLITE_DBCONFIG_ENABLE_COMMENTS:return this.ip||(this.ip=o.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),this.ip(s,a,d[0],d[1]||0);case r.SQLITE_DBCONFIG_LOOKASIDE:return this.pii||(this.pii=o.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"])),this.pii(s,a,d[0],d[1],d[2]);case r.SQLITE_DBCONFIG_MAINDBNAME:return this.s||(this.s=o.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"])),this.s(s,a,d[0]);default:return r.SQLITE_MISUSE}}).bind(Object.create(null)),r.sqlite3_value_to_js=function(s,a=!0){let d;const u=r.sqlite3_value_type(s);switch(u){case r.SQLITE_INTEGER:o.bigIntEnabled?(d=r.sqlite3_value_int64(s),b.bigIntFitsDouble(d)&&(d=Number(d))):d=r.sqlite3_value_double(s);break;case r.SQLITE_FLOAT:d=r.sqlite3_value_double(s);break;case r.SQLITE_TEXT:d=r.sqlite3_value_text(s);break;case r.SQLITE_BLOB:{const A=r.sqlite3_value_bytes(s),W=r.sqlite3_value_blob(s);A&&!W&&Q.WasmAllocError.toss("Cannot allocate memory for blob argument of",A,"byte(s)"),d=A?o.heap8u().slice(W,W+Number(A)):null;break}case r.SQLITE_NULL:d=null;break;default:a&&D(r.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",u),d=void 0}return d},r.sqlite3_values_to_js=function(s,a,d=!0){let u;const A=[];for(u=0;u<s;++u)A.push(r.sqlite3_value_to_js(o.peekPtr(a+o.ptrSizeof*u),d));return A},r.sqlite3_result_error_js=function(s,a){a instanceof p?r.sqlite3_result_error_nomem(s):r.sqlite3_result_error(s,""+a,-1)},r.sqlite3_result_js=function(s,a){if(a instanceof Error){r.sqlite3_result_error_js(s,a);return}try{switch(typeof a){case"undefined":break;case"boolean":r.sqlite3_result_int(s,a?1:0);break;case"bigint":b.bigIntFits32(a)?r.sqlite3_result_int(s,Number(a)):b.bigIntFitsDouble(a)?r.sqlite3_result_double(s,Number(a)):o.bigIntEnabled?b.bigIntFits64(a)?r.sqlite3_result_int64(s,a):D("BigInt value",a.toString(),"is too BigInt for int64."):D("BigInt value",a.toString(),"is too BigInt.");break;case"number":{let d;b.isInt32(a)?d=r.sqlite3_result_int:o.bigIntEnabled&&Number.isInteger(a)&&b.bigIntFits64(BigInt(a))?d=r.sqlite3_result_int64:d=r.sqlite3_result_double,d(s,a);break}case"string":{const[d,u]=o.allocCString(a,!0);r.sqlite3_result_text(s,d,u,r.SQLITE_WASM_DEALLOC);break}case"object":if(a===null){r.sqlite3_result_null(s);break}else if(b.isBindableTypedArray(a)){const d=o.allocFromTypedArray(a);r.sqlite3_result_blob(s,d,a.byteLength,r.SQLITE_WASM_DEALLOC);break}default:D("Don't not how to handle this UDF result value:",typeof a,a)}}catch(d){r.sqlite3_result_error_js(s,d)}},r.sqlite3_column_js=function(s,a,d=!0){const u=r.sqlite3_column_value(s,a);return u===0?void 0:r.sqlite3_value_to_js(u,d)};const P=(function(s,a,d){d=r[d],this.ptr?o.pokePtr(this.ptr,0):this.ptr=o.allocPtr();const u=d(s,a,this.ptr);if(u)return L.toss(u,arguments[2]+"() failed with code "+u);const A=o.peekPtr(this.ptr);return A?r.sqlite3_value_to_js(A,!0):void 0}).bind(Object.create(null));r.sqlite3_preupdate_new_js=(s,a)=>P(s,a,"sqlite3_preupdate_new"),r.sqlite3_preupdate_old_js=(s,a)=>P(s,a,"sqlite3_preupdate_old"),r.sqlite3changeset_new_js=(s,a)=>P(s,a,"sqlite3changeset_new"),r.sqlite3changeset_old_js=(s,a)=>P(s,a,"sqlite3changeset_old");const Q={WasmAllocError:p,SQLite3Error:L,capi:r,util:b,wasm:o,config:n,version:Object.create(null),client:void 0,asyncPostInit:async function s(){if(s.isReady instanceof Promise)return s.isReady;let a=t.initializersAsync;delete t.initializersAsync;const d=async()=>(Q.__isUnderTest||(delete Q.util,delete Q.StructBinder),Q),u=W=>{throw n.error("an async sqlite3 initializer failed:",W),W};if(!a||!a.length)return s.isReady=d().catch(u);a=a.map(W=>W instanceof Function?async X=>W(Q):W),a.push(d);let A=Promise.resolve(Q);for(;a.length;)A=A.then(a.shift());return s.isReady=A.catch(u)},scriptInfo:void 0};try{t.initializers.forEach(s=>{s(Q)})}catch(s){throw console.error("sqlite3 bootstrap initializer threw:",s),s}return delete t.initializers,t.sqlite3=Q,Q},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(t){t.bigIntEnabled===void 0&&(t.bigIntEnabled=!!globalThis.BigInt64Array);const i=(...c)=>{throw new Error(c.join(" "))};t.exports||Object.defineProperty(t,"exports",{enumerable:!0,configurable:!0,get:()=>t.instance&&t.instance.exports});const n=t.pointerIR||"i32",r=t.ptrSizeof=n==="i32"?4:n==="i64"?8:i("Unhandled ptrSizeof:",n),o=Object.create(null);o.heapSize=0,o.memory=null,o.freeFuncIndexes=[],o.scopedAlloc=[],o.utf8Decoder=new TextDecoder,o.utf8Encoder=new TextEncoder("utf-8"),t.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return r;default:return(""+c).endsWith("*")?r:void 0}};const g=function(){if(!o.memory)o.memory=t.memory instanceof WebAssembly.Memory?t.memory:t.exports.memory;else if(o.heapSize===o.memory.buffer.byteLength)return o;const c=o.memory.buffer;return o.HEAP8=new Int8Array(c),o.HEAP8U=new Uint8Array(c),o.HEAP16=new Int16Array(c),o.HEAP16U=new Uint16Array(c),o.HEAP32=new Int32Array(c),o.HEAP32U=new Uint32Array(c),t.bigIntEnabled&&(o.HEAP64=new BigInt64Array(c),o.HEAP64U=new BigUint64Array(c)),o.HEAP32F=new Float32Array(c),o.HEAP64F=new Float64Array(c),o.heapSize=c.byteLength,o};t.heap8=()=>g().HEAP8,t.heap8u=()=>g().HEAP8U,t.heap16=()=>g().HEAP16,t.heap16u=()=>g().HEAP16U,t.heap32=()=>g().HEAP32,t.heap32u=()=>g().HEAP32U,t.heapForSize=function(c,p=!0){const b=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:g();switch(c){case Int8Array:return b.HEAP8;case Uint8Array:return b.HEAP8U;case Int16Array:return b.HEAP16;case Uint16Array:return b.HEAP16U;case Int32Array:return b.HEAP32;case Uint32Array:return b.HEAP32U;case 8:return p?b.HEAP8U:b.HEAP8;case 16:return p?b.HEAP16U:b.HEAP16;case 32:return p?b.HEAP32U:b.HEAP32;case 64:if(b.HEAP64)return p?b.HEAP64U:b.HEAP64;break;default:if(t.bigIntEnabled){if(c===globalThis.BigUint64Array)return b.HEAP64U;if(c===globalThis.BigInt64Array)return b.HEAP64;break}}i("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},t.functionTable=function(){return t.exports.__indirect_function_table},t.functionEntry=function(c){const p=t.functionTable();return c<p.length?p.get(c):void 0},t.jsFuncToWasm=function c(p,b){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(Q,s,a){a<128?Q[s](a):Q[s](a%128|128,a>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(Q){const s=c._.rxJSig.exec(Q);return s?s[2]:Q.substr(1)},letterType:Q=>c._.sigTypes[Q]||i("Invalid signature letter:",Q),pushSigType:(Q,s)=>Q.push(c._.typeCodes[c._.letterType(s)])}),typeof p=="string"){const Q=b;b=p,p=Q}const B=c._.sigParams(b),P=[1,96];c._.uleb128Encode(P,"push",B.length);for(const Q of B)c._.pushSigType(P,Q);return b[0]==="v"?P.push(0):(P.push(1),c._.pushSigType(P,b[0])),c._.uleb128Encode(P,"unshift",P.length),P.unshift(0,97,115,109,1,0,0,0,1),P.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(P)),{e:{f:p}}).exports.f};const y=function(p,b,B){if(B&&!o.scopedAlloc.length&&i("No scopedAllocPush() scope is active."),typeof p=="string"){const a=b;b=p,p=a}(typeof b!="string"||!(p instanceof Function))&&i("Invalid arguments: expecting (function,signature) or (signature,function).");const P=t.functionTable(),Q=P.length;let s;for(;o.freeFuncIndexes.length&&(s=o.freeFuncIndexes.pop(),P.get(s));){s=null;continue}s||(s=Q,P.grow(1));try{return P.set(s,p),B&&o.scopedAlloc[o.scopedAlloc.length-1].push(s),s}catch(a){if(!(a instanceof TypeError))throw s===Q&&o.freeFuncIndexes.push(Q),a}try{const a=t.jsFuncToWasm(p,b);P.set(s,a),B&&o.scopedAlloc[o.scopedAlloc.length-1].push(s)}catch(a){throw s===Q&&o.freeFuncIndexes.push(Q),a}return s};t.installFunction=(c,p)=>y(c,p,!1),t.scopedInstallFunction=(c,p)=>y(c,p,!0),t.uninstallFunction=function(c){if(!c&&c!==0)return;const p=o.freeFuncIndexes,b=t.functionTable();p.push(c);const B=b.get(c);return b.set(c,null),B},t.peek=function(p,b="i8"){b.endsWith("*")&&(b=n);const B=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:g(),P=Array.isArray(p)?[]:void 0;let Q;do{switch(P&&(p=arguments[0].shift()),b){case"i1":case"i8":Q=B.HEAP8[p>>0];break;case"i16":Q=B.HEAP16[p>>1];break;case"i32":Q=B.HEAP32[p>>2];break;case"float":case"f32":Q=B.HEAP32F[p>>2];break;case"double":case"f64":Q=Number(B.HEAP64F[p>>3]);break;case"i64":if(t.bigIntEnabled){Q=BigInt(B.HEAP64[p>>3]);break}default:i("Invalid type for peek():",b)}P&&P.push(Q)}while(P&&arguments[0].length);return P||Q},t.poke=function(c,p,b="i8"){b.endsWith("*")&&(b=n);const B=o.memory&&o.heapSize===o.memory.buffer.byteLength?o:g();for(const P of Array.isArray(c)?c:[c])switch(b){case"i1":case"i8":B.HEAP8[P>>0]=p;continue;case"i16":B.HEAP16[P>>1]=p;continue;case"i32":B.HEAP32[P>>2]=p;continue;case"float":case"f32":B.HEAP32F[P>>2]=p;continue;case"double":case"f64":B.HEAP64F[P>>3]=p;continue;case"i64":if(B.HEAP64){B.HEAP64[P>>3]=BigInt(p);continue}default:i("Invalid type for poke(): "+b)}return this},t.peekPtr=(...c)=>t.peek(c.length===1?c[0]:c,n),t.pokePtr=(c,p=0)=>t.poke(c,p,n),t.peek8=(...c)=>t.peek(c.length===1?c[0]:c,"i8"),t.poke8=(c,p)=>t.poke(c,p,"i8"),t.peek16=(...c)=>t.peek(c.length===1?c[0]:c,"i16"),t.poke16=(c,p)=>t.poke(c,p,"i16"),t.peek32=(...c)=>t.peek(c.length===1?c[0]:c,"i32"),t.poke32=(c,p)=>t.poke(c,p,"i32"),t.peek64=(...c)=>t.peek(c.length===1?c[0]:c,"i64"),t.poke64=(c,p)=>t.poke(c,p,"i64"),t.peek32f=(...c)=>t.peek(c.length===1?c[0]:c,"f32"),t.poke32f=(c,p)=>t.poke(c,p,"f32"),t.peek64f=(...c)=>t.peek(c.length===1?c[0]:c,"f64"),t.poke64f=(c,p)=>t.poke(c,p,"f64"),t.getMemValue=t.peek,t.getPtrValue=t.peekPtr,t.setMemValue=t.poke,t.setPtrValue=t.pokePtr,t.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,t.isPtr=t.isPtr32,t.cstrlen=function(c){if(!c||!t.isPtr(c))return null;const p=g().HEAP8U;let b=c;for(;p[b]!==0;++b);return b-c};const L=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,D=function(c,p,b){return o.utf8Decoder.decode(c.buffer instanceof L?c.slice(p,b):c.subarray(p,b))};t.cstrToJs=function(c){const p=t.cstrlen(c);return p?D(g().HEAP8U,c,c+p):p===null?p:""},t.jstrlen=function(c){if(typeof c!="string")return null;const p=c.length;let b=0;for(let B=0;B<p;++B){let P=c.charCodeAt(B);P>=55296&&P<=57343&&(P=65536+((P&1023)<<10)|c.charCodeAt(++B)&1023),P<=127?++b:P<=2047?b+=2:P<=65535?b+=3:b+=4}return b},t.jstrcpy=function(c,p,b=0,B=-1,P=!0){if((!p||!(p instanceof Int8Array)&&!(p instanceof Uint8Array))&&i("jstrcpy() target must be an Int8Array or Uint8Array."),B<0&&(B=p.length-b),!(B>0)||!(b>=0))return 0;let Q=0,s=c.length;const a=b,d=b+B-(P?1:0);for(;Q<s&&b<d;++Q){let u=c.charCodeAt(Q);if(u>=55296&&u<=57343&&(u=65536+((u&1023)<<10)|c.charCodeAt(++Q)&1023),u<=127){if(b>=d)break;p[b++]=u}else if(u<=2047){if(b+1>=d)break;p[b++]=192|u>>6,p[b++]=128|u&63}else if(u<=65535){if(b+2>=d)break;p[b++]=224|u>>12,p[b++]=128|u>>6&63,p[b++]=128|u&63}else{if(b+3>=d)break;p[b++]=240|u>>18,p[b++]=128|u>>12&63,p[b++]=128|u>>6&63,p[b++]=128|u&63}}return P&&(p[b++]=0),b-a},t.cstrncpy=function(c,p,b){if((!c||!p)&&i("cstrncpy() does not accept NULL strings."),b<0)b=t.cstrlen(strPtr)+1;else if(!(b>0))return 0;const B=t.heap8u();let P=0,Q;for(;P<b&&(Q=B[p+P]);++P)B[c+P]=Q;return P<b&&(B[c+P++]=0),P},t.jstrToUintArray=(c,p=!1)=>o.utf8Encoder.encode(p?c+"\0":c);const z=(c,p)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&i("Object is missing alloc() and/or dealloc() function(s)","required by",p+"().")},G=function(c,p,b,B){if(z(t,B),typeof c!="string")return null;{const P=o.utf8Encoder.encode(c),Q=b(P.length+1),s=g().HEAP8U;return s.set(P,Q),s[Q+P.length]=0,p?[Q,P.length]:Q}};t.allocCString=(c,p=!1)=>G(c,p,t.alloc,"allocCString()"),t.scopedAllocPush=function(){z(t,"scopedAllocPush");const c=[];return o.scopedAlloc.push(c),c},t.scopedAllocPop=function(c){z(t,"scopedAllocPop");const p=arguments.length?o.scopedAlloc.indexOf(c):o.scopedAlloc.length-1;p<0&&i("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=o.scopedAlloc[p]),o.scopedAlloc.splice(p,1);for(let b;b=c.pop();)t.functionEntry(b)?t.uninstallFunction(b):t.dealloc(b)},t.scopedAlloc=function(c){o.scopedAlloc.length||i("No scopedAllocPush() scope is active.");const p=t.alloc(c);return o.scopedAlloc[o.scopedAlloc.length-1].push(p),p},Object.defineProperty(t.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>o.scopedAlloc.length,set:()=>i("The 'active' property is read-only.")}),t.scopedAllocCString=(c,p=!1)=>G(c,p,t.scopedAlloc,"scopedAllocCString()");const O=function(c,p){const b=t[c?"scopedAlloc":"alloc"]((p.length+1)*t.ptrSizeof);let B=0;return p.forEach(P=>{t.pokePtr(b+t.ptrSizeof*B++,t[c?"scopedAllocCString":"allocCString"](""+P))}),t.pokePtr(b+t.ptrSizeof*B,0),b};t.scopedAllocMainArgv=c=>O(!0,c),t.allocMainArgv=c=>O(!1,c),t.cArgvToJs=(c,p)=>{const b=[];for(let B=0;B<c;++B){const P=t.peekPtr(p+t.ptrSizeof*B);b.push(P?t.cstrToJs(P):null)}return b},t.scopedAllocCall=function(c){t.scopedAllocPush();try{return c()}finally{t.scopedAllocPop()}};const E=function(c,p,b){z(t,b);const B=p?"i64":n;let P=t[b](c*(p?8:r));if(t.poke(P,0,B),c===1)return P;const Q=[P];for(let s=1;s<c;++s)P+=p?8:r,Q[s]=P,t.poke(P,0,B);return Q};t.allocPtr=(c=1,p=!0)=>E(c,p,"alloc"),t.scopedAllocPtr=(c=1,p=!0)=>E(c,p,"scopedAlloc"),t.xGet=function(c){return t.exports[c]||i("Cannot find exported symbol:",c)};const U=(c,p)=>i(c+"() requires",p,"argument(s).");t.xCall=function(c,...p){const b=c instanceof Function?c:t.xGet(c);return b instanceof Function||i("Exported symbol",c,"is not a function."),b.length!==p.length&&U(b===c?b.name:c,b.length),arguments.length===2&&Array.isArray(arguments[1])?b.apply(null,arguments[1]):b.apply(null,p)},o.xWrap=Object.create(null),o.xWrap.convert=Object.create(null),o.xWrap.convert.arg=new Map,o.xWrap.convert.result=new Map;const h=o.xWrap.convert.arg,m=o.xWrap.convert.result;t.bigIntEnabled&&h.set("i64",c=>BigInt(c));const k=n==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);h.set("i32",k).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",h.get("f32")).set("f64",h.get("f32")).set("double",h.get("f64")).set("int",h.get("i32")).set("null",c=>c).set(null,h.get("null")).set("**",k).set("*",k),m.set("*",k).set("pointer",k).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,m.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];t.bigIntEnabled&&c.push("i64");const p=h.get(n);for(const b of c)h.set(b+"*",p),m.set(b+"*",p),m.set(b,h.get(b)||i("Missing arg converter:",b))}const x=function(c){return typeof c=="string"?t.scopedAllocCString(c):c?k(c):null};h.set("string",x).set("utf8",x).set("pointer",x),m.set("string",c=>t.cstrToJs(c)).set("utf8",m.get("string")).set("string:dealloc",c=>{try{return c?t.cstrToJs(c):null}finally{t.dealloc(c)}}).set("utf8:dealloc",m.get("string:dealloc")).set("json",c=>JSON.parse(t.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(t.cstrToJs(c)):null}finally{t.dealloc(c)}});const C=class{constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,p,b){i("AbstractArgAdapter must be subclassed.")}};h.FuncPtrAdapter=class Oe extends C{constructor(p){super(p),h.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",p),this.name=p.name||"unnamed",this.signature=p.signature,p.contextKey instanceof Function&&(this.contextKey=p.contextKey,p.bindScope||(p.bindScope="context")),this.bindScope=p.bindScope||i("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Oe.bindScopes.indexOf(p.bindScope)<0&&i("Invalid options.bindScope ("+p.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Oe.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=p.callProxy instanceof Function?p.callProxy:void 0}contextKey(p,b){return this}contextMap(p){const b=this.__cmap||(this.__cmap=new Map);let B=b.get(p);return B===void 0&&b.set(p,B=[]),B}convertArg(p,b,B){let P=this.singleton;if(!P&&this.isContext&&(P=this.contextMap(this.contextKey(b,B))),P&&P[0]===p)return P[1];if(p instanceof Function){this.callProxy&&(p=this.callProxy(p));const Q=y(p,this.signature,this.isTransient);if(Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter installed",this,this.contextKey(b,B),"@"+Q,p),P){if(P[1]){Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,B),"@"+P[1],p);try{o.scopedAlloc[o.scopedAlloc.length-1].push(P[1])}catch{}}P[0]=p,P[1]=Q}return Q}else if(t.isPtr(p)||p===null||p===void 0){if(P&&P[1]&&P[1]!==p){Oe.debugFuncInstall&&Oe.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,B),"@"+P[1],p);try{o.scopedAlloc[o.scopedAlloc.length-1].push(P[1])}catch{}P[0]=P[1]=p|0}return p||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},h.FuncPtrAdapter.warnOnUse=!1,h.FuncPtrAdapter.debugFuncInstall=!1,h.FuncPtrAdapter.debugOut=console.debug.bind(console),h.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const w=c=>h.get(c)||i("Argument adapter not found:",c),j=c=>m.get(c)||i("Result adapter not found:",c);o.xWrap.convertArg=(c,...p)=>w(c)(...p),o.xWrap.convertArgNoCheck=(c,...p)=>h.get(c)(...p),o.xWrap.convertResult=(c,p)=>c===null?p:c?j(c)(p):void 0,o.xWrap.convertResultNoCheck=(c,p)=>c===null?p:c?m.get(c)(p):void 0,t.xWrap=function(c,p,...b){arguments.length===3&&Array.isArray(arguments[2])&&(b=arguments[2]),t.isPtr(c)&&(c=t.functionEntry(c)||i("Function pointer not found in WASM function table."));const B=c instanceof Function,P=B?c:t.xGet(c);if(B&&(c=P.name||"unnamed function"),b.length!==P.length&&U(c,P.length),p===null&&P.length===0)return P;p!=null&&j(p);for(const s of b)s instanceof C?h.set(s,(...a)=>s.convertArg(...a)):w(s);const Q=o.xWrap;return P.length===0?(...s)=>s.length?U(c,P.length):Q.convertResult(p,P.call(null)):function(...s){s.length!==P.length&&U(c,P.length);const a=t.scopedAllocPush();try{let d=0;for(;d<s.length;++d)s[d]=Q.convertArgNoCheck(b[d],s[d],s,d);return Q.convertResultNoCheck(p,P.apply(null,s))}finally{t.scopedAllocPop(a)}}};const M=function(c,p,b,B,P,Q){if(typeof b=="string"){if(p===1)return Q.get(b);if(p===2){if(B)B instanceof Function||i(P,"requires a function argument.");else return Q.delete(b),c;return Q.set(b,B),c}}i("Invalid arguments to",P)};return t.xWrap.resultAdapter=function c(p,b){return M(c,arguments.length,p,b,"resultAdapter()",m)},t.xWrap.argAdapter=function c(p,b){return M(c,arguments.length,p,b,"argAdapter()",h)},t.xWrap.FuncPtrAdapter=h.FuncPtrAdapter,t.xCallWrapped=function(c,p,b,...B){return Array.isArray(arguments[3])&&(B=arguments[3]),t.xWrap(c,p,b||[]).apply(null,B||[])},t.xWrap.testConvertArg=o.xWrap.convertArg,t.xWrap.testConvertResult=o.xWrap.convertResult,t},globalThis.WhWasmUtilInstaller.yawl=(function(t){const i=()=>fetch(t.uri,{credentials:"same-origin"}),n=this,r=function(g){if(t.wasmUtilTarget){const y=(...D)=>{throw new Error(D.join(" "))},L=t.wasmUtilTarget;if(L.module=g.module,L.instance=g.instance,L.instance.exports.memory||(L.memory=t.imports&&t.imports.env&&t.imports.env.memory||y("Missing 'memory' object!")),!L.alloc&&g.instance.exports.malloc){const D=g.instance.exports;L.alloc=function(z){return D.malloc(z)||y("Allocation of",z,"bytes failed.")},L.dealloc=function(z){D.free(z)}}n(L)}return t.onload&&t.onload(g,t),g};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(i(),t.imports||{}).then(r)}:function(){return i().then(y=>y.arrayBuffer()).then(y=>WebAssembly.instantiate(y,t.imports||{})).then(r)}}).bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function t(i){const n=(...f)=>{throw new Error(f.join(" "))};!(i.heap instanceof WebAssembly.Memory)&&!(i.heap instanceof Function)&&n("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(f){i[f]instanceof Function||n("Config option '"+f+"' must be a function.")});const r=t,o=i.heap instanceof Function?i.heap:()=>new Uint8Array(i.heap.buffer),g=i.alloc,y=i.dealloc,L=i.log||console.log.bind(console),D=i.memberPrefix||"",z=i.memberSuffix||"",G=i.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!i.bigIntEnabled,O=globalThis.BigInt,E=globalThis.BigInt64Array,U=i.ptrSizeof||4,h=i.ptrIR||"i32";r.debugFlags||(r.__makeDebugFlags=function(f=null){f&&f.__flags&&(f=f.__flags);const q=function S(T){return arguments.length===0?S.__flags:(T<0?(delete S.__flags.getter,delete S.__flags.setter,delete S.__flags.alloc,delete S.__flags.dealloc):(S.__flags.getter=(1&T)!==0,S.__flags.setter=(2&T)!==0,S.__flags.alloc=(4&T)!==0,S.__flags.dealloc=(8&T)!==0),S._flags)};return Object.defineProperty(q,"__flags",{iterable:!1,writable:!1,value:Object.create(f)}),f||q(0),q},r.debugFlags=r.__makeDebugFlags());const m=function(){const f=new ArrayBuffer(2);return new DataView(f).setInt16(0,256,!0),new Int16Array(f)[0]===256}(),k=f=>f[1]==="(",x=f=>f==="P",C=f=>k(f)?"p":f[0],w=function(f){switch(C(f)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return h;case"j":return"i64";case"f":return"float";case"d":return"double"}n("Unhandled signature IR:",f)},j=E?()=>!0:()=>n("BigInt64Array is not available."),M=function(f){switch(C(f)){case"p":case"P":case"s":{switch(U){case 4:return"getInt32";case 8:return j()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return j()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}n("Unhandled DataView getter for signature:",f)},c=function(f){switch(C(f)){case"p":case"P":case"s":{switch(U){case 4:return"setInt32";case 8:return j()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return j()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}n("Unhandled DataView setter for signature:",f)},p=function(f){switch(C(f)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return j()&&O;case"p":case"P":case"s":switch(U){case 4:return Number;case 8:return j()&&O}break}n("Unhandled DataView set wrapper for signature:",f)},b=(f,q)=>f+"::"+q,B=function(f,q){return()=>n(b(f,q),"is read-only.")},P=new WeakMap,Q="(pointer-is-external)",s=function(f,q,S){if(S||(S=P.get(q)),S){if(P.delete(q),Array.isArray(q.ondispose)){let T;for(;T=q.ondispose.shift();)try{T instanceof Function?T.call(q):T instanceof V?T.dispose():typeof T=="number"&&y(T)}catch(H){console.warn("ondispose() for",f.structName,"@",S,"threw. NOT propagating it.",H)}}else if(q.ondispose instanceof Function)try{q.ondispose()}catch(T){console.warn("ondispose() for",f.structName,"@",S,"threw. NOT propagating it.",T)}delete q.ondispose,f.debugFlags.__flags.dealloc&&L("debug.dealloc:",q[Q]?"EXTERNAL":"",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+S),q[Q]||y(S)}},a=f=>({configurable:!1,writable:!1,iterable:!1,value:f}),d=function(f,q,S){let T=!S;S?Object.defineProperty(q,Q,a(S)):(S=g(f.structInfo.sizeof),S||n("Allocation of",f.structName,"structure failed."));try{f.debugFlags.__flags.alloc&&L("debug.alloc:",T?"":"EXTERNAL",f.structName,"instance:",f.structInfo.sizeof,"bytes @"+S),T&&o().fill(0,S,S+f.structInfo.sizeof),P.set(q,S)}catch(H){throw s(f,q,S),H}},u=function(){const f=this.pointer;return f?new Uint8Array(o().slice(f,f+this.structInfo.sizeof)):null},W=a(f=>D+f+z),X=function(f,q,S=!0){let T=f.members[q];if(!T&&(D||z)){for(const H of Object.values(f.members))if(H.key===q){T=H;break}!T&&S&&n(b(f.name,q),"is not a mapped struct member.")}return T},oe=function f(q,S,T=!1){f._||(f._=J=>J.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const H=X(q.structInfo,S,!0);return T?f._(H.signature):H.signature},te={configurable:!1,enumerable:!1,get:function(){return P.get(this)},set:()=>n("Cannot assign the 'pointer' property of a struct.")},le=a(function(){const f=[];for(const q of Object.keys(this.structInfo.members))f.push(this.memberKey(q));return f}),ae=new TextDecoder("utf-8"),re=new TextEncoder,ie=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ce=function(f,q,S){return ae.decode(f.buffer instanceof ie?f.slice(q,S):f.subarray(q,S))},ge=function(f,q,S=!1){const T=X(f.structInfo,q,S);return T&&T.signature.length===1&&T.signature[0]==="s"?T:!1},me=function(f){f.signature!=="s"&&n("Invalid member type signature for C-string value:",JSON.stringify(f))},I=function(q,S){const T=X(q.structInfo,S,!0);me(T);const H=q[T.key];if(!H)return null;let J=H;const ee=o();for(;ee[J]!==0;++J);return H===J?"":ce(ee,H,J)},R=function(f,...q){f.ondispose?Array.isArray(f.ondispose)||(f.ondispose=[f.ondispose]):f.ondispose=[],f.ondispose.push(...q)},N=function(f){const q=re.encode(f),S=g(q.length+1);S||n("Allocation error while duplicating string:",f);const T=o();return T.set(q,S),T[S+q.length]=0,S},K=function(f,q,S){const T=X(f.structInfo,q,!0);me(T);const H=N(S);return f[T.key]=H,R(f,H),f},V=function(q,S){arguments[2]!==a&&n("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:a(q),structInfo:a(S)})};V.prototype=Object.create(null,{dispose:a(function(){s(this.constructor,this)}),lookupMember:a(function(f,q=!0){return X(this.structInfo,f,q)}),memberToJsString:a(function(f){return I(this,f)}),memberIsString:a(function(f,q=!0){return ge(this,f,q)}),memberKey:W,memberKeys:le,memberSignature:a(function(f,q=!1){return oe(this,f,q)}),memoryDump:a(u),pointer:te,setMemberCString:a(function(f,q){return K(this,f,q)})}),Object.assign(V.prototype,{addOnDispose:function(...f){return R(this,...f),this}}),Object.defineProperties(V,{allocCString:a(N),isA:a(f=>f instanceof V),hasExternalPointer:a(f=>f instanceof V&&!!f[Q]),memberKey:W});const Z=f=>Number.isFinite(f)||f instanceof(O||Number),Y=function f(q,S,T){if(!f._){f._={getters:{},setters:{},sw:{}};const ye=["i","c","C","p","P","s","f","d","v()"];G&&ye.push("j"),ye.forEach(function(Te){f._.getters[Te]=M(Te),f._.setters[Te]=c(Te),f._.sw[Te]=p(Te)});const cr=/^[ipPsjfdcC]$/,_r=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;f.sigCheck=function(Te,ur,Nt,gt){Object.prototype.hasOwnProperty.call(Te,Nt)&&n(Te.structName,"already has a property named",Nt+"."),cr.test(gt)||_r.test(gt)||n("Malformed signature for",b(Te.structName,ur)+":",gt)}}const H=q.memberKey(S);f.sigCheck(q.prototype,S,H,T.signature),T.key=H,T.name=S;const J=C(T.signature),ee=b(q.prototype.structName,H),_e=q.prototype.debugFlags.__flags,qe=Object.create(null);qe.configurable=!1,qe.enumerable=!1,qe.get=function(){_e.getter&&L("debug.getter:",f._.getters[J],"for",w(J),ee,"@",this.pointer,"+",T.offset,"sz",T.sizeof);let ye=new DataView(o().buffer,this.pointer+T.offset,T.sizeof)[f._.getters[J]](0,m);return _e.getter&&L("debug.getter:",ee,"result =",ye),ye},T.readOnly?qe.set=B(q.prototype.structName,H):qe.set=function(ye){if(_e.setter&&L("debug.setter:",f._.setters[J],"for",w(J),ee,"@",this.pointer,"+",T.offset,"sz",T.sizeof,ye),this.pointer||n("Cannot set struct property on disposed instance."),ye===null)ye=0;else for(;!Z(ye);){if(x(T.signature)&&ye instanceof V){ye=ye.pointer||0,_e.setter&&L("debug.setter:",ee,"resolved to",ye);break}n("Invalid value for pointer-type",ee+".")}new DataView(o().buffer,this.pointer+T.offset,T.sizeof)[f._.setters[J]](0,f._.sw[J](ye),m)},Object.defineProperty(q.prototype,H,qe)},F=function f(q,S){arguments.length===1?(S=q,q=S.name):S.name||(S.name=q),q||n("Struct name is required.");let T=!1;Object.keys(S.members).forEach(ee=>{const _e=S.members[ee];_e.sizeof?_e.sizeof===1?_e.signature==="c"||_e.signature==="C"||n("Unexpected sizeof==1 member",b(S.name,ee),"with signature",_e.signature):(_e.sizeof%4!==0&&(console.warn("Invalid struct member description =",_e,"from",S),n(q,"member",ee,"sizeof is not aligned. sizeof="+_e.sizeof)),_e.offset%4!==0&&(console.warn("Invalid struct member description =",_e,"from",S),n(q,"member",ee,"offset is not aligned. offset="+_e.offset))):n(q,"member",ee,"is missing sizeof."),(!T||T.offset<_e.offset)&&(T=_e)}),T?S.sizeof<T.offset+T.sizeof&&n("Invalid struct config:",q,"max member offset ("+T.offset+") ","extends past end of struct (sizeof="+S.sizeof+")."):n("No member property descriptions found.");const H=a(r.__makeDebugFlags(f.debugFlags)),J=function ee(_e){this instanceof ee?arguments.length?((_e!==(_e|0)||_e<=0)&&n("Invalid pointer value for",q,"constructor."),d(ee,this,_e)):d(ee,this):n("The",q,"constructor may only be called via 'new'.")};return Object.defineProperties(J,{debugFlags:H,isA:a(ee=>ee instanceof J),memberKey:W,memberKeys:le,methodInfoForKey:a(function(ee){}),structInfo:a(S),structName:a(q)}),J.prototype=new V(q,S,a),Object.defineProperties(J.prototype,{debugFlags:H,constructor:a(J)}),Object.keys(S.members).forEach(ee=>Y(J,ee,S.members[ee])),J};return F.StructType=V,F.config=i,F.allocCString=N,F.debugFlags||(F.debugFlags=r.__makeDebugFlags(r.debugFlags)),F},globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=(...h)=>{throw new Error(h.join(" "))};t.SQLite3Error.toss;const n=t.capi,r=t.wasm,o=t.util;if(globalThis.WhWasmUtilInstaller(r),delete globalThis.WhWasmUtilInstaller,r.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_parameter_name","string","sqlite3_stmt*","int"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(h,m)=>h[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_decltype","string","sqlite3_stmt*","int"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:h=>h[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_readonly","int","sqlite3*","string"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new r.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:h=>{let m;return(k,x,C,w)=>{try{const j=r.cArgvToJs(x,C);return m||(m=r.cArgvToJs(x,w)),h(j,m)|0}catch(j){return j.resultCode||n.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_interrupt",void 0,"sqlite3*"],["sqlite3_is_interrupted","int","sqlite3*"],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:h=>h[0]}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*","*"]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_busy","int","sqlite3_stmt*"],["sqlite3_stmt_readonly","int","sqlite3_stmt*"],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(h,m)=>h[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],r.exports.sqlite3_progress_handler&&r.bindingSignatures.push(["sqlite3_progress_handler",void 0,["sqlite3*","int",new r.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(h,m)=>h[0]}),"*"]]),r.exports.sqlite3_stmt_explain&&r.bindingSignatures.push(["sqlite3_stmt_explain","int","sqlite3_stmt*","int"],["sqlite3_stmt_isexplain","int","sqlite3_stmt*"]),r.exports.sqlite3_set_authorizer&&r.bindingSignatures.push(["sqlite3_set_authorizer","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(h,m)=>h[0],callProxy:h=>(m,k,x,C,w,j)=>{try{return x=x&&r.cstrToJs(x),C=C&&r.cstrToJs(C),w=w&&r.cstrToJs(w),j=j&&r.cstrToJs(j),h(m,k,x,C,w,j)||0}catch(M){return M.resultCode||n.SQLITE_ERROR}}}),"*"]]),r.exports.sqlite3_key_v2 instanceof Function&&r.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"],["sqlite3mc_cipher_count","int"],["sqlite3mc_cipher_index","int","string"],["sqlite3mc_cipher_name","string","int"],["sqlite3mc_config","int","sqlite3*","string","int"],["sqlite3mc_config_cipher","int","sqlite3*","string","string","int"],["sqlite3mc_codec_data","string","sqlite3*","string","string"],["sqlite3mc_version","string"],["sqlite3mc_vfs_create","int","string","int"],["sqlite3mc_vfs_destroy",void 0,"string"],["sqlite3mc_vfs_shutdown",void 0]),r.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:h=>h[0],callProxy:h=>(m,k,x,C,w)=>{h(m,k,r.cstrToJs(x),r.cstrToJs(C),w)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"]],r.bigIntEnabled&&r.exports.sqlite3_declare_vtab&&r.bindingSignatures.int64.push(["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]),r.bigIntEnabled&&r.exports.sqlite3_preupdate_hook&&r.bindingSignatures.int64.push(["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:h=>h[0],callProxy:h=>(m,k,x,C,w,j,M)=>{h(m,k,x,r.cstrToJs(C),r.cstrToJs(w),j,M)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]]),r.bigIntEnabled&&r.exports.sqlite3changegroup_add&&r.exports.sqlite3session_create&&r.exports.sqlite3_preupdate_hook){const h={signature:"i(ps)",callProxy:m=>(k,x)=>{try{return m(k,r.cstrToJs(x))|0}catch(C){return C.resultCode||n.SQLITE_ERROR}}};r.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...h}),new r.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new r.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new r.xWrap.FuncPtrAdapter({name:"xFilter",...h,contextKey:(m,k)=>m[0]}),"*"]])}r.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],t.StructBinder=globalThis.Jaccwabyt({heap:r.heap8u,alloc:r.alloc,dealloc:r.dealloc,bigIntEnabled:r.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const h=r.xWrap.argAdapter("string");r.xWrap.argAdapter("string:flexible",w=>h(o.flexibleString(w))),r.xWrap.argAdapter("string:static",(function(w){return r.isPtr(w)?w:(w=""+w,this[w]||(this[w]=r.allocCString(w)))}).bind(Object.create(null)));const m=r.xWrap.argAdapter("*"),k=function(){};r.xWrap.argAdapter("sqlite3_filename",m)("sqlite3_context*",m)("sqlite3_value*",m)("void*",m)("sqlite3_changegroup*",m)("sqlite3_changeset_iter*",m)("sqlite3_session*",m)("sqlite3_stmt*",w=>{var j;return m(w instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.Stmt)||k)?w.pointer:w)})("sqlite3*",w=>{var j;return m(w instanceof(((j=t==null?void 0:t.oo1)==null?void 0:j.DB)||k)?w.pointer:w)})("sqlite3_vfs*",w=>typeof w=="string"?n.sqlite3_vfs_find(w)||t.SQLite3Error.toss(n.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",w):m(w instanceof(n.sqlite3_vfs||k)?w.pointer:w)),r.exports.sqlite3_declare_vtab&&r.xWrap.argAdapter("sqlite3_index_info*",w=>m(w instanceof(n.sqlite3_index_info||k)?w.pointer:w))("sqlite3_module*",w=>m(w instanceof(n.sqlite3_module||k)?w.pointer:w));const x=r.xWrap.resultAdapter("*");r.xWrap.resultAdapter("sqlite3*",x)("sqlite3_context*",x)("sqlite3_stmt*",x)("sqlite3_value*",x)("sqlite3_vfs*",x)("void*",x),r.exports.sqlite3_step.length===0&&(r.xWrap.doArgcCheck=!1,t.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const w of r.bindingSignatures)n[w[0]]=r.xWrap.apply(null,w);for(const w of r.bindingSignatures.wasmInternal)o[w[0]]=r.xWrap.apply(null,w);const C=function(w){return()=>i(w+"() is unavailable due to lack","of BigInt support in this build.")};for(const w of r.bindingSignatures.int64)n[w[0]]=r.bigIntEnabled?r.xWrap.apply(null,w):C(w[0]);if(delete r.bindingSignatures,r.exports.sqlite3__wasm_db_error){const w=r.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");o.sqlite3__wasm_db_error=function(j,M,c){return M instanceof t.WasmAllocError?(M=n.SQLITE_NOMEM,c=0):M instanceof Error&&(c=c||""+M,M=M.resultCode||n.SQLITE_ERROR),j?w(j,M,c):M}}else o.sqlite3__wasm_db_error=function(w,j,M){return console.warn("sqlite3__wasm_db_error() is not exported.",arguments),j}}{const h=r.xCall("sqlite3__wasm_enum_json");h||i("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),r.ctype=JSON.parse(r.cstrToJs(h));const m=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];r.bigIntEnabled&&m.push("serialize","session","vtab");for(const C of m)for(const w of Object.entries(r.ctype[C]))n[w[0]]=w[1];r.functionEntry(n.SQLITE_WASM_DEALLOC)||i("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+n.SQLITE_WASM_DEALLOC+").");const k=Object.create(null);for(const C of["resultCodes"])for(const w of Object.entries(r.ctype[C]))k[w[1]]=w[0];n.sqlite3_js_rc_str=C=>k[C];const x=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!o.isUIThread(),sqlite3_index_info:!r.bigIntEnabled,sqlite3_index_constraint:!r.bigIntEnabled,sqlite3_index_orderby:!r.bigIntEnabled,sqlite3_index_constraint_usage:!r.bigIntEnabled});for(const C of r.ctype.structs)x[C.name]||(n[C.name]=t.StructBinder(C));if(n.sqlite3_index_info){for(const C of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])n.sqlite3_index_info[C]=n[C],delete n[C];n.sqlite3_vtab_config=r.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const g=(h,m,k)=>o.sqlite3__wasm_db_error(h,n.SQLITE_MISUSE,m+"() requires "+k+" argument"+(k===1?"":"s")+"."),y=h=>o.sqlite3__wasm_db_error(h,n.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),L=h=>r.xWrap.argAdapter("sqlite3*")(h),D=h=>r.isPtr(h)?r.cstrToJs(h):h,z=(function(h,m){h=L(h);let k=this.dbMap.get(h);if(m)!k&&m>0&&this.dbMap.set(h,k=Object.create(null));else return this.dbMap.delete(h),k;return k}).bind(Object.assign(Object.create(null),{dbMap:new Map}));z.addCollation=function(h,m){const k=z(h,1);k.collation||(k.collation=new Set),k.collation.add(D(m).toLowerCase())},z._addUDF=function(h,m,k,x){m=D(m).toLowerCase();let C=x.get(m);C||x.set(m,C=new Set),C.add(k<0?-1:k)},z.addFunction=function(h,m,k){const x=z(h,1);x.udf||(x.udf=new Map),this._addUDF(h,m,k,x.udf)},r.exports.sqlite3_create_window_function&&(z.addWindowFunc=function(h,m,k){const x=z(h,1);x.wudf||(x.wudf=new Map),this._addUDF(h,m,k,x.wudf)}),z.cleanup=function(h){h=L(h);const m=[h];for(const C of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const w=r.exports[C];if(w){m.length=w.length;try{n[C](...m)}catch(j){t.config.warn("close-time call of",C+"(",m,") threw:",j)}}}const k=z(h,0);if(!k)return;if(k.collation){for(const C of k.collation)try{n.sqlite3_create_collation_v2(h,C,n.SQLITE_UTF8,0,0,0)}catch{}delete k.collation}let x;for(x=0;x<2;++x){const C=x?k.wudf:k.udf;if(!C)continue;const w=x?n.sqlite3_create_window_function:n.sqlite3_create_function_v2;for(const j of C){const M=j[0],c=j[1],p=[h,M,0,n.SQLITE_UTF8,0,0,0,0,0];x&&p.push(0);for(const b of c)try{p[2]=b,w.apply(null,p)}catch{}c.clear()}C.clear()}delete k.udf,delete k.wudf};{const h=r.xWrap("sqlite3_close_v2","int","sqlite3*");n.sqlite3_close_v2=function(m){if(arguments.length!==1)return g(m,"sqlite3_close_v2",1);if(m)try{z.cleanup(m)}catch{}return h(m)}}if(n.sqlite3session_create){const h=r.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);n.sqlite3session_delete=function(m){if(arguments.length!==1)return g(pDb,"sqlite3session_delete",1);m&&n.sqlite3session_table_filter(m,0,0),h(m)}}{const h=(k,x)=>"argv["+x+"]:"+k[0]+":"+r.cstrToJs(k[1]).toLowerCase(),m=r.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new r.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:h}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:h})]);n.sqlite3_create_collation_v2=function(k,x,C,w,j,M){if(arguments.length!==6)return g(k,"sqlite3_create_collation_v2",6);if(!(C&15))C|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(C&15))return y(k);try{const c=m(k,x,C,w,j,M);return c===0&&j instanceof Function&&z.addCollation(k,x),c}catch(c){return o.sqlite3__wasm_db_error(k,c)}},n.sqlite3_create_collation=(k,x,C,w,j)=>arguments.length===5?n.sqlite3_create_collation_v2(k,x,C,w,j,0):g(k,"sqlite3_create_collation",5)}{const h=function(C,w){return C[0]+":"+(C[2]<0?-1:C[2])+":"+w+":"+r.cstrToJs(C[1]).toLowerCase()},m=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:h,callProxy:C=>(w,j,M)=>{try{C(w,...n.sqlite3_values_to_js(j,M))}catch(c){n.sqlite3_result_error_js(w,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:h,callProxy:C=>w=>{try{n.sqlite3_result_js(w,C(w))}catch(j){n.sqlite3_result_error_js(w,j)}}},xFunc:{signature:"v(pip)",contextKey:h,callProxy:C=>(w,j,M)=>{try{n.sqlite3_result_js(w,C(w,...n.sqlite3_values_to_js(j,M)))}catch(c){n.sqlite3_result_error_js(w,c)}}},xDestroy:{signature:"v(p)",contextKey:h,callProxy:C=>w=>{try{C(w)}catch(j){console.error("UDF xDestroy method threw:",j)}}}}),k=r.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xFunc",...m.xFunc}),new r.xWrap.FuncPtrAdapter({name:"xStep",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...m.xDestroy})]),x=r.exports.sqlite3_create_window_function?r.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new r.xWrap.FuncPtrAdapter({name:"xStep",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xFinal",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xValue",...m.xFinalAndValue}),new r.xWrap.FuncPtrAdapter({name:"xInverse",...m.xInverseAndStep}),new r.xWrap.FuncPtrAdapter({name:"xDestroy",...m.xDestroy})]):void 0;n.sqlite3_create_function_v2=function C(w,j,M,c,p,b,B,P,Q){if(C.length!==arguments.length)return g(w,"sqlite3_create_function_v2",C.length);if(!(c&15))c|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(c&15))return y(w);try{const s=k(w,j,M,c,p,b,B,P,Q);return s===0&&(b instanceof Function||B instanceof Function||P instanceof Function||Q instanceof Function)&&z.addFunction(w,j,M),s}catch(s){return console.error("sqlite3_create_function_v2() setup threw:",s),o.sqlite3__wasm_db_error(w,s,"Creation of UDF threw: "+s)}},n.sqlite3_create_function=function C(w,j,M,c,p,b,B,P){return C.length===arguments.length?n.sqlite3_create_function_v2(w,j,M,c,p,b,B,P,0):g(w,"sqlite3_create_function",C.length)},x?n.sqlite3_create_window_function=function C(w,j,M,c,p,b,B,P,Q,s){if(C.length!==arguments.length)return g(w,"sqlite3_create_window_function",C.length);if(!(c&15))c|=n.SQLITE_UTF8;else if(n.SQLITE_UTF8!==(c&15))return y(w);try{const a=x(w,j,M,c,p,b,B,P,Q,s);return a===0&&(b instanceof Function||B instanceof Function||P instanceof Function||Q instanceof Function||s instanceof Function)&&z.addWindowFunc(w,j,M),a}catch(a){return console.error("sqlite3_create_window_function() setup threw:",a),o.sqlite3__wasm_db_error(w,a,"Creation of UDF threw: "+a)}}:delete n.sqlite3_create_window_function,n.sqlite3_create_function_v2.udfSetResult=n.sqlite3_create_function.udfSetResult=n.sqlite3_result_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetResult=n.sqlite3_result_js),n.sqlite3_create_function_v2.udfConvertArgs=n.sqlite3_create_function.udfConvertArgs=n.sqlite3_values_to_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfConvertArgs=n.sqlite3_values_to_js),n.sqlite3_create_function_v2.udfSetError=n.sqlite3_create_function.udfSetError=n.sqlite3_result_error_js,n.sqlite3_create_window_function&&(n.sqlite3_create_window_function.udfSetError=n.sqlite3_result_error_js)}{const h=(k,x)=>(typeof k=="string"?x=-1:o.isSQLableTypedArray(k)?(x=k.byteLength,k=o.typedArrayToString(k instanceof ArrayBuffer?new Uint8Array(k):k)):Array.isArray(k)&&(k=k.join(""),x=-1),[k,x]),m={basic:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:r.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};n.sqlite3_prepare_v3=function k(x,C,w,j,M,c){if(k.length!==arguments.length)return g(x,"sqlite3_prepare_v3",k.length);const[p,b]=h(C,w);switch(typeof p){case"string":return m.basic(x,p,b,j,M,null);case"number":return m.full(x,p,b,j,M,c);default:return o.sqlite3__wasm_db_error(x,n.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},n.sqlite3_prepare_v2=function k(x,C,w,j,M){return k.length===arguments.length?n.sqlite3_prepare_v3(x,C,w,0,j,M):g(x,"sqlite3_prepare_v2",k.length)}}{const h=r.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),m=r.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);n.sqlite3_bind_text=function k(x,C,w,j,M){if(k.length!==arguments.length)return g(n.sqlite3_db_handle(x),"sqlite3_bind_text",k.length);if(r.isPtr(w)||w===null)return h(x,C,w,j,M);w instanceof ArrayBuffer?w=new Uint8Array(w):Array.isArray(pMem)&&(w=pMem.join(""));let c,p;try{if(o.isSQLableTypedArray(w))c=r.allocFromTypedArray(w),p=w.byteLength;else if(typeof w=="string")[c,p]=r.allocCString(w);else return o.sqlite3__wasm_db_error(n.sqlite3_db_handle(x),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return h(x,C,c,p,n.SQLITE_WASM_DEALLOC)}catch(b){return r.dealloc(c),o.sqlite3__wasm_db_error(n.sqlite3_db_handle(x),b)}},n.sqlite3_bind_blob=function k(x,C,w,j,M){if(k.length!==arguments.length)return g(n.sqlite3_db_handle(x),"sqlite3_bind_blob",k.length);if(r.isPtr(w)||w===null)return m(x,C,w,j,M);w instanceof ArrayBuffer?w=new Uint8Array(w):Array.isArray(w)&&(w=w.join(""));let c,p;try{if(o.isBindableTypedArray(w))c=r.allocFromTypedArray(w),p=j>=0?j:w.byteLength;else if(typeof w=="string")[c,p]=r.allocCString(w);else return o.sqlite3__wasm_db_error(n.sqlite3_db_handle(x),n.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return m(x,C,c,p,n.SQLITE_WASM_DEALLOC)}catch(b){return r.dealloc(c),o.sqlite3__wasm_db_error(n.sqlite3_db_handle(x),b)}}}n.sqlite3_config=function(h,...m){if(arguments.length<2)return n.SQLITE_MISUSE;switch(h){case n.SQLITE_CONFIG_COVERING_INDEX_SCAN:case n.SQLITE_CONFIG_MEMSTATUS:case n.SQLITE_CONFIG_SMALL_MALLOC:case n.SQLITE_CONFIG_SORTERREF_SIZE:case n.SQLITE_CONFIG_STMTJRNL_SPILL:case n.SQLITE_CONFIG_URI:return r.exports.sqlite3__wasm_config_i(h,m[0]);case n.SQLITE_CONFIG_LOOKASIDE:return r.exports.sqlite3__wasm_config_ii(h,m[0],m[1]);case n.SQLITE_CONFIG_MEMDB_MAXSIZE:return r.exports.sqlite3__wasm_config_j(h,m[0]);case n.SQLITE_CONFIG_GETMALLOC:case n.SQLITE_CONFIG_GETMUTEX:case n.SQLITE_CONFIG_GETPCACHE2:case n.SQLITE_CONFIG_GETPCACHE:case n.SQLITE_CONFIG_HEAP:case n.SQLITE_CONFIG_LOG:case n.SQLITE_CONFIG_MALLOC:case n.SQLITE_CONFIG_MMAP_SIZE:case n.SQLITE_CONFIG_MULTITHREAD:case n.SQLITE_CONFIG_MUTEX:case n.SQLITE_CONFIG_PAGECACHE:case n.SQLITE_CONFIG_PCACHE2:case n.SQLITE_CONFIG_PCACHE:case n.SQLITE_CONFIG_PCACHE_HDRSZ:case n.SQLITE_CONFIG_PMASZ:case n.SQLITE_CONFIG_SERIALIZED:case n.SQLITE_CONFIG_SINGLETHREAD:case n.SQLITE_CONFIG_SQLLOG:case n.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return n.SQLITE_NOTFOUND}};{const h=new Set;n.sqlite3_auto_extension=function(m){if(m instanceof Function)m=r.installFunction("i(ppp)",m);else if(arguments.length!==1||!r.isPtr(m))return n.SQLITE_MISUSE;const k=r.exports.sqlite3_auto_extension(m);return m!==arguments[0]&&(k===0?h.add(m):r.uninstallFunction(m)),k},n.sqlite3_cancel_auto_extension=function(m){return!m||arguments.length!==1||!r.isPtr(m)?0:r.exports.sqlite3_cancel_auto_extension(m)},n.sqlite3_reset_auto_extension=function(){r.exports.sqlite3_reset_auto_extension();for(const m of h)r.uninstallFunction(m);h.clear()}}const G=n.sqlite3_vfs_find("kvvfs");if(G)if(o.isUIThread()){const h=new n.sqlite3_kvvfs_methods(r.exports.sqlite3__wasm_kvvfs_methods());delete n.sqlite3_kvvfs_methods;const m=r.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,k=r.pstack,x=w=>r.peek(w)===115?sessionStorage:localStorage,C={xRead:(w,j,M,c)=>{const p=k.pointer,b=r.scopedAllocPush();try{const B=m(w,j);if(!B)return-3;const P=r.cstrToJs(B),Q=x(w).getItem(P);if(!Q)return-1;const s=Q.length;if(c<=0)return s;if(c===1)return r.poke(M,0),s;const a=r.scopedAllocCString(Q);return c>s+1&&(c=s+1),r.heap8u().copyWithin(M,a,a+c-1),r.poke(M+c-1,0),c-1}catch(B){return console.error("kvstorageRead()",B),-2}finally{k.restore(p),r.scopedAllocPop(b)}},xWrite:(w,j,M)=>{const c=k.pointer;try{const p=m(w,j);if(!p)return 1;const b=r.cstrToJs(p);return x(w).setItem(b,r.cstrToJs(M)),0}catch(p){return console.error("kvstorageWrite()",p),n.SQLITE_IOERR}finally{k.restore(c)}},xDelete:(w,j)=>{const M=k.pointer;try{const c=m(w,j);return c?(x(w).removeItem(r.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),n.SQLITE_IOERR}finally{k.restore(M)}}};for(const w of Object.keys(C))h[h.memberKey(w)]=r.installFunction(h.memberSignature(w),C[w])}else n.sqlite3_vfs_unregister(G);r.xWrap.FuncPtrAdapter.warnOnUse=!0;const O=t.StructBinder,E=function h(m,k,x,C=h.installMethodArgcCheck){if(m instanceof O.StructType?!(x instanceof Function)&&!r.isPtr(x)&&i("Usage error: expecting a Function or WASM pointer to one."):i("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,p)=>h(m,c,p,C);h.argcProxy||(h.argcProxy=function(c,p,b,B){return function(...P){return b.length!==arguments.length&&i("Argument mismatch for",c.structInfo.name+"::"+p+": Native signature is:",B),b.apply(this,P)}},h.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,p)=>{if(typeof c=="number")try{r.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const w=m.memberSignature(k);w.length<2&&i("Member",k,"does not have a function pointer signature:",w);const j=m.memberKey(k),M=C&&!r.isPtr(x)?h.argcProxy(m,j,x,w):x;if(r.isPtr(M))M&&!r.functionEntry(M)&&i("Pointer",M,"is not a WASM function table entry."),m[j]=M;else{const c=r.installFunction(M,m.memberSignature(k,!0));m[j]=c,(!m.ondispose||!m.ondispose.__removeFuncList)&&(m.addOnDispose("ondispose.__removeFuncList handler",h.removeFuncList),m.ondispose.__removeFuncList=[]),m.ondispose.__removeFuncList.push(j,c)}return(c,p)=>h(m,c,p,C)};E.installMethodArgcCheck=!1;const U=function(h,m,k=E.installMethodArgcCheck){const x=new Map;for(const C of Object.keys(m)){const w=m[C],j=x.get(w);if(j){const M=h.memberKey(C);h[M]=h[h.memberKey(j)]}else E(h,C,w,k),x.set(w,C)}return h};O.StructType.prototype.installMethod=function(m,k,x=E.installMethodArgcCheck){return arguments.length<3&&m&&typeof m=="object"?U(this,...arguments):E(this,...arguments)},O.StructType.prototype.installMethods=function(h,m=E.installMethodArgcCheck){return U(this,h,m)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){t.version={libVersion:"3.50.4",libVersionNumber:3050004,sourceId:"2025-07-30 19:33:53 4d8adfb30e03f9cf27f800a2c1ba3c48fb4ca1b08b0f5ed59a4d5ecbf45e20a3",downloadVersion:3500400}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=(...s)=>{throw new t.SQLite3Error(...s)},n=t.capi,r=t.wasm,o=t.util,g=new WeakMap,y=new WeakMap,L=(s,a,d)=>{const u=Object.getOwnPropertyDescriptor(s,a);return u?u.value:d},D=function(s,a){return a&&(s instanceof h&&(s=s.pointer),i(a,"sqlite3 result code",a+":",s?n.sqlite3_errmsg(s):n.sqlite3_errstr(a))),arguments[0]},z=r.installFunction("i(ippp)",(function(s,a,d,u){n.SQLITE_TRACE_STMT===s&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+a+":",r.cstrToJs(u))}).bind({counter:0})),G=Object.create(null),O=function(s){s instanceof ArrayBuffer&&(s=new Uint8Array(s));const a=[],d="0123456789abcdef";for(const u of s)a.push(d[(u&240)>>4],d[u&15]);return a.join("")},E=function(s,a){if(!n.sqlite3_key_v2)return;let d,u;const A=(a.key?1:0)+(a.hexkey?1:0)+(a.textkey?1:0);if(A)A>1&&i(n.SQLITE_MISUSE,"Only ONE of (key, hexkey, textkey) may be provided.");else return;if(a.key)if(d="key",u=a.key,typeof u=="string"&&(u=new TextEncoder("utf-8").encode(u)),u instanceof ArrayBuffer||u instanceof Uint8Array)u=O(u),d="hexkey";else{i(n.SQLITE_MISUSE,"Invalid value for the 'key' option. Expecting a string,","ArrayBuffer, or Uint8Array.");return}else if(a.textkey)d="textkey",u=a.textkey,u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u instanceof Uint8Array?u=new TextDecoder("utf-8").decode(u):typeof u!="string"&&i(n.SQLITE_MISUSE,"Invalid value for the 'textkey' option. Expecting a string,","ArrayBuffer, or Uint8Array.");else if(a.hexkey)d="hexkey",u=a.hexkey,u instanceof ArrayBuffer||u instanceof Uint8Array?u=O(u):typeof u!="string"&&i(n.SQLITE_MISUSE,"Invalid value for the 'hexkey' option. Expecting a string,","ArrayBuffer, or Uint8Array.");else return;let W;try{return W=s.prepare("PRAGMA "+d+"="+o.sqlite3__wasm_qfmt_token(u,1)),W.step(),!0}finally{W&&W.finalize()}},U=function s(...a){if(!s._name2vfs){s._name2vfs=Object.create(null);const re=typeof importScripts=="function"?ie=>i("The VFS for",ie,"is only available in the main window thread."):!1;s._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:re||(()=>"local")},s._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:re||(()=>"session")}}const d=s.normalizeArgs(...a);let u=d.filename,A=d.vfs,W=d.flags;(typeof u!="string"&&typeof u!="number"||typeof W!="string"||A&&typeof A!="string"&&typeof A!="number")&&(t.config.error("Invalid DB ctor args",d,arguments),i("Invalid arguments for DB constructor."));let X=typeof u=="number"?r.cstrToJs(u):u;const oe=s._name2vfs[X];oe&&(A=oe.vfs,u=X=oe.filename(X));let te,le=0;W.indexOf("c")>=0&&(le|=n.SQLITE_OPEN_CREATE|n.SQLITE_OPEN_READWRITE),W.indexOf("w")>=0&&(le|=n.SQLITE_OPEN_READWRITE),le===0&&(le|=n.SQLITE_OPEN_READONLY),le|=n.SQLITE_OPEN_EXRESCODE;const ae=r.pstack.pointer;try{const re=r.pstack.allocPtr();let ie=n.sqlite3_open_v2(u,re,le,A||0);te=r.peekPtr(re),D(te,ie),n.sqlite3_extended_result_codes(te,1),W.indexOf("t")>=0&&n.sqlite3_trace_v2(te,n.SQLITE_TRACE_STMT,z,te)}catch(re){throw te&&n.sqlite3_close_v2(te),re}finally{r.pstack.restore(ae)}this.filename=X,g.set(this,te),y.set(this,Object.create(null));try{E(this,d);const re=n.sqlite3_js_db_vfs(te)||i("Internal error: cannot get VFS for new db handle."),ie=G[re];ie&&(ie instanceof Function?ie(this,t):D(te,n.sqlite3_exec(te,ie,0,0,0)))}catch(re){throw this.close(),re}};U.setVfsPostOpenCallback=function(s,a){a instanceof Function||i("dbCtorHelper.setVfsPostOpenCallback() should not be used with a non-function argument.",arguments),G[s]=a},U.normalizeArgs=function(s=":memory:",a="c",d=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=s,u.flags=a,u.vfs=d),u};const h=function(...s){U.apply(this,s)};h.dbCtorHelper=U;const m={null:1,number:2,string:3,boolean:4,blob:5};m.undefined==m.null,r.bigIntEnabled&&(m.bigint=m.number);const k=function(){m!==arguments[2]&&i(n.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],g.set(this,arguments[1]),this.parameterCount=n.sqlite3_bind_parameter_count(this.pointer)},x=function(s){return s.pointer||i("DB has been closed."),s},C=function(s,a){return(a!==(a|0)||a<0||a>=s.columnCount)&&i("Column index",a,"is out of range."),s},w=function(s,a){const d=Object.create(null);switch(d.opt=Object.create(null),a.length){case 1:typeof a[0]=="string"||o.isSQLableTypedArray(a[0])||Array.isArray(a[0])?d.sql=a[0]:a[0]&&typeof a[0]=="object"&&(d.opt=a[0],d.sql=d.opt.sql);break;case 2:d.sql=a[0],d.opt=a[1];break;default:i("Invalid argument count for exec().")}d.sql=o.flexibleString(d.sql),typeof d.sql!="string"&&i("Missing SQL argument or unsupported SQL value type.");const u=d.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),d.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),d.returnVal=()=>u.saveSql;break;case void 0:case"this":d.returnVal=()=>s;break;default:i("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),d.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":d.cbArg=(A,W)=>{W.columnNames||(W.columnNames=A.getColumnNames([]));const X=A.get([]),oe=Object.create(null);for(const te in W.columnNames)oe[W.columnNames[te]]=X[te];return oe};break;case"array":d.cbArg=A=>A.get([]);break;case"stmt":Array.isArray(u.resultRows)&&i("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),d.cbArg=A=>A;break;default:if(o.isInt32(u.rowMode)){d.cbArg=A=>A.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const A=u.rowMode.substr(1);d.cbArg=W=>{const X=W.get(Object.create(null))[A];return X===void 0?i(n.SQLITE_NOTFOUND,"exec(): unknown result column:",A):X};break}i("Invalid rowMode:",u.rowMode)}return d},j=(s,a,d,...u)=>{const A=s.prepare(a);try{const W=A.bind(d).step()?A.get(...u):void 0;return A.reset(),W}finally{A.finalize()}},M=(s,a,d,u)=>s.exec({sql:a,bind:d,rowMode:u,returnValue:"resultRows"});h.checkRc=(s,a)=>D(s,a),h.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return x(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const s=this.pointer;if(Object.keys(y.get(this)).forEach((a,d)=>{if(d&&d.pointer)try{d.finalize()}catch{}}),g.delete(this),y.delete(this),n.sqlite3_close_v2(s),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(s=!1,a=!1){const d=x(this).pointer;return s?a?n.sqlite3_total_changes64(d):n.sqlite3_total_changes(d):a?n.sqlite3_changes64(d):n.sqlite3_changes(d)},dbFilename:function(s="main"){return n.sqlite3_db_filename(x(this).pointer,s)},dbName:function(s=0){return n.sqlite3_db_name(x(this).pointer,s)},dbVfsName:function(s=0){let a;const d=n.sqlite3_js_db_vfs(x(this).pointer,s);if(d){const u=new n.sqlite3_vfs(d);try{a=r.cstrToJs(u.$zName)}finally{u.dispose()}}return a},prepare:function(s){x(this);const a=r.pstack.pointer;let d,u;try{d=r.pstack.alloc(8),h.checkRc(this,n.sqlite3_prepare_v2(this.pointer,s,-1,d,null)),u=r.peekPtr(d)}finally{r.pstack.restore(a)}u||i("Cannot prepare empty SQL.");const A=new k(this,u,m);return y.get(this)[u]=A,A},exec:function(){x(this);const s=w(this,arguments);if(!s.sql)return i("exec() requires an SQL string.");const a=s.opt,d=a.callback,u=Array.isArray(a.resultRows)?a.resultRows:void 0;let A,W=a.bind,X=!!(s.cbArg||a.columnNames||u);const oe=r.scopedAllocPush(),te=Array.isArray(a.saveSql)?a.saveSql:void 0;try{const le=o.isSQLableTypedArray(s.sql);let ae=le?s.sql.byteLength:r.jstrlen(s.sql);const re=r.scopedAlloc(2*r.ptrSizeof+(ae+1)),ie=re+r.ptrSizeof;let ce=ie+r.ptrSizeof;const ge=ce+ae;for(le?r.heap8().set(s.sql,ce):r.jstrcpy(s.sql,r.heap8(),ce,ae,!1),r.poke(ce+ae,0);ce&&r.peek(ce,"i8");){r.pokePtr([re,ie],0),h.checkRc(this,n.sqlite3_prepare_v3(this.pointer,ce,ae,0,re,ie));const me=r.peekPtr(re);if(ce=r.peekPtr(ie),ae=ge-ce,!!me){if(te&&te.push(n.sqlite3_sql(me).trim()),A=new k(this,me,m),W&&A.parameterCount&&(A.bind(W),W=null),X&&A.columnCount){let I=Array.isArray(a.columnNames)?0:1;if(X=!1,s.cbArg||u){const R=Object.create(null);for(;A.step();A._lockedByExec=!1){I++===0&&A.getColumnNames(R.columnNames=a.columnNames||[]),A._lockedByExec=!0;const N=s.cbArg(A,R);if(u&&u.push(N),d&&d.call(a,N,A)===!1)break}A._lockedByExec=!1}I===0&&A.getColumnNames(a.columnNames)}else A.step();A.reset().finalize(),A=null}}}finally{r.scopedAllocPop(oe),A&&(delete A._lockedByExec,A.finalize())}return s.returnVal()},createFunction:function(a,d,u){const A=R=>R instanceof Function;switch(arguments.length){case 1:u=a,a=u.name,d=u.xFunc||0;break;case 2:A(d)||(u=d,d=u.xFunc||0);break}u||(u={}),typeof a!="string"&&i("Invalid arguments: missing function name.");let W=u.xStep||0,X=u.xFinal||0;const oe=u.xValue||0,te=u.xInverse||0;let le;A(d)?(le=!1,(A(W)||A(X))&&i("Ambiguous arguments: scalar or aggregate?"),W=X=null):A(W)?(A(X)||i("Missing xFinal() callback for aggregate or window UDF."),d=null):A(X)?i("Missing xStep() callback for aggregate or window UDF."):i("Missing function-type properties."),le===!1?(A(oe)||A(te))&&i("xValue and xInverse are not permitted for non-window UDFs."):A(oe)?(A(te)||i("xInverse must be provided if xValue is."),le=!0):A(te)&&i("xValue must be provided if xInverse is.");const ae=u.pApp;ae!=null&&(typeof ae!="number"||!o.isInt32(ae))&&i("Invalid value for pApp property. Must be a legal WASM pointer value.");const re=u.xDestroy||0;re&&!A(re)&&i("xDestroy property must be a function.");let ie=0;L(u,"deterministic")&&(ie|=n.SQLITE_DETERMINISTIC),L(u,"directOnly")&&(ie|=n.SQLITE_DIRECTONLY),L(u,"innocuous")&&(ie|=n.SQLITE_INNOCUOUS),a=a.toLowerCase();const ce=d||W,ge=L(u,"arity"),me=typeof ge=="number"?ge:ce.length?ce.length-1:0;let I;return le?I=n.sqlite3_create_window_function(this.pointer,a,me,n.SQLITE_UTF8|ie,ae||0,W,X,oe,te,re):I=n.sqlite3_create_function_v2(this.pointer,a,me,n.SQLITE_UTF8|ie,ae||0,d,W,X,re),h.checkRc(this,I),this},selectValue:function(s,a,d){return j(this,s,a,0,d)},selectValues:function(s,a,d){const u=this.prepare(s),A=[];try{for(u.bind(a);u.step();)A.push(u.get(0,d));u.reset()}finally{u.finalize()}return A},selectArray:function(s,a){return j(this,s,a,[])},selectObject:function(s,a){return j(this,s,a,{})},selectArrays:function(s,a){return M(this,s,a,"array")},selectObjects:function(s,a){return M(this,s,a,"object")},openStatementCount:function(){return this.pointer?Object.keys(y.get(this)).length:0},transaction:function(s){let a="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&i(n.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),a+=" "+arguments[0],s=arguments[1]),x(this).exec(a);try{const d=s(this);return this.exec("COMMIT"),d}catch(d){throw this.exec("ROLLBACK"),d}},savepoint:function(s){x(this).exec("SAVEPOINT oo1");try{const a=s(this);return this.exec("RELEASE oo1"),a}catch(a){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),a}},checkRc:function(s){return D(this,s)}};const c=function(s){return s.pointer||i("Stmt has been closed."),s},p=function(s){let a=m[s==null?"null":typeof s];switch(a){case m.boolean:case m.null:case m.number:case m.string:return a;case m.bigint:if(r.bigIntEnabled)return a;default:return o.isBindableTypedArray(s)?m.blob:void 0}},b=function(s){return p(s)||i("Unsupported bind() argument type:",typeof s)},B=function(s,a){const d=typeof a=="number"?a:n.sqlite3_bind_parameter_index(s.pointer,a);return d===0||!o.isInt32(d)?i("Invalid bind() parameter name: "+a):(d<1||d>s.parameterCount)&&i("Bind index",a,"is out of range."),d},P=function(s,a){return s._lockedByExec&&i("Operation is illegal when statement is locked:",a),s},Q=function s(a,d,u,A){P(c(a),"bind()"),s._||(s._tooBigInt=X=>i("BigInt value is too big to store without precision loss:",X),s._={string:function(X,oe,te,le){const[ae,re]=r.allocCString(te,!0);return(le?n.sqlite3_bind_blob:n.sqlite3_bind_text)(X.pointer,oe,ae,re,n.SQLITE_WASM_DEALLOC)}}),b(A),d=B(a,d);let W=0;switch(A==null?m.null:u){case m.null:W=n.sqlite3_bind_null(a.pointer,d);break;case m.string:W=s._.string(a,d,A,!1);break;case m.number:{let X;o.isInt32(A)?X=n.sqlite3_bind_int:typeof A=="bigint"?o.bigIntFits64(A)?r.bigIntEnabled?X=n.sqlite3_bind_int64:o.bigIntFitsDouble(A)?(A=Number(A),X=n.sqlite3_bind_double):s._tooBigInt(A):s._tooBigInt(A):(A=Number(A),r.bigIntEnabled&&Number.isInteger(A)?X=n.sqlite3_bind_int64:X=n.sqlite3_bind_double),W=X(a.pointer,d,A);break}case m.boolean:W=n.sqlite3_bind_int(a.pointer,d,A?1:0);break;case m.blob:{if(typeof A=="string"){W=s._.string(a,d,A,!0);break}else A instanceof ArrayBuffer?A=new Uint8Array(A):o.isBindableTypedArray(A)||i("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const X=r.alloc(A.byteLength||1);r.heap8().set(A.byteLength?A:[0],X),W=n.sqlite3_bind_blob(a.pointer,d,X,A.byteLength,n.SQLITE_WASM_DEALLOC);break}default:t.config.warn("Unsupported bind() argument type:",A),i("Unsupported bind() argument type: "+typeof A)}return W&&h.checkRc(a.db.pointer,W),a._mayGet=!1,a};k.prototype={finalize:function(){if(this.pointer){P(this,"finalize()");const s=n.sqlite3_finalize(this.pointer);return delete y.get(this.db)[this.pointer],g.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,s}},clearBindings:function(){return P(c(this),"clearBindings()"),n.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(s){P(this,"reset()"),s&&this.clearBindings();const a=n.sqlite3_reset(c(this).pointer);return this._mayGet=!1,D(this.db,a),this},bind:function(){c(this);let s,a;switch(arguments.length){case 1:s=1,a=arguments[0];break;case 2:s=arguments[0],a=arguments[1];break;default:i("Invalid bind() arguments.")}return a===void 0?this:(this.parameterCount||i("This statement has no bindable parameters."),this._mayGet=!1,a===null?Q(this,s,m.null,a):Array.isArray(a)?(arguments.length!==1&&i("When binding an array, an index argument is not permitted."),a.forEach((d,u)=>Q(this,u+1,b(d),d)),this):(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),typeof a=="object"&&!o.isBindableTypedArray(a)?(arguments.length!==1&&i("When binding an object, an index argument is not permitted."),Object.keys(a).forEach(d=>Q(this,d,b(a[d]),a[d])),this):Q(this,s,b(a),a)))},bindAsBlob:function(s,a){c(this),arguments.length===1&&(a=s,s=1);const d=b(a);return m.string!==d&&m.blob!==d&&m.null!==d&&i("Invalid value type for bindAsBlob()"),Q(this,s,m.blob,a)},step:function(){P(this,"step()");const s=n.sqlite3_step(c(this).pointer);switch(s){case n.SQLITE_DONE:return this._mayGet=!1;case n.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,t.config.warn("sqlite3_step() rc=",s,n.sqlite3_js_rc_str(s),"SQL =",n.sqlite3_sql(this.pointer)),h.checkRc(this.db.pointer,s)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const s=this.step();return this.reset(),s}finally{try{this.finalize()}catch{}}},get:function(s,a){if(c(this)._mayGet||i("Stmt.step() has not (recently) returned true."),Array.isArray(s)){let d=0;const u=this.columnCount;for(;d<u;)s[d]=this.get(d++);return s}else if(s&&typeof s=="object"){let d=0;const u=this.columnCount;for(;d<u;)s[n.sqlite3_column_name(this.pointer,d)]=this.get(d++);return s}switch(C(this,s),a===void 0?n.sqlite3_column_type(this.pointer,s):a){case n.SQLITE_NULL:return null;case n.SQLITE_INTEGER:if(r.bigIntEnabled){const d=n.sqlite3_column_int64(this.pointer,s);return d>=Number.MIN_SAFE_INTEGER&&d<=Number.MAX_SAFE_INTEGER?Number(d).valueOf():d}else{const d=n.sqlite3_column_double(this.pointer,s);return(d>Number.MAX_SAFE_INTEGER||d<Number.MIN_SAFE_INTEGER)&&i("Integer is out of range for JS integer range: "+d),o.isInt32(d)?d|0:d}case n.SQLITE_FLOAT:return n.sqlite3_column_double(this.pointer,s);case n.SQLITE_TEXT:return n.sqlite3_column_text(this.pointer,s);case n.SQLITE_BLOB:{const d=n.sqlite3_column_bytes(this.pointer,s),u=n.sqlite3_column_blob(this.pointer,s),A=new Uint8Array(d);return d&&A.set(r.heap8u().slice(u,u+d),0),d&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(A.buffer),A}default:i("Don't know how to translate","type of result column #"+s+".")}i("Not reached.")},getInt:function(s){return this.get(s,n.SQLITE_INTEGER)},getFloat:function(s){return this.get(s,n.SQLITE_FLOAT)},getString:function(s){return this.get(s,n.SQLITE_TEXT)},getBlob:function(s){return this.get(s,n.SQLITE_BLOB)},getJSON:function(s){const a=this.get(s,n.SQLITE_STRING);return a===null?a:JSON.parse(a)},getColumnName:function(s){return n.sqlite3_column_name(C(c(this),s).pointer,s)},getColumnNames:function(s=[]){C(c(this),0);const a=this.columnCount;for(let d=0;d<a;++d)s.push(n.sqlite3_column_name(this.pointer,d));return s},getParamIndex:function(s){return c(this).parameterCount?n.sqlite3_bind_parameter_index(this.pointer,s):void 0},getParamName:function(s){return c(this).parameterCount?n.sqlite3_bind_parameter_name(this.pointer,s):void 0},isBusy:function(){return n.sqlite3_stmt_busy(c(this))!==0},isReadOnly:function(){return n.sqlite3_stmt_readonly(c(this))!==0}};{const s={enumerable:!0,get:function(){return g.get(this)},set:()=>i("The pointer property is read-only.")};Object.defineProperty(k.prototype,"pointer",s),Object.defineProperty(h.prototype,"pointer",s)}if(Object.defineProperty(k.prototype,"columnCount",{enumerable:!1,get:function(){return n.sqlite3_column_count(this.pointer)},set:()=>i("The columnCount property is read-only.")}),t.oo1={DB:h,Stmt:k},o.isUIThread()){t.oo1.JsStorageDb=function(a="session"){const d=U.normalizeArgs(...arguments);a=d.filename,a!=="session"&&a!=="local"&&i("JsStorageDb db name must be one of 'session' or 'local'."),d.vfs="kvvfs",U.call(this,d)};const s=t.oo1.JsStorageDb;s.prototype=Object.create(h.prototype),s.clearStorage=n.sqlite3_js_kvvfs_clear,s.prototype.clearStorage=function(){return s.clearStorage(x(this).filename)},s.storageSize=n.sqlite3_js_kvvfs_size,s.prototype.storageSize=function(){return s.storageSize(x(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=t.util;t.initWorker1API=(function(){const n=(...O)=>{throw new Error(O.join(" "))};globalThis.WorkerGlobalScope instanceof Function||n("initWorker1API() must be run from a Worker thread.");const r=this.sqlite3||n("Missing this.sqlite3 object."),o=r.oo1.DB,g=function(O){let E=y.idMap.get(O);return E||(E="db#"+ ++y.idSeq+"@"+O.pointer,y.idMap.set(O,E),E)},y={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(O){const E=new o(O);return this.dbs[g(E)]=E,this.dbList.indexOf(E)<0&&this.dbList.push(E),E},close:function(O,E){if(O){delete this.dbs[g(O)];const U=O.filename,h=i.sqlite3__wasm_db_vfs(O.pointer,0);O.close();const m=this.dbList.indexOf(O);m>=0&&this.dbList.splice(m,1),E&&U&&h&&i.sqlite3__wasm_vfs_unlink(h,U)}},post:function(O,E){E&&E.length?(globalThis.postMessage(O,Array.from(E)),E.length=0):globalThis.postMessage(O)},dbs:Object.create(null),getDb:function(O,E=!0){return this.dbs[O]||(E?n("Unknown (or closed) DB ID:",O):void 0)}},L=function(O=y.dbList[0]){return O&&O.pointer?O:n("DB is not opened.")},D=function(O,E=!0){const U=y.getDb(O.dbId,!1)||y.dbList[0];return E?L(U):U},z=function(){return y.dbList[0]&&g(y.dbList[0])},G={open:function(O){const E=Object.create(null),U=O.args||Object.create(null);U.simulateError&&n("Throwing because of simulateError flag.");const h=Object.create(null);E.vfs=U.vfs,E.filename=U.filename||"";const m=y.open(E);return h.filename=m.filename,h.persistent=!!r.capi.sqlite3_js_db_uses_vfs(m.pointer,"opfs"),h.dbId=g(m),h.vfs=m.dbVfsName(),h},close:function(O){const E=D(O,!1),U={filename:E&&E.filename};if(E){const h=O.args&&typeof O.args=="object"?!!O.args.unlink:!1;y.close(E,h)}return U},exec:function(O){const E=typeof O.args=="string"?{sql:O.args}:O.args||Object.create(null);E.rowMode==="stmt"?n("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):E.sql||n("'exec' requires input SQL.");const U=D(O);(E.callback||Array.isArray(E.resultRows))&&(U._blobXfer=y.xfer);const h=E.callback;let m=0;const k=!!E.columnNames;typeof h=="string"&&(k||(E.columnNames=[]),E.callback=function(x,C){y.post({type:h,columnNames:E.columnNames,rowNumber:++m,row:x},y.xfer)});try{const x=E.countChanges?U.changes(!0,E.countChanges===64):void 0;U.exec(E),x!==void 0&&(E.changeCount=U.changes(!0,E.countChanges===64)-x);const C=E.lastInsertRowId?r.capi.sqlite3_last_insert_rowid(U):void 0;C!==void 0&&(E.lastInsertRowId=C),E.callback instanceof Function&&(E.callback=h,y.post({type:h,columnNames:E.columnNames,rowNumber:null,row:void 0}))}finally{delete U._blobXfer,E.callback&&(E.callback=h)}return E},"config-get":function(){const O=Object.create(null),E=r.config;return["bigIntEnabled"].forEach(function(U){Object.getOwnPropertyDescriptor(E,U)&&(O[U]=E[U])}),O.version=r.version,O.vfsList=r.capi.sqlite3_js_vfs_list(),O},export:function(O){const E=D(O),U={byteArray:r.capi.sqlite3_js_db_export(E.pointer),filename:E.filename,mimetype:"application/x-sqlite3"};return y.xfer.push(U.byteArray.buffer),U},toss:function(O){n("Testing worker exception")}};globalThis.onmessage=async function(O){O=O.data;let E,U=O.dbId,h=O.type;const m=performance.now();try{G.hasOwnProperty(h)&&G[h]instanceof Function?E=await G[h](O):n("Unknown db worker message type:",O.type)}catch(k){h="error",E={operation:O.type,message:k.message,errorClass:k.name,input:O},k.stack&&(E.stack=typeof k.stack=="string"?k.stack.split(/\n\s*/):k.stack)}U||(U=E.dbId||z()),y.post({type:h,dbId:U,messageId:O.messageId,workerReceivedTime:m,workerRespondTime:performance.now(),departureTime:O.departureTime,result:E},y.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}).bind({sqlite3:t})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=t.wasm,n=t.capi,r=t.util.toss3,o=Object.create(null);t.vfs=o,n.sqlite3_vfs.prototype.registerVfs=function(g=!1){this instanceof t.capi.sqlite3_vfs||r("Expecting a sqlite3_vfs-type argument.");const y=n.sqlite3_vfs_register(this,g?1:0);return y&&r("sqlite3_vfs_register(",this,") failed with rc",y),this.pointer!==n.sqlite3_vfs_find(this.$zName)&&r("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},o.installVfs=function(g){let y=0;const L=["io","vfs"];for(const D of L){const z=g[D];z&&(++y,z.struct.installMethods(z.methods,!!z.applyArgcCheck),D==="vfs"&&(!z.struct.$zName&&typeof z.name=="string"&&z.struct.addOnDispose(z.struct.$zName=i.allocCString(z.name)),z.struct.registerVfs(!!z.asDefault)))}return y||r("Misuse: installVfs() options object requires at least","one of:",L),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){if(!t.wasm.exports.sqlite3_declare_vtab)return;const i=t.wasm,n=t.capi,r=t.util.toss3,o=Object.create(null);t.vtab=o;const g=n.sqlite3_index_info;g.prototype.nthConstraint=function(D,z=!1){if(D<0||D>=this.$nConstraint)return!1;const G=this.$aConstraint+g.sqlite3_index_constraint.structInfo.sizeof*D;return z?G:new g.sqlite3_index_constraint(G)},g.prototype.nthConstraintUsage=function(D,z=!1){if(D<0||D>=this.$nConstraint)return!1;const G=this.$aConstraintUsage+g.sqlite3_index_constraint_usage.structInfo.sizeof*D;return z?G:new g.sqlite3_index_constraint_usage(G)},g.prototype.nthOrderBy=function(D,z=!1){if(D<0||D>=this.$nOrderBy)return!1;const G=this.$aOrderBy+g.sqlite3_index_orderby.structInfo.sizeof*D;return z?G:new g.sqlite3_index_orderby(G)};const y=function(D,z){return(function(G,O=!1){if(arguments.length===0&&(G=new z),G instanceof z)return this.set(G.pointer,G),G;i.isPtr(G)||t.SQLite3Error.toss("Invalid argument to",D+"()");let E=this.get(G);return O&&this.delete(G),E}).bind(new Map)},L=function(D,z){const G=y(D,z);return Object.assign(Object.create(null),{StructType:z,create:O=>{const E=G();return i.pokePtr(O,E.pointer),E},get:O=>G(O),unget:O=>G(O,!0),dispose:O=>{const E=G(O,!0);E&&E.dispose()}})};o.xVtab=L("xVtab",n.sqlite3_vtab),o.xCursor=L("xCursor",n.sqlite3_vtab_cursor),o.xIndexInfo=D=>new n.sqlite3_index_info(D),o.xError=function D(z,G,O){if(D.errorReporter instanceof Function)try{D.errorReporter("sqlite3_module::"+z+"(): "+G.message)}catch{}let E;return G instanceof t.WasmAllocError?E=n.SQLITE_NOMEM:arguments.length>2?E=O:G instanceof t.SQLite3Error&&(E=G.resultCode),E||n.SQLITE_ERROR},o.xError.errorReporter=console.error.bind(console),o.xRowid=(D,z)=>i.poke(D,z,"i64"),o.setupModule=function(D){let z=!1;const G=this instanceof n.sqlite3_module?this:D.struct||(z=new n.sqlite3_module);try{const O=D.methods||r("Missing 'methods' object.");for(const E of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const U=E[0],h=E[1];O[U]===!0?O[U]=O[h]:O[h]===!0&&(O[h]=O[U])}if(D.catchExceptions){const E=function(m,k){return["xConnect","xCreate"].indexOf(m)>=0?function(x,C,w,j,M,c){try{return k(...arguments)||0}catch(p){return p instanceof t.WasmAllocError||(i.dealloc(i.peekPtr(c)),i.pokePtr(c,i.allocCString(p.message))),o.xError(m,p)}}:function(...x){try{return k(...x)||0}catch(C){return o.xError(m,C)}}},U=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],h=Object.create(null);for(const m of U){const k=O[m];if(k instanceof Function)m==="xConnect"&&O.xCreate===k?h[m]=O.xCreate:m==="xCreate"&&O.xConnect===k?h[m]=O.xConnect:h[m]=E(m,k);else continue}G.installMethods(h,!1)}else G.installMethods(O,!!D.applyArgcCheck);if(G.$iVersion===0){let E;typeof D.iVersion=="number"?E=D.iVersion:G.$xShadowName?E=3:G.$xSavePoint||G.$xRelease||G.$xRollbackTo?E=2:E=1,G.$iVersion=E}}catch(O){throw z&&z.dispose(),O}return G},n.sqlite3_module.prototype.setupModule=function(D){return o.setupModule.call(this,D)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){const i=function n(r){var y;if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((y=navigator==null?void 0:navigator.storage)!=null&&y.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));(!r||typeof r!="object")&&(r=Object.create(null));const o=new URL(globalThis.location.href).searchParams;return o.has("opfs-disable")?Promise.resolve(t):(r.verbose===void 0&&(r.verbose=o.has("opfs-verbose")?+o.get("opfs-verbose")||2:1),r.sanityChecks===void 0&&(r.sanityChecks=o.has("opfs-sanity-check")),r.proxyUri===void 0&&(r.proxyUri=n.defaultProxyUri),typeof r.proxyUri=="function"&&(r.proxyUri=r.proxyUri()),new Promise(function(L,D){const z=[t.config.error,t.config.warn,t.config.log],G=(I,...R)=>{r.verbose>I&&z[I]("OPFS syncer:",...R)},O=(...I)=>G(2,...I),E=(...I)=>G(1,...I),U=(...I)=>G(0,...I),h=t.util.toss,m=t.capi,k=t.util,x=t.wasm,C=m.sqlite3_vfs,w=m.sqlite3_file,j=m.sqlite3_io_methods,M=Object.create(null),c=()=>{var I;return globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&((I=navigator==null?void 0:navigator.storage)==null?void 0:I.getDirectory)};M.metrics={dump:function(){let I,R=0,N=0,K=0;for(I in u.opIds){const V=A[I];R+=V.count,N+=V.time,K+=V.wait,V.avgTime=V.count&&V.time?V.time/V.count:0,V.avgWait=V.count&&V.wait?V.wait/V.count:0}t.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",A,`
Total of`,R,"op(s) for",N,"ms (incl. "+K+" ms of waiting on the async side)"),t.config.log("Serialization metrics:",A.s11n),s.postMessage({type:"opfs-async-metrics"})},reset:function(){let I;const R=K=>K.count=K.time=K.wait=0;for(I in u.opIds)R(A[I]=Object.create(null));let N=A.s11n=Object.create(null);N=N.serialize=Object.create(null),N.count=N.time=0,N=A.s11n.deserialize=Object.create(null),N.count=N.time=0}};const p=new j,b=new C().addOnDispose(()=>p.dispose());let B;const P=I=>(B=!0,b.dispose(),D(I)),Q=()=>(B=!1,L(t)),s=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-DZdsd1Kz.js",self.location.href));setTimeout(()=>{B===void 0&&P(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),s._originalOnError=s.onerror,s.onerror=function(I){U("Error initializing OPFS asyncer:",I),P(new Error("Loading OPFS async Worker failed for unknown reasons."))};const a=m.sqlite3_vfs_find(null),d=a?new C(a):null;p.$iVersion=1,b.$iVersion=2,b.$szOsFile=m.sqlite3_file.structInfo.sizeof,b.$mxPathname=1024,b.$zName=x.allocCString("opfs"),b.$xDlOpen=b.$xDlError=b.$xDlSym=b.$xDlClose=null,b.addOnDispose("$zName",b.$zName,"cleanup default VFS wrapper",()=>d?d.dispose():null);const u=Object.create(null);u.verbose=r.verbose,u.littleEndian=(()=>{const I=new ArrayBuffer(2);return new DataView(I).setInt16(0,256,!0),new Int16Array(I)[0]===256})(),u.asyncIdleWaitTime=150,u.asyncS11nExceptions=1,u.fileBufferSize=1024*64,u.sabS11nOffset=u.fileBufferSize,u.sabS11nSize=b.$mxPathname*2,u.sabIO=new SharedArrayBuffer(u.fileBufferSize+u.sabS11nSize),u.opIds=Object.create(null);const A=Object.create(null);{let I=0;u.opIds.whichOp=I++,u.opIds.rc=I++,u.opIds.xAccess=I++,u.opIds.xClose=I++,u.opIds.xDelete=I++,u.opIds.xDeleteNoWait=I++,u.opIds.xFileSize=I++,u.opIds.xLock=I++,u.opIds.xOpen=I++,u.opIds.xRead=I++,u.opIds.xSleep=I++,u.opIds.xSync=I++,u.opIds.xTruncate=I++,u.opIds.xUnlock=I++,u.opIds.xWrite=I++,u.opIds.mkdir=I++,u.opIds["opfs-async-metrics"]=I++,u.opIds["opfs-async-shutdown"]=I++,u.opIds.retry=I++,u.sabOP=new SharedArrayBuffer(I*4),M.metrics.reset()}u.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_CANTOPEN","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(I=>{(u.sq3Codes[I]=m[I])===void 0&&h("Maintenance required: not found:",I)}),u.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const W=(I,...R)=>{const N=u.opIds[I]||h("Invalid op ID:",I);u.s11n.serialize(...R),Atomics.store(u.sabOPView,u.opIds.rc,-1),Atomics.store(u.sabOPView,u.opIds.whichOp,N),Atomics.notify(u.sabOPView,u.opIds.whichOp);const K=performance.now();for(;Atomics.wait(u.sabOPView,u.opIds.rc,-1)!=="not-equal";);const V=Atomics.load(u.sabOPView,u.opIds.rc);if(A[I].wait+=performance.now()-K,V&&u.asyncS11nExceptions){const Z=u.s11n.deserialize();Z&&U(I+"() async error:",...Z)}return V};M.debug={asyncShutdown:()=>{E("Shutting down OPFS async listener. The OPFS VFS will no longer work."),W("opfs-async-shutdown")},asyncRestart:()=>{E("Attempting to restart OPFS VFS async listener. Might work, might not."),s.postMessage({type:"opfs-async-restart"})}};const X=()=>{if(u.s11n)return u.s11n;const I=new TextDecoder,R=new TextEncoder("utf-8"),N=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),K=new DataView(u.sabIO,u.sabS11nOffset,u.sabS11nSize);u.s11n=Object.create(null);const V=Object.create(null);V.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},V.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},V.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},V.string={id:4};const Z=F=>V[typeof F]||h("Maintenance required: this value type cannot be serialized.",F),Y=F=>{switch(F){case V.number.id:return V.number;case V.bigint.id:return V.bigint;case V.boolean.id:return V.boolean;case V.string.id:return V.string;default:h("Invalid type ID:",F)}};return u.s11n.deserialize=function(F=!1){++A.s11n.deserialize.count;const f=performance.now(),q=N[0],S=q?[]:null;if(q){const T=[];let H=1,J,ee,_e;for(J=0;J<q;++J,++H)T.push(Y(N[H]));for(J=0;J<q;++J){const qe=T[J];qe.getter?(_e=K[qe.getter](H,u.littleEndian),H+=qe.size):(ee=K.getInt32(H,u.littleEndian),H+=4,_e=I.decode(N.slice(H,H+ee)),H+=ee),S.push(_e)}}return F&&(N[0]=0),A.s11n.deserialize.time+=performance.now()-f,S},u.s11n.serialize=function(...F){const f=performance.now();if(++A.s11n.serialize.count,F.length){const q=[];let S=0,T=1;for(N[0]=F.length&255;S<F.length;++S,++T)q.push(Z(F[S])),N[T]=q[S].id;for(S=0;S<F.length;++S){const H=q[S];if(H.setter)K[H.setter](T,F[S],u.littleEndian),T+=H.size;else{const J=R.encode(F[S]);K.setInt32(T,J.byteLength,u.littleEndian),T+=4,N.set(J,T),T+=J.byteLength}}}else N[0]=0;A.s11n.serialize.time+=performance.now()-f},u.s11n},oe=function I(R=16){I._chars||(I._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",I._n=I._chars.length);const N=[];let K=0;for(;K<R;++K){const V=Math.random()*(I._n*64)%I._n|0;N[K]=I._chars[V]}return N.join("")},te=Object.create(null),le=Object.create(null);le.op=void 0,le.start=void 0;const ae=I=>{le.start=performance.now(),le.op=I,++A[I].count},re=()=>A[le.op].time+=performance.now()-le.start,ie={xCheckReservedLock:function(I,R){return x.poke(R,0,"i32"),0},xClose:function(I){ae("xClose");let R=0;const N=te[I];return N&&(delete te[I],R=W("xClose",I),N.sq3File&&N.sq3File.dispose()),re(),R},xDeviceCharacteristics:function(I){return m.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(I,R,N){return m.SQLITE_NOTFOUND},xFileSize:function(I,R){ae("xFileSize");let N=W("xFileSize",I);if(N==0)try{const K=u.s11n.deserialize()[0];x.poke(R,K,"i64")}catch(K){U("Unexpected error reading xFileSize() result:",K),N=u.sq3Codes.SQLITE_IOERR}return re(),N},xLock:function(I,R){ae("xLock");const N=te[I];let K=0;return N.lockType?N.lockType=R:(K=W("xLock",I,R),K===0&&(N.lockType=R)),re(),K},xRead:function(I,R,N,K){ae("xRead");const V=te[I];let Z;try{Z=W("xRead",I,N,Number(K)),(Z===0||m.SQLITE_IOERR_SHORT_READ===Z)&&x.heap8u().set(V.sabView.subarray(0,N),R)}catch(Y){U("xRead(",arguments,") failed:",Y,V),Z=m.SQLITE_IOERR_READ}return re(),Z},xSync:function(I,R){ae("xSync"),++A.xSync.count;const N=W("xSync",I,R);return re(),N},xTruncate:function(I,R){ae("xTruncate");const N=W("xTruncate",I,Number(R));return re(),N},xUnlock:function(I,R){ae("xUnlock");const N=te[I];let K=0;return m.SQLITE_LOCK_NONE===R&&N.lockType&&(K=W("xUnlock",I,R)),K===0&&(N.lockType=R),re(),K},xWrite:function(I,R,N,K){ae("xWrite");const V=te[I];let Z;try{V.sabView.set(x.heap8u().subarray(R,R+N)),Z=W("xWrite",I,N,Number(K))}catch(Y){U("xWrite(",arguments,") failed:",Y,V),Z=m.SQLITE_IOERR_WRITE}return re(),Z}},ce={xAccess:function(I,R,N,K){ae("xAccess");const V=W("xAccess",x.cstrToJs(R));return x.poke(K,V?0:1,"i32"),re(),0},xCurrentTime:function(I,R){return x.poke(R,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(I,R){return x.poke(R,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(I,R,N){ae("xDelete");const K=W("xDelete",x.cstrToJs(R),N,!1);return re(),K},xFullPathname:function(I,R,N,K){return x.cstrncpy(K,R,N)<N?0:m.SQLITE_CANTOPEN},xGetLastError:function(I,R,N){return E("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(R,N,K,V,Z){ae("xOpen");let Y=0;N===0?N=oe():x.isPtr(N)&&(m.sqlite3_uri_boolean(N,"opfs-unlock-asap",0)&&(Y|=u.opfsFlags.OPFS_UNLOCK_ASAP),m.sqlite3_uri_boolean(N,"delete-before-open",0)&&(Y|=u.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),N=x.cstrToJs(N));const F=Object.create(null);F.fid=K,F.filename=N,F.sab=new SharedArrayBuffer(u.fileBufferSize),F.flags=V,F.readOnly=!(t.SQLITE_OPEN_CREATE&V)&&!!(V&m.SQLITE_OPEN_READONLY);const f=W("xOpen",K,N,V,Y);return f||(F.readOnly&&x.poke(Z,m.SQLITE_OPEN_READONLY,"i32"),te[K]=F,F.sabView=u.sabFileBufView,F.sq3File=new w(K),F.sq3File.$pMethods=p.pointer,F.lockType=m.SQLITE_LOCK_NONE),re(),f}};d&&(b.$xRandomness=d.$xRandomness,b.$xSleep=d.$xSleep),b.$xRandomness||(ce.xRandomness=function(I,R,N){const K=x.heap8u();let V=0;for(;V<R;++V)K[N+V]=Math.random()*255e3&255;return V}),b.$xSleep||(ce.xSleep=function(I,R){return Atomics.wait(u.sabOPView,u.opIds.xSleep,0,R),0}),M.getResolvedPath=function(I,R){const N=new URL(I,"file://irrelevant").pathname;return R?N.split("/").filter(K=>!!K):N},M.getDirForFilename=async function(R,N=!1){const K=M.getResolvedPath(R,!0),V=K.pop();let Z=M.rootDirectory;for(const Y of K)Y&&(Z=await Z.getDirectoryHandle(Y,{create:!!N}));return[Z,V]},M.mkdir=async function(I){try{return await M.getDirForFilename(I+"/filepart",!0),!0}catch{return!1}},M.entryExists=async function(I){try{const[R,N]=await M.getDirForFilename(I);return await R.getFileHandle(N),!0}catch{return!1}},M.randomFilename=oe,M.treeList=async function(){const I=async function N(K,V){V.name=K.name,V.dirs=[],V.files=[];for await(const Z of K.values())if(Z.kind==="directory"){const Y=Object.create(null);V.dirs.push(Y),await N(Z,Y)}else V.files.push(Z.name)},R=Object.create(null);return await I(M.rootDirectory,R),R},M.rmfr=async function(){const I=M.rootDirectory,R={recurse:!0};for await(const N of I.values())I.removeEntry(N.name,R)},M.unlink=async function(I,R=!1,N=!1){try{const[K,V]=await M.getDirForFilename(I,!1);return await K.removeEntry(V,{recursive:R}),!0}catch(K){if(N)throw new Error("unlink(",arguments[0],") failed: "+K.message,{cause:K});return!1}},M.traverse=async function(I){const R={recursive:!0,directory:M.rootDirectory};typeof I=="function"&&(I={callback:I}),I=Object.assign(R,I||{}),async function K(V,Z){for await(const Y of V.values()){if(I.callback(Y,V,Z)===!1)return!1;if(I.recursive&&Y.kind==="directory"&&await K(Y,Z+1)===!1)break}}(I.directory,0)};const ge=async function(I,R){const[N,K]=await M.getDirForFilename(I,!0);let Z=await(await N.getFileHandle(K,{create:!0})).createSyncAccessHandle(),Y=0,F,f=!1;try{for(Z.truncate(0);(F=await R())!==void 0;)F instanceof ArrayBuffer&&(F=new Uint8Array(F)),Y===0&&F.byteLength>=15&&(k.affirmDbHeader(F),f=!0),Z.write(F,{at:Y}),Y+=F.byteLength;if((Y<512||Y%512!==0)&&h("Input size",Y,"is not correct for an SQLite database."),!f){const q=new Uint8Array(20);Z.read(q,{at:0}),k.affirmDbHeader(q)}return Z.write(new Uint8Array([1,1]),{at:18}),Y}catch(q){throw await Z.close(),Z=void 0,await N.removeEntry(K).catch(()=>{}),q}finally{Z&&await Z.close()}};if(M.importDb=async function(I,R){if(R instanceof Function)return ge(I,R);R instanceof ArrayBuffer&&(R=new Uint8Array(R)),k.affirmIsDb(R);const N=R.byteLength,[K,V]=await M.getDirForFilename(I,!0);let Z,Y=0;try{return Z=await(await K.getFileHandle(V,{create:!0})).createSyncAccessHandle(),Z.truncate(0),Y=Z.write(R,{at:0}),Y!=N&&h("Expected to write "+N+" bytes but wrote "+Y+"."),Z.write(new Uint8Array([1,1]),{at:18}),Y}catch(F){throw Z&&(await Z.close(),Z=void 0),await K.removeEntry(V).catch(()=>{}),F}finally{Z&&await Z.close()}},t.oo1){const I=function(...R){const N=t.oo1.DB.dbCtorHelper.normalizeArgs(...R);N.vfs=b.$zName,t.oo1.DB.dbCtorHelper.call(this,N)};I.prototype=Object.create(t.oo1.DB.prototype),t.oo1.OpfsDb=I,I.importDb=M.importDb,t.oo1.DB.dbCtorHelper.setVfsPostOpenCallback(b.pointer,function(R,N){N.capi.sqlite3_busy_timeout(R,1e4)})}const me=function(){const I=x.scopedAllocPush(),R=new w;try{const N=R.pointer,K=m.SQLITE_OPEN_CREATE|m.SQLITE_OPEN_READWRITE|m.SQLITE_OPEN_MAIN_DB,V=x.scopedAlloc(8),Z="/sanity/check/file"+oe(8),Y=x.scopedAllocCString(Z);let F;if(u.s11n.serialize("This is  string."),F=u.s11n.deserialize(),O("deserialize() says:",F),F[0]!=="This is  string."&&h("String d13n error."),ce.xAccess(b.pointer,Y,0,V),F=x.peek(V,"i32"),O("xAccess(",Z,") exists ?=",F),F=ce.xOpen(b.pointer,Y,N,K,V),O("open rc =",F,"state.sabOPView[xOpen] =",u.sabOPView[u.opIds.xOpen]),F!==0){U("open failed with code",F);return}ce.xAccess(b.pointer,Y,0,V),F=x.peek(V,"i32"),F||h("xAccess() failed to detect file."),F=ie.xSync(R.pointer,0),F&&h("sync failed w/ rc",F),F=ie.xTruncate(R.pointer,1024),F&&h("truncate failed w/ rc",F),x.poke(V,0,"i64"),F=ie.xFileSize(R.pointer,V),F&&h("xFileSize failed w/ rc",F),O("xFileSize says:",x.peek(V,"i64")),F=ie.xWrite(R.pointer,Y,10,1),F&&h("xWrite() failed!");const f=x.scopedAlloc(16);F=ie.xRead(R.pointer,f,6,2),x.poke(f+6,0);let q=x.cstrToJs(f);O("xRead() got:",q),q!=="sanity"&&h("Unexpected xRead() value."),ce.xSleep&&(O("xSleep()ing before close()ing..."),ce.xSleep(b.pointer,2e3),O("waking up from xSleep()")),F=ie.xClose(N),O("xClose rc =",F,"sabOPView =",u.sabOPView),O("Deleting file:",Z),ce.xDelete(b.pointer,Y,4660),ce.xAccess(b.pointer,Y,0,V),F=x.peek(V,"i32"),F&&h("Expecting 0 from xAccess(",Z,") after xDelete()."),E("End of OPFS sanity checks.")}finally{R.dispose(),x.scopedAllocPop(I)}};s.onmessage=function({data:I}){switch(I.type){case"opfs-unavailable":P(new Error(I.payload.join(" ")));break;case"opfs-async-loaded":s.postMessage({type:"opfs-async-init",args:u});break;case"opfs-async-inited":{if(B===!0)break;try{t.vfs.installVfs({io:{struct:p,methods:ie},vfs:{struct:b,methods:ce}}),u.sabOPView=new Int32Array(u.sabOP),u.sabFileBufView=new Uint8Array(u.sabIO,0,u.fileBufferSize),u.sabS11nView=new Uint8Array(u.sabIO,u.sabS11nOffset,u.sabS11nSize),X(),r.sanityChecks&&(E("Running sanity checks because of opfs-sanity-check URL arg..."),me()),c()?navigator.storage.getDirectory().then(R=>{s.onerror=s._originalOnError,delete s._originalOnError,t.opfs=M,M.rootDirectory=R,O("End of OPFS sqlite3_vfs setup.",b),Q()}).catch(P):Q()}catch(R){U(R),P(R)}break}default:{const R="Unexpected message from the OPFS async worker: "+JSON.stringify(I);U(R),P(new Error(R));break}}}}))};i.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async n=>{try{let r=i.defaultProxyUri;return n.scriptInfo.sqlite3Dir&&(i.defaultProxyUri=n.scriptInfo.sqlite3Dir+r),i().catch(o=>{n.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",o.message)})}catch(r){return n.config.error("installOpfsVfs() exception:",r),Promise.reject(r)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(t){var le,ae,re,ie,ce,ge,me,I,R,N,K,V,it,Y;const i=t.util.toss,n=t.util.toss3,r=Object.create(null),o=t.capi,g=t.util,y=t.wasm,L=4096,D=512,z=4,G=8,O=D+z,E=D,U=O,h=L,m=o.SQLITE_OPEN_MAIN_DB|o.SQLITE_OPEN_MAIN_JOURNAL|o.SQLITE_OPEN_SUPER_JOURNAL|o.SQLITE_OPEN_WAL,k=o.SQLITE_OPEN_MEMORY,x=".opaque",C=()=>Math.random().toString(36).slice(2),w=new TextDecoder,j=new TextEncoder,M=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2,forceReinitIfPreviouslyFailed:!1}),c=[t.config.error,t.config.warn,t.config.log];t.config.log;const p=t.config.warn;t.config.error;const b=new Map,B=F=>b.get(F),P=(F,f)=>{f?b.set(F,f):b.delete(F)},Q=new Map,s=F=>Q.get(F),a=(F,f)=>{f?Q.set(F,f):Q.delete(F)},d={xCheckReservedLock:function(F,f){const q=s(F);return q.log("xCheckReservedLock"),q.storeErr(),y.poke32(f,1),0},xClose:function(F){const f=s(F);f.storeErr();const q=f.getOFileForS3File(F);if(q)try{f.log(`xClose ${q.path}`),f.mapS3FileToOFile(F,!1),q.sah.flush(),q.flags&o.SQLITE_OPEN_DELETEONCLOSE&&f.deletePath(q.path)}catch(S){return f.storeErr(S,o.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(F){return o.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(F,f,q){return o.SQLITE_NOTFOUND},xFileSize:function(F,f){const q=s(F);q.log("xFileSize");const T=q.getOFileForS3File(F).sah.getSize()-h;return y.poke64(f,BigInt(T)),0},xLock:function(F,f){const q=s(F);q.log(`xLock ${f}`),q.storeErr();const S=q.getOFileForS3File(F);return S.lockType=f,0},xRead:function(F,f,q,S){const T=s(F);T.storeErr();const H=T.getOFileForS3File(F);T.log(`xRead ${H.path} ${q} @ ${S}`);try{const J=H.sah.read(y.heap8u().subarray(f,f+q),{at:h+Number(S)});return J<q?(y.heap8u().fill(0,f+J,f+q),o.SQLITE_IOERR_SHORT_READ):0}catch(J){return T.storeErr(J,o.SQLITE_IOERR)}},xSectorSize:function(F){return L},xSync:function(F,f){const q=s(F);q.log(`xSync ${f}`),q.storeErr();const S=q.getOFileForS3File(F);try{return S.sah.flush(),0}catch(T){return q.storeErr(T,o.SQLITE_IOERR)}},xTruncate:function(F,f){const q=s(F);q.log(`xTruncate ${f}`),q.storeErr();const S=q.getOFileForS3File(F);try{return S.sah.truncate(h+Number(f)),0}catch(T){return q.storeErr(T,o.SQLITE_IOERR)}},xUnlock:function(F,f){const q=s(F);q.log("xUnlock");const S=q.getOFileForS3File(F);return S.lockType=f,0},xWrite:function(F,f,q,S){const T=s(F);T.storeErr();const H=T.getOFileForS3File(F);T.log(`xWrite ${H.path} ${q} ${S}`);try{const J=H.sah.write(y.heap8u().subarray(f,f+q),{at:h+Number(S)});return q===J?0:i("Unknown write() failure.")}catch(J){return T.storeErr(J,o.SQLITE_IOERR)}}},u=new o.sqlite3_io_methods;u.$iVersion=1,t.vfs.installVfs({io:{struct:u,methods:d}});const A={xAccess:function(F,f,q,S){const T=B(F);T.storeErr();try{const H=T.getPath(f);y.poke32(S,T.hasFilename(H)?1:0)}catch{y.poke32(S,0)}return 0},xCurrentTime:function(F,f){return y.poke(f,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(F,f){return y.poke(f,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(F,f,q){const S=B(F);S.log(`xDelete ${y.cstrToJs(f)}`),S.storeErr();try{return S.deletePath(S.getPath(f)),0}catch(T){return S.storeErr(T),o.SQLITE_IOERR_DELETE}},xFullPathname:function(F,f,q,S){return y.cstrncpy(S,f,q)<q?0:o.SQLITE_CANTOPEN},xGetLastError:function(F,f,q){const S=B(F),T=S.popErr();if(S.log(`xGetLastError ${f} e =`,T),T){const H=y.scopedAllocPush();try{const[J,ee]=y.scopedAllocCString(T.message,!0);y.cstrncpy(q,J,f),ee>f&&y.poke8(q+f-1,0)}catch{return o.SQLITE_NOMEM}finally{y.scopedAllocPop(H)}}return T?T.sqlite3Rc||o.SQLITE_IOERR:0},xOpen:function(f,q,S,T,H){const J=B(f);try{T&=~k,J.log(`xOpen ${y.cstrToJs(q)} ${T}`);const ee=q&&y.peek8(q)?J.getPath(q):C();let _e=J.getSAHForPath(ee);!_e&&T&o.SQLITE_OPEN_CREATE&&(J.getFileCount()<J.getCapacity()?(_e=J.nextAvailableSAH(),J.setAssociatedPath(_e,ee,T)):i("SAH pool is full. Cannot create file",ee)),_e||i("file not found:",ee);const qe={path:ee,flags:T,sah:_e};J.mapS3FileToOFile(S,qe),qe.lockType=o.SQLITE_LOCK_NONE;const ye=new o.sqlite3_file(S);return ye.$pMethods=u.pointer,ye.dispose(),y.poke32(H,T),0}catch(ee){return J.storeErr(ee),o.SQLITE_CANTOPEN}}},W=function(F){t.capi.sqlite3_vfs_find(F)&&n("VFS name is already registered:",F);const f=new o.sqlite3_vfs,q=o.sqlite3_vfs_find(null),S=q?new o.sqlite3_vfs(q):null;return f.$iVersion=2,f.$szOsFile=o.sqlite3_file.structInfo.sizeof,f.$mxPathname=D,f.addOnDispose(f.$zName=y.allocCString(F),()=>P(f.pointer,0)),S&&(f.$xRandomness=S.$xRandomness,f.$xSleep=S.$xSleep,S.dispose()),!f.$xRandomness&&!A.xRandomness&&(A.xRandomness=function(T,H,J){const ee=y.heap8u();let _e=0;for(;_e<H;++_e)ee[J+_e]=Math.random()*255e3&255;return _e}),!f.$xSleep&&!A.xSleep&&(A.xSleep=(T,H)=>0),t.vfs.installVfs({vfs:{struct:f,methods:A}}),f};class X{constructor(f=Object.create(null)){we(this,V);Ee(this,"vfsDir");we(this,le);we(this,ae);we(this,re);we(this,ie,new Map);we(this,ce,new Map);we(this,ge,new Set);we(this,me,new Map);we(this,I,new Uint8Array(O));we(this,R);we(this,N);we(this,K);Ie(this,K,f.verbosity??M.verbosity),this.vfsName=f.name||M.name,Ie(this,N,W(this.vfsName)),P($(this,N).pointer,this),this.vfsDir=f.directory||"."+this.vfsName,Ie(this,R,new DataView($(this,I).buffer,$(this,I).byteOffset)),this.isReady=this.reset(!!(f.clearOnInit??M.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(f.initialCapacity||M.initialCapacity)})}log(...f){rt(this,V,it).call(this,2,...f)}warn(...f){rt(this,V,it).call(this,1,...f)}error(...f){rt(this,V,it).call(this,0,...f)}getVfs(){return $(this,N)}getCapacity(){return $(this,ie).size}getFileCount(){return $(this,ce).size}getFileNames(){const f=[];for(const q of $(this,ce).keys())f.push(q);return f}async addCapacity(f){for(let q=0;q<f;++q){const S=C(),H=await(await $(this,ae).getFileHandle(S,{create:!0})).createSyncAccessHandle();$(this,ie).set(H,S),this.setAssociatedPath(H,"",0)}return this.getCapacity()}async reduceCapacity(f){let q=0;for(const S of Array.from($(this,ge))){if(q===f||this.getFileCount()===this.getCapacity())break;const T=$(this,ie).get(S);S.close(),await $(this,ae).removeEntry(T),$(this,ie).delete(S),$(this,ge).delete(S),++q}return q}releaseAccessHandles(){for(const f of $(this,ie).keys())f.close();$(this,ie).clear(),$(this,ce).clear(),$(this,ge).clear()}async acquireAccessHandles(f=!1){const q=[];for await(const[S,T]of $(this,ae))T.kind==="file"&&q.push([S,T]);return Promise.all(q.map(async([S,T])=>{try{const H=await T.createSyncAccessHandle();if($(this,ie).set(H,S),f)H.truncate(h),this.setAssociatedPath(H,"",0);else{const J=this.getAssociatedPath(H);J?$(this,ce).set(J,H):$(this,ge).add(H)}}catch(H){throw this.storeErr(H),this.releaseAccessHandles(),H}}))}getAssociatedPath(f){f.read($(this,I),{at:0});const q=$(this,R).getUint32(E);if($(this,I)[0]&&(q&o.SQLITE_OPEN_DELETEONCLOSE||!(q&m)))return p(`Removing file with unexpected flags ${q.toString(16)}`,$(this,I)),this.setAssociatedPath(f,"",0),"";const S=new Uint32Array(G/4);f.read(S,{at:U});const T=this.computeDigest($(this,I),q);if(S.every((H,J)=>H===T[J])){const H=$(this,I).findIndex(J=>J===0);return H===0&&f.truncate(h),H?w.decode($(this,I).subarray(0,H)):""}else return p("Disassociating file with bad digest."),this.setAssociatedPath(f,"",0),""}setAssociatedPath(f,q,S){const T=j.encodeInto(q,$(this,I));D<=T.written+1&&i("Path too long:",q),q&&S&&(S|=k),$(this,I).fill(0,T.written,D),$(this,R).setUint32(E,S);const H=this.computeDigest($(this,I),S);f.write($(this,I),{at:0}),f.write(H,{at:U}),f.flush(),q?($(this,ce).set(q,f),$(this,ge).delete(f)):(f.truncate(h),$(this,ge).add(f))}computeDigest(f,q){if(q&k){let S=3735928559,T=1103547991;for(const H of f)S=Math.imul(S^H,2654435761),T=Math.imul(T^H,104729);return new Uint32Array([S>>>0,T>>>0])}else return new Uint32Array([0,0])}async reset(f){await this.isReady;let q=await navigator.storage.getDirectory(),S;for(const T of this.vfsDir.split("/"))T&&(S=q,q=await q.getDirectoryHandle(T,{create:!0}));return Ie(this,le,q),Ie(this,re,S),Ie(this,ae,await $(this,le).getDirectoryHandle(x,{create:!0})),this.releaseAccessHandles(),this.acquireAccessHandles(f)}getPath(f){return y.isPtr(f)&&(f=y.cstrToJs(f)),(f instanceof URL?f:new URL(f,"file://localhost/")).pathname}deletePath(f){const q=$(this,ce).get(f);return q&&($(this,ce).delete(f),this.setAssociatedPath(q,"",0)),!!q}storeErr(f,q){return f&&(f.sqlite3Rc=q||o.SQLITE_IOERR,this.error(f)),this.$error=f,q}popErr(){const f=this.$error;return this.$error=void 0,f}nextAvailableSAH(){const[f]=$(this,ge).keys();return f}getOFileForS3File(f){return $(this,me).get(f)}mapS3FileToOFile(f,q){q?($(this,me).set(f,q),a(f,this)):($(this,me).delete(f),a(f,!1))}hasFilename(f){return $(this,ce).has(f)}getSAHForPath(f){return $(this,ce).get(f)}async removeVfs(){if(!$(this,N).pointer||!$(this,ae))return!1;o.sqlite3_vfs_unregister($(this,N).pointer),$(this,N).dispose(),delete r[this.vfsName];try{this.releaseAccessHandles(),await $(this,le).removeEntry(x,{recursive:!0}),Ie(this,ae,void 0),await $(this,re).removeEntry($(this,le).name,{recursive:!0}),Ie(this,le,Ie(this,re,void 0))}catch(f){t.config.error(this.vfsName,"removeVfs() failed with no recovery strategy:",f)}return!0}pauseVfs(){return $(this,me).size>0&&t.SQLite3Error.toss(o.SQLITE_MISUSE,"Cannot pause VFS",this.vfsName,"because it has opened files."),$(this,ie).size>0&&(o.sqlite3_vfs_unregister(this.vfsName),this.releaseAccessHandles()),this}isPaused(){return $(this,ie).size===0}async unpauseVfs(){return $(this,ie).size===0?this.acquireAccessHandles(!1).then(()=>o.sqlite3_vfs_register($(this,N),0),this):this}exportFile(f){const q=$(this,ce).get(f)||i("File not found:",f),S=q.getSize()-h,T=new Uint8Array(S>0?S:0);if(S>0){const H=q.read(T,{at:h});H!=S&&i("Expected to read "+S+" bytes but read "+H+".")}return T}async importDbChunked(f,q){const S=$(this,ce).get(f)||this.nextAvailableSAH()||i("No available handles to import to.");S.truncate(0);let T=0,H,J=!1;try{for(;(H=await q())!==void 0;)H instanceof ArrayBuffer&&(H=new Uint8Array(H)),T===0&&H.byteLength>=15&&(g.affirmDbHeader(H),J=!0),S.write(H,{at:h+T}),T+=H.byteLength;if((T<512||T%512!==0)&&i("Input size",T,"is not correct for an SQLite database."),!J){const ee=new Uint8Array(20);S.read(ee,{at:0}),g.affirmDbHeader(ee)}S.write(new Uint8Array([1,1]),{at:h+18})}catch(ee){throw this.setAssociatedPath(S,"",0),ee}return this.setAssociatedPath(S,f,o.SQLITE_OPEN_MAIN_DB),T}importDb(f,q){if(q instanceof ArrayBuffer)q=new Uint8Array(q);else if(q instanceof Function)return this.importDbChunked(f,q);const S=$(this,ce).get(f)||this.nextAvailableSAH()||i("No available handles to import to."),T=q.byteLength;(T<512||T%512!=0)&&i("Byte array size is invalid for an SQLite db.");const H="SQLite format 3";for(let ee=0;ee<H.length;++ee)H.charCodeAt(ee)!==q[ee]&&i("Input does not contain an SQLite database header.");const J=S.write(q,{at:h});return J!=T?(this.setAssociatedPath(S,"",0),i("Expected to write "+T+" bytes but wrote "+J+".")):(S.write(new Uint8Array([1,1]),{at:h+18}),this.setAssociatedPath(S,f,o.SQLITE_OPEN_MAIN_DB)),J}}le=new WeakMap,ae=new WeakMap,re=new WeakMap,ie=new WeakMap,ce=new WeakMap,ge=new WeakMap,me=new WeakMap,I=new WeakMap,R=new WeakMap,N=new WeakMap,K=new WeakMap,V=new WeakSet,it=function(f,...q){$(this,K)>f&&c[f](this.vfsName+":",...q)};class oe{constructor(f){we(this,Y);Ie(this,Y,f),this.vfsName=f.vfsName}async addCapacity(f){return $(this,Y).addCapacity(f)}async reduceCapacity(f){return $(this,Y).reduceCapacity(f)}getCapacity(){return $(this,Y).getCapacity($(this,Y))}getFileCount(){return $(this,Y).getFileCount()}getFileNames(){return $(this,Y).getFileNames()}async reserveMinimumCapacity(f){const q=$(this,Y).getCapacity();return q<f?$(this,Y).addCapacity(f-q):q}exportFile(f){return $(this,Y).exportFile(f)}importDb(f,q){return $(this,Y).importDb(f,q)}async wipeFiles(){return $(this,Y).reset(!0)}unlink(f){return $(this,Y).deletePath(f)}async removeVfs(){return $(this,Y).removeVfs()}pauseVfs(){return $(this,Y).pauseVfs(),this}async unpauseVfs(){return $(this,Y).unpauseVfs().then(()=>this)}isPaused(){return $(this,Y).isPaused()}}Y=new WeakMap;const te=async()=>{const F=await navigator.storage.getDirectory(),f=".opfs-sahpool-sync-check-"+C(),T=(await(await F.getFileHandle(f,{create:!0})).createSyncAccessHandle()).close();return await T,await F.removeEntry(f),T!=null&&T.then&&i("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0};t.installOpfsSAHPoolVfs=async function(F=Object.create(null)){var q;F=Object.assign(Object.create(null),M,F||{});const f=F.name;if(F.$testThrowPhase1)throw F.$testThrowPhase1;if(r[f])try{return await r[f]}catch(S){if(F.forceReinitIfPreviouslyFailed)delete r[f];else throw S}return!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!((q=navigator==null?void 0:navigator.storage)!=null&&q.getDirectory)?r[f]=Promise.reject(new Error("Missing required OPFS APIs.")):r[f]=te().then(async function(){if(F.$testThrowPhase2)throw F.$testThrowPhase2;const S=new X(F);return S.isReady.then(async()=>{const T=new oe(S);if(t.oo1){const H=t.oo1,J=S.getVfs(),ee=function(..._e){const qe=H.DB.dbCtorHelper.normalizeArgs(..._e);qe.vfs=J.$zName,H.DB.dbCtorHelper.call(this,qe)};ee.prototype=Object.create(H.DB.prototype),T.OpfsSAHPoolDb=ee}return S.log("VFS initialized."),T}).catch(async T=>{throw await S.removeVfs().catch(()=>{}),T})}).catch(S=>r[f]=Promise.reject(S))}}),typeof _<"u"){const t=Object.assign(Object.create(null),{exports:typeof ze>"u"?_.asm:ze,memory:_.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=t;let i;try{i=globalThis.sqlite3ApiBootstrap()}catch(n){throw console.error("sqlite3ApiBootstrap() error:",n),n}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}_.sqlite3=i}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")},yt?ve=_:ve=new Promise((e,t)=>{Ze=e,et=t}),ve};de=function(){var _,Ke;const ke=de;if(!ke)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const ve=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:(_=globalThis==null?void 0:globalThis.document)==null?void 0:_.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:(Ke=globalThis==null?void 0:globalThis.location)!=null&&Ke.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(ve.debugModule=ve.urlParams.has("sqlite3.debugModule")?(...Se)=>console.warn("sqlite3.debugModule:",...Se):()=>{},ve.urlParams.has("sqlite3.dir"))ve.sqlite3Dir=ve.urlParams.get("sqlite3.dir")+"/";else if(ve.moduleScript){const Se=ve.moduleScript.src.split("/");Se.pop(),ve.sqlite3Dir=Se.join("/")+"/"}if(globalThis.sqlite3InitModule=function Se(...Me){return ke(...Me).then(Fe=>{Fe.runSQLite3PostLoadInit(Fe);const je=Fe.sqlite3;je.scriptInfo=ve,Se.__isUnderTest&&(je.__isUnderTest=!0);const st=je.asyncPostInit;return delete je.asyncPostInit,st()}).catch(Fe=>{throw console.error("Exception loading sqlite3 module:",Fe),Fe})},globalThis.sqlite3InitModule.ready=ke.ready,globalThis.sqlite3InitModuleState.moduleScript){const Se=globalThis.sqlite3InitModuleState;let Me=Se.moduleScript.src.split("/");Me.pop(),Se.scriptDir=Me.join("/")+"/"}return ve.debugModule("sqlite3InitModuleState =",ve),globalThis.sqlite3InitModule}();var he=de;he().then(ke=>ke.initWorker1API())})();
